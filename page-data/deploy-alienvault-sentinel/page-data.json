{"componentChunkName":"component---node-modules-pitayan-gatsby-theme-pitayan-src-templates-post-index-tsx-content-file-path-content-posts-2022-11-11-deploy-alienvault-sentinel-index-mdx","path":"/deploy-alienvault-sentinel/","result":{"data":{"mdx":{"body":"# Deploying AlienVault TI to Sentinel - short walkthrough\n\n\nThrough this article we will be setting up AlienVault OTX as Threat Intelligence towards our Sentinel Workspace. I want to keep this short and to the point, making it easier for any reader to just jump into this whenever they need to refresh some steps or for the first time setting it up.\n### Requirements\nThere are some requirements you need to make sure you have. This is not a \"how to deploy Sentinel\"-included article, I assume you already have Sentinel deployed. Also, you need an account at AlienVault to get your API-key. You also need to be able to PIM-up to Global admin, to make the necessary applications towards our end goal.\n\n### Getting the AlienVault API-key\nTo get the required API-key from AlienVault, login to your user at [otx.alienvault.com](https://otx.alienvault.com) and navigate to the \"API Integration\" from the top menu. Then copy the OTX-API-KEY. \n\n\n### Setting up the API ingestion app registration\nWe need to have an application that lets us use the Microsoft Graph Security tiIndicators API to send our TI into Sentinel.\n\nFrom these following steps we want to acquire:\n- Application (client) ID, \n- Directory (tenant) ID, and \n- a Client secret. \n\n1. Go to portal.azure.com and PIM up to Global Admin ([How to](https://learn.microsoft.com/en-us/azure/active-directory/privileged-identity-management/pim-resource-roles-activate-your-roles))\n2. Choose \"Azure Active Directory\".\n3. Click \"App registrations\"\n4. \"New registration\"\n![](media/20221017203105.png)\n5. The only thing needed to be filled out is the Name, and choose \"Accounts in this organizational directory only (... - Single tenant)\" and click \"Register\"\n6. Make a copy of or note somewhere both the Application (client) ID and Directory (tenant) ID values. (For windows, activate clipboard - windows + \"V\" - for multiple copy and pastes in one go). ![](media/20221017203719.png)  \n7. Select \"Api Permissions\" from the left menu\n8. There go to \"Add a permission\" and select \"Microsoft Graph\" and then \"Application permissions\"\n9. Search for \"threat\" or scroll far down, locate the \"ThreatIndicators.ReadWrite.OwnedBy\" permission and check the box before clicking \"Add permissions\". ![](media/20221017204752.png)  \n10. Click the \"Grant admin consent for YourTenantName\" which will change the warning to a \"Granted for...\" message. ![](media/20221017205223.png)\n11. To create a secret, go to \"Certificates & secrets\" on the left menu.\n12. Click \"New client secret\", create a description and set wanted expiry before clicking \"Add\".\n13. Copy the \"Value\" field now - you cannot retrieve it later on.\n\n\n## Deploying the ready-made Logic app\n1. Go to [THIS](https://github.com/Azure/Azure-Sentinel/tree/master/Playbooks/Get-AlienVault_OTX) Github page, scroll to the bottom and click the \"Deploy to Azure\" button.\n2. Preferrably you choose the subscription you have Sentinel in, and the Resource Group.\n3. Click \"Review + Create\" and then \"Create\".\n4. Next, click \"Go to resource\", which shows up sequentially.\n5. Click \"Edit\", make a note of the \"Enable\" as well. \n![](media/20221017211612.png)\n6. Paste in all the values from the previous steps. ![](media/20221017211719.png)  \n7. Scroll down to the step beginning with \"Lookback Days...\" and set the value to 365 days and save the app.\n8. Close down the \"Edit\" window with the \"X\" in the right upper corner.\n9. Remember from step 5 - \"Enable\" - click it.\n10. Now, run the trigger, the far left on the same menu bar! This may take a while, as it is looking back a whole year (365 days). For me, this took about an hour.\n11. We're not done yet. The first time this app is run, we set it to lookback for 365 days. We need to change that to \"-1\" to look back one day for the next scheduled runs, or a with a different setup. Your Choice!\n\n\nEnjoy the feed from your AlienVault account! :)\n\n\n#### Resources\nhttps://github.com/Azure/Azure-Sentinel/tree/master/Playbooks/Get-AlienVault_OTX  \nhttps://thewindowsupdate.com/2020/02/11/bring-your-threat-intelligence-to-azure-sentinel/  \nhttps://techcommunity.microsoft.com/t5/microsoft-sentinel-blog/ingesting-alien-vault-otx-threat-indicators-into-azure-sentinel/ba-p/1086566  \nhttps://cybergeeks.cloud/2022/05/how-to-integrate-alien-vault-otx-threat-indicators-into-microsoft-sentinel/  \nhttps://learn.microsoft.com/en-us/azure/active-directory/privileged-identity-management/pim-resource-roles-activate-your-roles  \n\n","timeToRead":3.08,"tableOfContents":{"items":[{"url":"#deploying-alienvault-ti-to-sentinel---short-walkthrough","title":"Deploying AlienVault TI to Sentinel - short walkthrough","items":[{"items":[{"url":"#requirements","title":"Requirements"},{"url":"#getting-the-alienvault-api-key","title":"Getting the AlienVault API-key"},{"url":"#setting-up-the-api-ingestion-app-registration","title":"Setting up the API ingestion app registration"}]},{"url":"#deploying-the-ready-made-logic-app","title":"Deploying the ready-made Logic app","items":[{"items":[{"url":"#resources","title":"Resources"}]}]}]}]},"frontmatter":{"author":[{"id":"7efe43a5-8dae-5391-b8c0-1c2acebf8c2e","yamlId":"adriankydlandskaftun","name":"Adrian Kydland Skaftun","initial":"AKS","bio":"Cyber security engineer\n","sns":[["linkedin","https://www.linkedin.com/in/akskaftun/"],["github","https://github.com/bittib010"],["mailto","mailto:adrian.skaftun@amesto.no"]],"avatar":{"normal":{"gatsbyImageData":{"layout":"constrained","placeholder":{"fallback":"data:image/jpeg;base64,/9j/2wBDABALDA4MChAODQ4SERATGCgaGBYWGDEjJR0oOjM9PDkzODdASFxOQERXRTc4UG1RV19iZ2hnPk1xeXBkeFxlZ2P/2wBDARESEhgVGC8aGi9jQjhCY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2P/wgARCAAVABQDASIAAhEBAxEB/8QAGQABAQADAQAAAAAAAAAAAAAAAAQBAgMF/8QAFgEBAQEAAAAAAAAAAAAAAAAAAQIA/9oADAMBAAIQAxAAAAGrEnUrqkaZtSj0Qb//xAAaEAACAwEBAAAAAAAAAAAAAAABAgAREiED/9oACAEBAAEFAm4FPdkzR1dG57MWfXSwn//EABkRAAEFAAAAAAAAAAAAAAAAAAABAhARIf/aAAgBAwEBPwFqYVP/xAAZEQABBQAAAAAAAAAAAAAAAAAAAQIQESH/2gAIAQIBAT8Bculz/8QAHBAAAgICAwAAAAAAAAAAAAAAAAECEBEhMWFx/9oACAEBAAY/Aq5HKWcd34I3FM//xAAaEAEAAwEBAQAAAAAAAAAAAAABABEhMVFh/9oACAEBAAE/IX85SaewFa7jSAWCIVDLjNIcOCLXAE8mG19Z/9oADAMBAAIAAwAAABCr6MP/xAAYEQADAQEAAAAAAAAAAAAAAAAAAREQIf/aAAgBAwEBPxBa7xWU/8QAFhEBAQEAAAAAAAAAAAAAAAAAAQAR/9oACAECAQE/EFdFuwsL/8QAHBABAQEBAAIDAAAAAAAAAAAAAREAITFRQYGh/9oACAEBAAE/EJqsLHCQxE+nCOK7GZ4MiYL8T93lQih7mnAZzxlqKyDwZ5mGQh3jvvJ4wSvXf//Z"},"images":{"fallback":{"src":"/static/cccbb7c63b7ff3e3ed1d721dbf8a3a2f/fc240/adrian.jpg","srcSet":"/static/cccbb7c63b7ff3e3ed1d721dbf8a3a2f/e26e9/adrian.jpg 32w,\n/static/cccbb7c63b7ff3e3ed1d721dbf8a3a2f/d306e/adrian.jpg 64w,\n/static/cccbb7c63b7ff3e3ed1d721dbf8a3a2f/fc240/adrian.jpg 128w,\n/static/cccbb7c63b7ff3e3ed1d721dbf8a3a2f/e270b/adrian.jpg 256w","sizes":"(min-width: 128px) 128px, 100vw"},"sources":[]},"width":128,"height":136}}}}],"title":"Deploying AlienVault TI to Sentinel - short walkthrough","description":"Guide on setting up Alienvault feed to Azure Sentinel","date":"November 11th, 2022","categories":["Open Threat Exchange","Alienvault","Sentinel","Azure","Threat Intelligence"],"hero":{"medium":{"gatsbyImageData":{"layout":"constrained","placeholder":{"fallback":"data:image/jpeg;base64,/9j/2wBDABALDA4MChAODQ4SERATGCgaGBYWGDEjJR0oOjM9PDkzODdASFxOQERXRTc4UG1RV19iZ2hnPk1xeXBkeFxlZ2P/2wBDARESEhgVGC8aGi9jQjhCY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2P/wgARCAALABQDASIAAhEBAxEB/8QAFwABAQEBAAAAAAAAAAAAAAAAAAIBBf/EABYBAQEBAAAAAAAAAAAAAAAAAAIAAf/aAAwDAQACEAMQAAAB40VGDBL/xAAXEAADAQAAAAAAAAAAAAAAAAAAARBB/9oACAEBAAEFAsHFP//EABURAQEAAAAAAAAAAAAAAAAAAAEQ/9oACAEDAQE/ASf/xAAUEQEAAAAAAAAAAAAAAAAAAAAQ/9oACAECAQE/AT//xAAVEAEBAAAAAAAAAAAAAAAAAAAQAf/aAAgBAQAGPwJr/8QAGBAAAwEBAAAAAAAAAAAAAAAAAAExQRD/2gAIAQEAAT8h0auHBQz/2gAMAwEAAgADAAAAEMPv/8QAFhEBAQEAAAAAAAAAAAAAAAAAAQAh/9oACAEDAQE/EBjF/8QAFREBAQAAAAAAAAAAAAAAAAAAARD/2gAIAQIBAT8QJ//EABwQAAICAgMAAAAAAAAAAAAAAAABETFxsSFBYf/aAAgBAQABPxCFLVaFLiF5WCt4tFmDrg//2Q=="},"images":{"fallback":{"src":"/static/a3963fb7d3d376271d519b5564a69cdf/0709d/matrix.jpg","srcSet":"/static/a3963fb7d3d376271d519b5564a69cdf/50c67/matrix.jpg 236w,\n/static/a3963fb7d3d376271d519b5564a69cdf/bd832/matrix.jpg 472w,\n/static/a3963fb7d3d376271d519b5564a69cdf/0709d/matrix.jpg 944w,\n/static/a3963fb7d3d376271d519b5564a69cdf/53023/matrix.jpg 1888w","sizes":"(min-width: 944px) 944px, 100vw"},"sources":[]},"width":944,"height":531}}}},"fields":{"slug":"/deploy-alienvault-sentinel"},"relatedPosts":[{"id":"25a69182-1cd4-5f03-b8e4-faf3367b5384","timeToRead":1.435,"fields":{"slug":"/konfigurasjonskontroll-for-okt-sikkerhet-del2"},"frontmatter":{"title":"Konfigurasjonskontroll for økt sikkerhet i skyløsninger – del 2","date":"October 28th, 2022","categories":["Cyber Security","Sentinel"],"hero":{"normal":{"gatsbyImageData":{"layout":"constrained","placeholder":{"fallback":"data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAALCAIAAADwazoUAAAACXBIWXMAAAsTAAALEwEAmpwYAAABoElEQVR42nWRz27TQBDG/RQUISTPn52117trO1knMYmVOiVpSQtSVKQihOiZA5fekBAP0IfoG/QJeDq0cRp6gNFcdmZ/M9+3m7BobX1unRs3o3be9mfnN1/efb7d7K6//fh1+/1u+eG6e79rur5qOzMKYj0pDUiAmBARi0ieGeddmJRhOlttFheXq93N/ePvnw+P609fp/06dL0Ns9xXyjiSLMJECSlRWa4La5yvF8uqXfhm5sNkurmavN2Oz7bN9mNR1i5MbdNqX7HOkRiIADlBQBLNopVobWxRjao33Wi+JJZXJy9evzwBpV2YFlWtrVeZIcmQFRIBYAKIiMRKonlfFfXYjZsyTFgEAGKXyJa18ZW4kiVD4kgiRs9DG6N1JcaqLC/CLKyvSAmkaeSJytPzvBorY0kyYkHmJxhg0DAoQGI3X7nFas/FSAFtf2lPL+Id5ifNMRLczzjkUKV4A+BQTLUDlbHxfwXv/USYlIopmnUmuRlm4TBo/5mQOwAanubo9rAZ/h0pEEcYALSBo4e4EI+H/8FwWAsALM+rz+E/1zVqkFrjL+sAAAAASUVORK5CYII="},"images":{"fallback":{"src":"/static/ca386487c8a4c1eb2fcfb9ef20fd5707/b9b26/splash.png","srcSet":"/static/ca386487c8a4c1eb2fcfb9ef20fd5707/377a5/splash.png 192w,\n/static/ca386487c8a4c1eb2fcfb9ef20fd5707/3389a/splash.png 384w,\n/static/ca386487c8a4c1eb2fcfb9ef20fd5707/b9b26/splash.png 768w","sizes":"(min-width: 768px) 768px, 100vw"},"sources":[]},"width":768,"height":423}}},"description":"Tidligere i sikkerhetsmåneden skrev jeg en sak som tok for seg utfordringer med konfigurasjonskontroll, sett i sammenheng med angrepet Uber ble utsatt for, med noen tips om hvordan man kan beskytte seg bedre mot denne type angrep."}},{"id":"ef2ad2cf-c75e-5a3b-824f-5d056af48441","timeToRead":3.355,"fields":{"slug":"/konfigurasjonskontroll-for-okt-sikkerhet"},"frontmatter":{"title":"Konfigurasjonskontroll for økt sikkerhet i skyløsninger","date":"October 12th, 2022","categories":["Cyber Security","Sentinel"],"hero":{"normal":{"gatsbyImageData":{"layout":"constrained","placeholder":{"fallback":"data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAALCAIAAADwazoUAAAACXBIWXMAAAsTAAALEwEAmpwYAAABoElEQVR42nWRz27TQBDG/RQUISTPn52117trO1knMYmVOiVpSQtSVKQihOiZA5fekBAP0IfoG/QJeDq0cRp6gNFcdmZ/M9+3m7BobX1unRs3o3be9mfnN1/efb7d7K6//fh1+/1u+eG6e79rur5qOzMKYj0pDUiAmBARi0ieGeddmJRhOlttFheXq93N/ePvnw+P609fp/06dL0Ns9xXyjiSLMJECSlRWa4La5yvF8uqXfhm5sNkurmavN2Oz7bN9mNR1i5MbdNqX7HOkRiIADlBQBLNopVobWxRjao33Wi+JJZXJy9evzwBpV2YFlWtrVeZIcmQFRIBYAKIiMRKonlfFfXYjZsyTFgEAGKXyJa18ZW4kiVD4kgiRs9DG6N1JcaqLC/CLKyvSAmkaeSJytPzvBorY0kyYkHmJxhg0DAoQGI3X7nFas/FSAFtf2lPL+Id5ifNMRLczzjkUKV4A+BQTLUDlbHxfwXv/USYlIopmnUmuRlm4TBo/5mQOwAanubo9rAZ/h0pEEcYALSBo4e4EI+H/8FwWAsALM+rz+E/1zVqkFrjL+sAAAAASUVORK5CYII="},"images":{"fallback":{"src":"/static/ca386487c8a4c1eb2fcfb9ef20fd5707/b9b26/splash.png","srcSet":"/static/ca386487c8a4c1eb2fcfb9ef20fd5707/377a5/splash.png 192w,\n/static/ca386487c8a4c1eb2fcfb9ef20fd5707/3389a/splash.png 384w,\n/static/ca386487c8a4c1eb2fcfb9ef20fd5707/b9b26/splash.png 768w","sizes":"(min-width: 768px) 768px, 100vw"},"sources":[]},"width":768,"height":423}}},"description":"Vi lever i en usikker tid. Det er krig i Europa. Nasjonal Sikkerhetsmyndighet (NSM) ber norske virksomheter være ekstra årvåkne. Og Uber ble utsatt for datainnbrudd."}},{"id":"60030322-c246-5403-bc50-df3e10d7e5ee","timeToRead":2.04,"fields":{"slug":"/du-er-ikke-saa-spesiell"},"frontmatter":{"title":"Du er ikke så spesiell som du tror","date":"September 29th, 2022","categories":["Cyber Security","Sentinel","MDR"],"hero":{"normal":{"gatsbyImageData":{"layout":"constrained","placeholder":{"fallback":"data:image/jpeg;base64,/9j/2wBDABALDA4MChAODQ4SERATGCgaGBYWGDEjJR0oOjM9PDkzODdASFxOQERXRTc4UG1RV19iZ2hnPk1xeXBkeFxlZ2P/2wBDARESEhgVGC8aGi9jQjhCY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2P/wgARCAALABQDASIAAhEBAxEB/8QAFwABAQEBAAAAAAAAAAAAAAAAAAUBBP/EABUBAQEAAAAAAAAAAAAAAAAAAAEA/9oADAMBAAIQAxAAAAGZ1TQmI//EABgQAQEAAwAAAAAAAAAAAAAAAAIDERIg/9oACAEBAAEFAovROuFx/8QAFREBAQAAAAAAAAAAAAAAAAAAEBH/2gAIAQMBAT8Bp//EABQRAQAAAAAAAAAAAAAAAAAAABD/2gAIAQIBAT8BP//EABkQAAEFAAAAAAAAAAAAAAAAAAABICExQf/aAAgBAQAGPwIWcpv/xAAaEAEAAgMBAAAAAAAAAAAAAAABABEQIUFh/9oACAEBAAE/IeIoxrejr6wTtRn/2gAMAwEAAgADAAAAEGPv/8QAFhEAAwAAAAAAAAAAAAAAAAAAEBEx/9oACAEDAQE/EIQ//8QAFBEBAAAAAAAAAAAAAAAAAAAAEP/aAAgBAgEBPxA//8QAGhAAAgMBAQAAAAAAAAAAAAAAAREAITEQYf/aAAgBAQABPxCwOiDgZQrsPUdZNG4QjDBx/9k="},"images":{"fallback":{"src":"/static/7fd736a6c82b145ffa2e02c51826fd25/cba23/splash.jpg","srcSet":"/static/7fd736a6c82b145ffa2e02c51826fd25/f2b8b/splash.jpg 192w,\n/static/7fd736a6c82b145ffa2e02c51826fd25/34854/splash.jpg 384w,\n/static/7fd736a6c82b145ffa2e02c51826fd25/cba23/splash.jpg 768w","sizes":"(min-width: 768px) 768px, 100vw"},"sources":[]},"width":768,"height":410}}},"description":"Cybersikkerhet er viktigere enn noen gang. Flere og flere bedrifter blir rammet av cyberangrep, noe som kan få fatale konsekvenser for den som blir rammet. Å få på plass grunnleggende cybersikkerhet trenger, ifølge Amesto Fortytwo, verken å koste en formue eller være komplisert. Man må bare tenke smart."}}]}},"pageContext":{"slug":"/deploy-alienvault-sentinel","tableOfContentsLevels":2,"previous":{"title":"Kusto Detective - Rookie - Onboarding","slug":"/kusto-detective-agency1"},"next":{"title":"Monitoring to stay ahead of the threat landscape","slug":"/monitoring-to-stay-ahead"},"frontmatter":{"title":"Deploying AlienVault TI to Sentinel - short walkthrough","author":["Adrian Kydland Skaftun"],"date":"2022-11-11T00:00:00.000Z","categories":["Open Threat Exchange","Alienvault","Sentinel","Azure","Threat Intelligence"],"description":"Guide on setting up Alienvault feed to Azure Sentinel","hero":"media/matrix.jpg","slug":"deploy-alienvault-sentinel"}}},"staticQueryHashes":["176088207"],"slicesMap":{}}