<?xml version="1.0" encoding="UTF-8"?><rss xmlns:dc="http://purl.org/dc/elements/1.1/" xmlns:content="http://purl.org/rss/1.0/modules/content/" xmlns:atom="http://www.w3.org/2005/Atom" version="2.0"><channel><title><![CDATA[Amesto Fortytwo RSS Feed]]></title><description><![CDATA[The answer is meaningsless - unless you understand the question.]]></description><link>https://blog.amestofortytwo.com</link><generator>GatsbyJS</generator><lastBuildDate>Mon, 12 Dec 2022 20:54:00 GMT</lastBuildDate><item><title><![CDATA[Kusto Detective - Rookie - Onboarding]]></title><description><![CDATA[Walkthrough of Kusto Detective Agency series]]></description><link>https://blog.amestofortytwo.com/kusto-detective-agency1</link><guid isPermaLink="false">https://blog.amestofortytwo.com/kusto-detective-agency1</guid><category><![CDATA[KQL]]></category><category><![CDATA[Azure Data Explorer]]></category><category><![CDATA[Data Science]]></category><pubDate>Sun, 11 Dec 2022 00:00:00 GMT</pubDate><content:encoded>&lt;h1 id=&quot;kusto-detective---rookie---onboarding&quot; style=&quot;position:relative&quot;&gt;&lt;a href=&quot;#kusto-detective---rookie---onboarding&quot; aria-label=&quot;kusto detective   rookie   onboarding permalink&quot; class=&quot;heading-anchor before&quot;&gt;&lt;span&gt;#&lt;/span&gt;&lt;/a&gt;Kusto Detective - Rookie - Onboarding&lt;/h1&gt;&lt;h2 id=&quot;introduction&quot; style=&quot;position:relative&quot;&gt;&lt;a href=&quot;#introduction&quot; aria-label=&quot;introduction permalink&quot; class=&quot;heading-anchor before&quot;&gt;&lt;span&gt;#&lt;/span&gt;&lt;/a&gt;Introduction&lt;/h2&gt;&lt;p&gt;Microsoft has created this wonderful CTF like challenge for all of us to go into the depths of some possibilities that resides in the Kusto Query Language (KQL). Now, not to spoil everything I really hope that you have tried your best before landing here - because I will provide you with one of many solution to get through this series of tasks, starting with the onboarding. This is considered as a “Rookie” level, which is your starting title in upper right corner on the dashboard. &lt;/p&gt;&lt;p&gt;This article is aimed towards beginners that needs to “fill in the gaps”. Therefore things are explained with this in mind. I would also like to point out that these tasks takes into consideration that you practice in between the steps provided here. Like many programs and softwares we run, this challenge also has it quirks - at the end of some of the guides (including this) you will find some help for troubleshooting.&lt;/p&gt;&lt;p&gt;Do not expect these tasks to go lightly if you do not practice. With this series of walkthroughs I would like to minimize that gap, but also to provide you some insight into how I aproached these - as I used these tasks myself to get better at KQL. Reading KQL (as with most languages) might be a lot easier than writing it, especially when all you have is a goal in mind and do not know the syntax nor the possibilities.&lt;/p&gt;&lt;p&gt;If you want a more thorough lesson on KQL, here’s a short list that will take you really far:&lt;/p&gt;&lt;ul&gt;&lt;li&gt;&lt;a href=&quot;https://aka.ms/MustLearnKQL&quot; target=&quot;_blank&quot; rel=&quot;noreferrer&quot;&gt;Must learn KQL by Rod Trent&lt;/a&gt;&lt;/li&gt;&lt;li&gt;&lt;a href=&quot;https://learn.microsoft.com/en-us/azure/data-explorer/&quot; target=&quot;_blank&quot; rel=&quot;noreferrer&quot;&gt;Microsoft Learn modules ADX&lt;/a&gt;&lt;/li&gt;&lt;li&gt;&lt;a href=&quot;https://learn.microsoft.com/en-us/azure/data-explorer/kusto/query/&quot; target=&quot;_blank&quot; rel=&quot;noreferrer&quot;&gt;Microsoft Learn modules KQL&lt;/a&gt;&lt;/li&gt;&lt;li&gt;&lt;a href=&quot;https://learn.microsoft.com/en-us/training/modules/intro-to-azure-data-explorer/&quot; target=&quot;_blank&quot; rel=&quot;noreferrer&quot;&gt;ADX training modules MS Learn&lt;/a&gt;&lt;/li&gt;&lt;li&gt;&lt;a href=&quot;https://www.pluralsight.com/partners/microsoft/azure-data-explorer&quot; target=&quot;_blank&quot; rel=&quot;noreferrer&quot;&gt;Pluralsight courses&lt;/a&gt;&lt;/li&gt;&lt;li&gt;&lt;a href=&quot;http://aka.ms/StartKqlVideo&quot; target=&quot;_blank&quot; rel=&quot;noreferrer&quot;&gt;John Saville video&lt;/a&gt;&lt;/li&gt;&lt;/ul&gt;&lt;h2 id=&quot;lets-dive-in&quot; style=&quot;position:relative&quot;&gt;&lt;a href=&quot;#lets-dive-in&quot; aria-label=&quot;lets dive in permalink&quot; class=&quot;heading-anchor before&quot;&gt;&lt;span&gt;#&lt;/span&gt;&lt;/a&gt;Let’s dive in&lt;/h2&gt;&lt;p&gt;Go to &lt;a href=&quot;https://detective.kusto.io/inbox&quot; target=&quot;_blank&quot; rel=&quot;noreferrer&quot;&gt;https://detective.kusto.io/inbox&lt;/a&gt; and click “Go to inbox”. (PS: if you are returning and logged out, you need to enter your Cluster URI once more to get back to where you were).&lt;/p&gt;&lt;p&gt;&lt;span class=&quot;gatsby-resp-image-wrapper&quot; style=&quot;position:relative;display:block;margin-left:auto;margin-right:auto;max-width:910px&quot;&gt;
      &lt;span class=&quot;gatsby-resp-image-background-image&quot; style=&quot;padding-bottom:68.46153846153847%;position:relative;bottom:0;left:0;background-image:url(&amp;#x27;data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAAOCAIAAACgpqunAAAACXBIWXMAAA7DAAAOwwHHb6hkAAACOUlEQVQoz23Ka26bQBQFYLbgvBwTu8EMmMdgZgbGwDzAPO1gp00cqlSRKkX9E6n76N8uowvoDitDVCVVpU9H5x5dBYr6jcaTRw6vgnIfb+6i5hO7OUBRu/+jOEn5RgV57fLKjguSt93zS/f8InedHRfv314p1ip/h+Z2VNhRTtZtff/0+O073x4suv73racYRJo9469AAiJhXCLe+KxestoM0kXYey3ZcCo2zayevcr6vrZoaoWpTiVga8BzPcoMwg0iDMIB4UYg+i4A5kpU7qNiR/PdqtjF1W1c7qNyT/PWotkiWttxbq0y3U90xHTE5n4y0NExFZ9VWDRENH5SEtEgVhG5wbwOsy2RG5puMa8MxA3EAWIDAzEDcxMLJdve17eP5f5zr2s+ftnePRW7bljytsvbh7ztirbLbg75rsu2h7ztZHOHea0QXoWyCWVD023Aa5puqNwEosaswqwi/eKG6bUTai49ckLNCa+dcLrAikOEhZkTCCcQkKaQpoYXTXRPBX5vqRr+leFPTTSYLfBsgafmMRXgRU4gzGVy/sG91OBYgxfX7liDl3NvMAHL16Ifczz3xv3bWPMUFOfx+iZgFUlKnBQozkNRezSDRLgwcWDs+AzS9LiEEgbSwdzGHIap4cWKjRIYSNtPXMIhEQ5iXiB0i6gLBMpSr6oZiq7mcAqWqgbVuTfkcConE3AyAaMxGI31HhhdgtGpptKY/PoR/v45//pweqqdz6wz1TxTzfOrxeBiav0BapKowPSxYywAAAAASUVORK5CYII=&amp;#x27;);background-size:cover;display:block&quot;&gt;&lt;/span&gt;
  &lt;img class=&quot;gatsby-resp-image-image&quot; alt=&quot;20221108121526&quot; title=&quot;20221108121526&quot; src=&quot;/static/a1ac41b7eff918e3ee45f788ec37c8f9/9d517/20221108121526.png&quot; srcSet=&quot;/static/a1ac41b7eff918e3ee45f788ec37c8f9/9d517/20221108121526.png 910w&quot; sizes=&quot;(max-width: 910px) 100vw, 910px&quot; style=&quot;width:100%;height:100%;margin:0;vertical-align:middle;position:absolute;top:0;left:0&quot; loading=&quot;lazy&quot; decoding=&quot;async&quot;/&gt;
    &lt;/span&gt; &lt;/p&gt;&lt;p&gt;Click the first message you have received there and read through it. You are presented with an instruction on how to set up your first cluster of data within Azure Data Explorer (ADX). This should be easy. The guide provided there are pretty straight forward, I’ll just leave a Screenshot for future reference: &lt;/p&gt;&lt;p&gt;&lt;span class=&quot;gatsby-resp-image-wrapper&quot; style=&quot;position:relative;display:block;margin-left:auto;margin-right:auto;max-width:1744px&quot;&gt;
      &lt;span class=&quot;gatsby-resp-image-background-image&quot; style=&quot;padding-bottom:50.28669724770643%;position:relative;bottom:0;left:0;background-image:url(&amp;#x27;data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAAKCAIAAAA7N+mxAAAACXBIWXMAAA7DAAAOwwHHb6hkAAAB6ElEQVQoz43GTU/TYADA8X4Dx7ZupW97nrV9+rI+69q9usIcczIohARIOHjx4IWDiQduntSD4eSIBoVUtskwmQcxUYxsATcMcSaKMWoQOBA/ipGFRLOLyS///Im5+Zsz1+ZHpq+mStNmYdIsTBp553/EChMEzo3h4ZKRG8uOz9jOrO3MWoUJI+/gXEmzi/rwqHHJidijEftKP0JO5gXTTl6eWnLX155uVJ49d6v1FbfmVuvrG43bi/fFeE5JjcjJfD9CsoaAnkoXpx40WpWXO+33++29/VZr591up/vhY6Xe4PWUZA2Jpt2PCEcznJaI2cV7S4/LK9WHq2vLbvXRk1p5edWt1a/fWGCVOIxmIE6Df0GcJoCWoMJ6Oj/++dvR16PTw+PTzpefB99PDn4cdw9/3Vks+3gFaAlOsXr48/KKRbDIIEOqmS28bna2O93m9u7mizevNt9uNdtbe58Wbt31ciqnxBlk9rBnGClGiwZBAS3AK6yA4xdzZjIdwYaOjYhuaHoUR01JxSFRAaICz/tnBBmpGCKdIBnko6UAizhB5SEapEM9DAu5sMoBmWPCPEAckP4WgogDMjEQgB4SDASgjxK9QcFDQg8JL5DQGxQCNAqGNSaT9VMiSSM/LflpiTyrf1DyUeJvYmil6NsHjF8AAAAASUVORK5CYII=&amp;#x27;);background-size:cover;display:block&quot;&gt;&lt;/span&gt;
  &lt;img class=&quot;gatsby-resp-image-image&quot; alt=&quot;20221108122131&quot; title=&quot;20221108122131&quot; src=&quot;/static/5b4e0da2b50ef057686fd3f85f297f1f/d2ccd/20221108122131.png&quot; srcSet=&quot;/static/5b4e0da2b50ef057686fd3f85f297f1f/d2ccd/20221108122131.png 1744w&quot; sizes=&quot;(max-width: 1744px) 100vw, 1744px&quot; style=&quot;width:100%;height:100%;margin:0;vertical-align:middle;position:absolute;top:0;left:0&quot; loading=&quot;lazy&quot; decoding=&quot;async&quot;/&gt;
    &lt;/span&gt;  &lt;/p&gt;&lt;p&gt;There are, as you can see a blade called “Hints”. On this you can get at most three hints. Ill keep a screenshot on every artice in the series and incorporate them into my solutions somehow. For this Rookie badge, we are not provided any hints, as it is considered to low level.&lt;/p&gt;&lt;h1 id=&quot;setting-up-the-cluster&quot; style=&quot;position:relative&quot;&gt;&lt;a href=&quot;#setting-up-the-cluster&quot; aria-label=&quot;setting up the cluster permalink&quot; class=&quot;heading-anchor before&quot;&gt;&lt;span&gt;#&lt;/span&gt;&lt;/a&gt;Setting up the cluster&lt;/h1&gt;&lt;p&gt;Go to &lt;a href=&quot;https://aka.ms/kustofree&quot; target=&quot;_blank&quot; rel=&quot;noreferrer&quot;&gt;https://aka.ms/kustofree&lt;/a&gt; and click “Create cluster and database”. &lt;/p&gt;&lt;p&gt;&lt;span class=&quot;gatsby-resp-image-wrapper&quot; style=&quot;position:relative;display:block;margin-left:auto;margin-right:auto;max-width:631px&quot;&gt;
      &lt;span class=&quot;gatsby-resp-image-background-image&quot; style=&quot;padding-bottom:70.99841521394612%;position:relative;bottom:0;left:0;background-image:url(&amp;#x27;data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAAOCAIAAACgpqunAAAACXBIWXMAAA7DAAAOwwHHb6hkAAABjklEQVQoz6WRPUsDQRCGr9Deyj9gaW0nlhZWdoL4D7SwUUQ0BGNhIlhY+BFIoY2NjY0RTJREUBQJISrRgB/J5bK7s3u35kw03teKdyhKzij4MizsLM/OOzOS8JMjhGk7XliOI36Q5EM6wv4CuNe/wR6lN+zQAfRF74e25FP5+TP/e2XLEZO7ytj2bTBe7F+/aZ++PC7Whfhmxwe2XH97hVp3+ErnqjB1VeOdwYuB2IMLt6xsuu+b57xjNpcvkSe9WsJqz/J1V6TgTbEV7P2dQ422ydzwRn718H4nowzGbka25Fa2nQ9Zti2ECB2ANJ6VRjMdM9nelcKt+uo19amfV+WeJ6WXhbS6dlaldavVtE3TLMsyAYIQopRWMFEQ5hQ1NFLXMNeYrFQAoKyUAQBjrOu6Z/YdNgwDVSoEE4wxAK1x+vzInjSqq8AZqXFW10BlFGHEGMMYVx+rPrY9b9EzbSJOggkI7EMgAXNJmIqTO9Vo3pYPvJnhc0lYTNNIioZTdOmIzSehyI3mziXxD70BcgUMFwIbptEAAAAASUVORK5CYII=&amp;#x27;);background-size:cover;display:block&quot;&gt;&lt;/span&gt;
  &lt;img class=&quot;gatsby-resp-image-image&quot; alt=&quot;20221108122702&quot; title=&quot;20221108122702&quot; src=&quot;/static/60a17c0304d668926b180393bc1e53aa/077d3/20221108122702.png&quot; srcSet=&quot;/static/60a17c0304d668926b180393bc1e53aa/077d3/20221108122702.png 631w&quot; sizes=&quot;(max-width: 631px) 100vw, 631px&quot; style=&quot;width:100%;height:100%;margin:0;vertical-align:middle;position:absolute;top:0;left:0&quot; loading=&quot;lazy&quot; decoding=&quot;async&quot;/&gt;
    &lt;/span&gt;  &lt;/p&gt;&lt;p&gt;Approve terms of service and create (Change cluster name and database name if you want). It may load for a minute or so.&lt;/p&gt;&lt;p&gt;Copy the Cluster URI and paste it into the solution boxes on the detective dashboard, which may look like this: &lt;/p&gt;&lt;p&gt;&lt;span class=&quot;gatsby-resp-image-wrapper&quot; style=&quot;position:relative;display:block;margin-left:auto;margin-right:auto;max-width:677px&quot;&gt;
      &lt;span class=&quot;gatsby-resp-image-background-image&quot; style=&quot;padding-bottom:95.42097488921712%;position:relative;bottom:0;left:0;background-image:url(&amp;#x27;data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAATCAIAAAAf7rriAAAACXBIWXMAAA7DAAAOwwHHb6hkAAAEAklEQVQ4y23N20/bZhgGcP8Jpa0KcezYjuPEzoEi2k2btItJLWhTNQ5jpRx6satChTif6Si0O3STul1s0galLWQdqJsY7Vgpx3BI7M/H2J8dxzlAoEz7Q6ZQdRfTpJ8ePRfPqxe50TvSNTLROXK7c/h2//gXr0v36ERb32jzjc6Wtq6Wtq7W9u7/uH6z53p7N/LruhjdSvFAArIGZE2UFMt29gtH+cKrXDpjqpoNrUI2f5DNFbL5f+072YPCEbKyubudkDQR6IqsSNJeAgBJUXWYNFNJIAkrq+LKqsgDOS6oPFBOyDzQ4oJpppDFmPz5EvzymXHnd+PBhuVkHCebzx0cnjw/MqFpbsWgZdtO1nYyTiaXzuScbO5k8woZvz/V8c3jjq8ftX31aOjb2Z8ezk7NPpmJLsxE52ei81PRhSff//jw8c/Tc/PTs7+89mBufnqumEhVTWNdY8tHDU11ja01V1su116rrm+qqi36sKH1Ul1zfU1j3ZWGS/XNH3zcUl3fXFV77XJtU3V98/tXPkGWlld2EkBOmkU61AxTM0wgq0DWNMNUoaVJCtyNK9ASRBnIqmaYig4Ny15ZjyEb23uKpms6NExL003TdlLpLJAVSU3q0NQNU4NWKrYDzdQeD+I8MAyY1CG07LWtbWQ1llCtrKCl1kQIdBvotqRbop6SjDSv2wk9LUJH3eEVSeN1G2jWlmolkinVzDxfjSEvt+JAT8fVVHRd21NTQtIWdZtP2oaVufdC+fT+b4qZAbyq7Ym8kZF0++p3yz88S8B0fnElhrzY2BWSdkKBm8CIy2ZCMQXZ4AUNiPryhhB9+hJIBh+XlbVYQk0JqnlvYefphqRCZ/HPTSQuSJbtZPMH+weH+f1C7ug4q0N9bQPuJfZlNSMq+q5gxEFm6Q8DWk5u/++/jguHh4Wj4524gHT0DPePTgyMTg7emhwcmxz87O7A0Hhv50Bv92Bfz1BP12B/z1B37/BYe9dY/0jf2J2+0cn+0YnBW3dvdg8hXMU74QvveblKtzeMEizq8aMki9EhNxVEKQ6lOMwbdHlDPpLlPP4ykkNJFiVZF8FiVBCh2WDorbeDFy5GKisCQYZkGIKkMMyNYRiO4ziGFeHFrERRDMc9RZgHc+OYu3jMVVb6yysiES4cDnBsgPMzLE1xPq+fpgK0N0B7WZoK+LzvUmSQJEjaRwc4mg3SAQ7BvWHcF8HpMMmESDqE4QyK+zAPgxEMijNunCl2D+Py+DmcjlAsRkcI5jzBVBDMeQQlQm4yiBJFbjJ01u0vKaVLyopOv8nTZfSpMrrURV/0lbv9FW5fxO0rR+kw4iK4N1iU4M646FPnqJLS/+Py+ijuLBU65y06Q7D/AA9sRLkZ2z0DAAAAAElFTkSuQmCC&amp;#x27;);background-size:cover;display:block&quot;&gt;&lt;/span&gt;
  &lt;img class=&quot;gatsby-resp-image-image&quot; alt=&quot;20221108123214&quot; title=&quot;20221108123214&quot; src=&quot;/static/c48bef7f268e3a7ae6c16a956f7ff203/3c503/20221108123214.png&quot; srcSet=&quot;/static/c48bef7f268e3a7ae6c16a956f7ff203/3c503/20221108123214.png 677w&quot; sizes=&quot;(max-width: 677px) 100vw, 677px&quot; style=&quot;width:100%;height:100%;margin:0;vertical-align:middle;position:absolute;top:0;left:0&quot; loading=&quot;lazy&quot; decoding=&quot;async&quot;/&gt;
    &lt;/span&gt;  &lt;/p&gt;&lt;p&gt;Now, copy the query in the code box on the detective dashboard:&lt;/p&gt;&lt;div class=&quot;gatsby-highlight&quot; data-language=&quot;sql&quot;&gt;&lt;pre class=&quot;language-sql&quot;&gt;&lt;code class=&quot;language-sql&quot;&gt;    &lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;token keyword&quot;&gt;execute&lt;/span&gt; &lt;span class=&quot;token keyword&quot;&gt;database&lt;/span&gt; script &lt;span class=&quot;token operator&quot;&gt;&amp;lt;&lt;/span&gt;&lt;span class=&quot;token operator&quot;&gt;|&lt;/span&gt;
    &lt;span class=&quot;token comment&quot;&gt;// Create table for the data&lt;/span&gt;
    &lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;token keyword&quot;&gt;create&lt;/span&gt;&lt;span class=&quot;token operator&quot;&gt;-&lt;/span&gt;&lt;span class=&quot;token keyword&quot;&gt;merge&lt;/span&gt; &lt;span class=&quot;token keyword&quot;&gt;table&lt;/span&gt; Onboarding&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;Score:long&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt;
    &lt;span class=&quot;token comment&quot;&gt;// Import data&lt;/span&gt;
    &lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;ingest &lt;span class=&quot;token keyword&quot;&gt;into&lt;/span&gt; &lt;span class=&quot;token keyword&quot;&gt;table&lt;/span&gt; Onboarding &lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;token string&quot;&gt;&amp;#x27;https://kustodetectiveagency.blob.core.windows.net/onboarding/onboarding.csv.gz&amp;#x27;&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt; &lt;span class=&quot;token keyword&quot;&gt;with&lt;/span&gt; &lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;ignoreFirstRecord&lt;span class=&quot;token operator&quot;&gt;=&lt;/span&gt;&lt;span class=&quot;token boolean&quot;&gt;true&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;p&gt;Go into where you can query data and paste the query: &lt;/p&gt;&lt;p&gt;&lt;span class=&quot;gatsby-resp-image-wrapper&quot; style=&quot;position:relative;display:block;margin-left:auto;margin-right:auto;max-width:1011px&quot;&gt;
      &lt;span class=&quot;gatsby-resp-image-background-image&quot; style=&quot;padding-bottom:34.718100890207715%;position:relative;bottom:0;left:0;background-image:url(&amp;#x27;data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAAHCAIAAACHqfpvAAAACXBIWXMAAA7DAAAOwwHHb6hkAAABEElEQVQY052QPU4DMRCF944ciSPQUlNR0KekoQEhpBQUUESJILuxY3t3PDOeH6MNnICnr3nSp1e8AQDcvf8rQwwhxtCYiZCJeu9mFsJpLoWYkYiJRISZx+MxhICIv6aKDJXagoxNV1iaOovmGYCaqpl5ZWFR5DbFc0jZzUQNWVl0SFUL2T635wNmsli1oCS0yrY51M17WEjPVWfSTJ7Q77fT9ggL27nKkKoksn1qLwdMqAHWrYjWer95+rq+e2zWI0i+LI6lXd2+PryNrD2ADKW2DAxsfzTHAvn7lMfIBRbSjFZQgTUttJCeFrlUA9ah1jrPpbu72UrvPk3w+UG7ncdYxQEbrO9IKVlEel/di24/TFeR70P5Om8AAAAASUVORK5CYII=&amp;#x27;);background-size:cover;display:block&quot;&gt;&lt;/span&gt;
  &lt;img class=&quot;gatsby-resp-image-image&quot; alt=&quot;20221108123439&quot; title=&quot;20221108123439&quot; src=&quot;/static/133d697928dbe1b589b45cd0e0dcd3d1/0d97d/20221108123439.png&quot; srcSet=&quot;/static/133d697928dbe1b589b45cd0e0dcd3d1/0d97d/20221108123439.png 1011w&quot; sizes=&quot;(max-width: 1011px) 100vw, 1011px&quot; style=&quot;width:100%;height:100%;margin:0;vertical-align:middle;position:absolute;top:0;left:0&quot; loading=&quot;lazy&quot; decoding=&quot;async&quot;/&gt;
    &lt;/span&gt;  &lt;/p&gt;&lt;p&gt;The best shortcut you’ll ever learn is “SHIFT+ENTER” to run a query. The query runs for a few seconds. What has happened you may think… This query has ingested data that we should continue using for this Rookie task, meaning this was a necessary step to get to work further. This step of ingestion will be repeated for every new task coming, and time for ingestion may take a lot longer than now, depending on how much data is being processed.&lt;/p&gt;&lt;p&gt;Let’s take a look at what data has been ingested by running this query:&lt;/p&gt;&lt;div class=&quot;gatsby-highlight&quot; data-language=&quot;sql&quot;&gt;&lt;pre class=&quot;language-sql&quot;&gt;&lt;code class=&quot;language-sql&quot;&gt;Onboarding&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;p&gt;As simple as that. This query asks the database for all it’s content outputting it below.&lt;/p&gt;&lt;p&gt;&lt;span class=&quot;gatsby-resp-image-wrapper&quot; style=&quot;position:relative;display:block;margin-left:auto;margin-right:auto;max-width:659px&quot;&gt;
      &lt;span class=&quot;gatsby-resp-image-background-image&quot; style=&quot;padding-bottom:129.74203338391504%;position:relative;bottom:0;left:0;background-image:url(&amp;#x27;data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAAaCAIAAAA44esqAAAACXBIWXMAAA7DAAAOwwHHb6hkAAACQklEQVQ4y9VT227TQBDdX+cdQcULf4AQUJ4Qz7QRQq1E1avdxHYSO/Ftd72213bjvQ5ycGkQoF7eGB0dzc7o6Myux+jV63eLg6/k29Gnt5+fvfmytz/Z+zh5uX+HvY+TFx8mz98f/gkE4qa7uOCHB7piAGCM1dZqC9rAyAYs/D2QBmiiFT277Oq26VSYcndJphHx48KPqbfC12Gel60xViqj9G9ABqBPU+ytIycI0iqMWUb5Kid1V4E11ihrNQBYa0aA/ZUPziLLSLyIrr4v8gUuUszoPMmXKS6KouZVVVfbGS2M498lg7OO10W6Yu5lmSV1w4uqiUlFS855SQtKKUmTBOM8SeIsS3GOKSGY4CxLB+fN0TGbnNBjpz+9MFoqrZSSSimlpZRCKSmVkHLEtjVASoGMFHo+t4yZglnGbqeyO+P9MxCIDRC8vcLulR4EBKIHnA8qo8Gax4tH58cp/2dxw6Gqbl/7kWKLM7jphl01+m6BHwaUz/xwGS9TcrPph+9lb2PXwv7ksTEeAVB3cl7O5tU65eFqs06gYECZpYUlO6AjD61txWwZmbPz8vS8cBx65ZBLhznXpTvjXtD689KdVlOP+0Hjzxs/aLyAewGfBY03HJk7Rf3My4N5FsdFHOMwwsuQreMW047QFpNuTAZucjJWMOnIUEGd63LXbaOo53WvdS9lr+RGinsgBkZytTY1F4TYLNtuuIHxTe4Hkkmqpeqb1hKy8289KJBMEt2LnjdPFBsh+uZJYpWkRgjxJOcfaNrUP4c/7JAAAAAASUVORK5CYII=&amp;#x27;);background-size:cover;display:block&quot;&gt;&lt;/span&gt;
  &lt;img class=&quot;gatsby-resp-image-image&quot; alt=&quot;20221108124112&quot; title=&quot;20221108124112&quot; src=&quot;/static/3d640b1a676c73570e7df92f778d0965/4978c/20221108124112.png&quot; srcSet=&quot;/static/3d640b1a676c73570e7df92f778d0965/4978c/20221108124112.png 659w&quot; sizes=&quot;(max-width: 659px) 100vw, 659px&quot; style=&quot;width:100%;height:100%;margin:0;vertical-align:middle;position:absolute;top:0;left:0&quot; loading=&quot;lazy&quot; decoding=&quot;async&quot;/&gt;
    &lt;/span&gt;  &lt;/p&gt;&lt;p&gt;Now, the task is to “Enter the sum of the “Score” column”. There is a hint right there: “sum”. They want us to sum up the Score column.&lt;/p&gt;&lt;p&gt;KQL has this function native: sum(). This is an aggregation function that works like you’d expect. You can do math within the brackets or simply by adding the Score column, it will add every number from that column. Read more about it &lt;a href=&quot;https://learn.microsoft.com/en-us/azure/data-explorer/kusto/query/sum-aggfunction&quot; target=&quot;_blank&quot; rel=&quot;noreferrer&quot;&gt;here&lt;/a&gt;&lt;/p&gt;&lt;div class=&quot;gatsby-highlight&quot; data-language=&quot;sql&quot;&gt;&lt;pre class=&quot;language-sql&quot;&gt;&lt;code class=&quot;language-sql&quot;&gt;Onboarding
&lt;span class=&quot;token operator&quot;&gt;|&lt;/span&gt; summarize &lt;span class=&quot;token function&quot;&gt;sum&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;Score&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;p&gt;Now, paste the score into the last field on the detective dashboard. The following form leaves a note that “There are no gifts left to claim”, but your second task is open! I guess that makes for the first (few) blood badges that were available to some. &lt;/p&gt;&lt;p&gt;A little curious on this I started to wonder if I had misunderstood something on the topics of &lt;code class=&quot;language-text&quot;&gt;sum()&lt;/code&gt; because I though “how can all these huge positive numbers equal such a low positive number?“. By ordering the numbers ascending and descending I could not find the negative number I wanted to see to make it more logical. But I did find it by this query:&lt;/p&gt;&lt;div class=&quot;gatsby-highlight&quot; data-language=&quot;text&quot;&gt;&lt;pre class=&quot;language-text&quot;&gt;&lt;code class=&quot;language-text&quot;&gt;Onboarding
| where Score &amp;lt; 0&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;p&gt;As intuitive as KQL is, this is basically telling the database to output any value from the Onboarding table where Score has a value less than 0. And there it is. Run it to see for yourself. &lt;/p&gt;&lt;h2 id=&quot;troubleshooting-ingestion&quot; style=&quot;position:relative&quot;&gt;&lt;a href=&quot;#troubleshooting-ingestion&quot; aria-label=&quot;troubleshooting ingestion permalink&quot; class=&quot;heading-anchor before&quot;&gt;&lt;span&gt;#&lt;/span&gt;&lt;/a&gt;Troubleshooting Ingestion&lt;/h2&gt;&lt;p&gt;I did stumble upon some trouble when ingesting data with the query provided on the detective dashboard. The way I solved it was by copying the link provided inside the ingestion query and went for a manual ingestion. &lt;/p&gt;&lt;p&gt;&lt;span class=&quot;gatsby-resp-image-wrapper&quot; style=&quot;position:relative;display:block;margin-left:auto;margin-right:auto;max-width:373px&quot;&gt;
      &lt;span class=&quot;gatsby-resp-image-background-image&quot; style=&quot;padding-bottom:81.23324396782843%;position:relative;bottom:0;left:0;background-image:url(&amp;#x27;data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAAQCAIAAACZeshMAAAACXBIWXMAAA7DAAAOwwHHb6hkAAACQ0lEQVQoz22T627cNhCF9f4PVKNx4QIJWrfINhf/cBvUu9ZmtZKWulG8zAxFcqaQ6qYuugcEAYL4znAOyQIRUowWQgiEAIGICGNcUoo5R4NxSSzMOTMzp8wxxpQSRgEKRQiUWep50ZPuVNep7qJUSlk2HTo0GIVzWJaUsiPWepx1b6I0XV8gAhEFRCJalmUr/KJAJMLMOcWYc16WKJLByzSIMxJAikA4TKYa4KLatlXLKwH42S+DXYRzztnh6tUPdKz8/qyb0RTeO2vdME5a63EYzGzW9TYAIMaEIa6V+W9YrJ/avqq6sh5OhbOGU5rG4evxuSyfz6eqOlWHw2EYJxbJa1hrSBuMIqL1WFZleS7P7anY1f7nTn5q0tvz8sOTvnlsbx7bXyv3uYsPQ/qkwq4NlU3C2SKysEPzXO+fmn2nVfHpQvdK7tt0f8nvvvrbP9Tt7/Wxm6qub0aNmUkk8Zr8NgkSHY9HY52xZr0q+Z/CNPm6xksrzop3nFPexMwBiHxES2CgIHoF8+rO09jffFfe3Z3vfnx6czu/+d4fSwPezto5q6rmz18eDw+H/W+HazCA2e0u799PHz+q3c5/+ICdAgRwFsHraWi+PFz2X9Rz/V9YXnoD74e2HZTq28bOWv5tWVJcqG+oq6NR1+D1MS3riyMCxBjj692UEvOL0TWY2VqrlJrneZqmftM3YIstbwfh6zAAaK2dc9ZaY4y11gN4WL8ezjZhSBgyhSvwP/YvyswpJSDUznNOruqwGrEd3Wn4C++bktVIOpIjAAAAAElFTkSuQmCC&amp;#x27;);background-size:cover;display:block&quot;&gt;&lt;/span&gt;
  &lt;img class=&quot;gatsby-resp-image-image&quot; alt=&quot;20221108125714&quot; title=&quot;20221108125714&quot; src=&quot;/static/04e211e75db0f243e90834b67130da50/dcf6b/20221108125714.png&quot; srcSet=&quot;/static/04e211e75db0f243e90834b67130da50/dcf6b/20221108125714.png 373w&quot; sizes=&quot;(max-width: 373px) 100vw, 373px&quot; style=&quot;width:100%;height:100%;margin:0;vertical-align:middle;position:absolute;top:0;left:0&quot; loading=&quot;lazy&quot; decoding=&quot;async&quot;/&gt;
    &lt;/span&gt;  &lt;/p&gt;&lt;p&gt;Choose your existing Cluster and Database and set a new Table name. Click next and select “Blob” and then paste the link into “Link to source”. For later tasks, you may have multiple links - for this click the “Add source” to get a new field to paste in your links. &lt;/p&gt;&lt;p&gt;Click “Next: Schema”.&lt;/p&gt;&lt;p&gt;This will bring you to the Schema layout. As this (the link file) is a CSV (comma separated value) file, you want to check the “Ignore the first record” which ignores the first line as this is a line containing the header of each column.&lt;/p&gt;&lt;p&gt;Click “Next: Start Ingestion”&lt;/p&gt;&lt;h3 id=&quot;a-possible-reason&quot; style=&quot;position:relative&quot;&gt;&lt;a href=&quot;#a-possible-reason&quot; aria-label=&quot;a possible reason permalink&quot; class=&quot;heading-anchor before&quot;&gt;&lt;span&gt;#&lt;/span&gt;&lt;/a&gt;A possible reason&lt;/h3&gt;&lt;p&gt; As I have noticed writing this series, when stumbling upon these issues again a lot of times, it seems as I have misunderstood the completion of data ingestion and query completion. Once an ingestion query is completed, the data is not available, yet sometimes the query runs for as long as ingestion is taking place. If you meet the issue above, try waiting a bit longer - there is no timer for the ingestion itself, the query is set to complete once it has told the backend what to do (also, the kusto detective dashboard ingestion message states how long you may have to wait for it to complete). Test this by waiting a bit longer and run this query a few times while it is loading to see if the numbers rise.&lt;/p&gt;&lt;div class=&quot;gatsby-highlight&quot; data-language=&quot;text&quot;&gt;&lt;pre class=&quot;language-text&quot;&gt;&lt;code class=&quot;language-text&quot;&gt;T | count // T is replaced with tableName&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;h1 id=&quot;next-level&quot; style=&quot;position:relative&quot;&gt;&lt;a href=&quot;#next-level&quot; aria-label=&quot;next level permalink&quot; class=&quot;heading-anchor before&quot;&gt;&lt;span&gt;#&lt;/span&gt;&lt;/a&gt;Next level&lt;/h1&gt;&lt;p&gt;Congratulations on finishing the first task. Check your inbox, you’ve got mail:&lt;/p&gt;&lt;p&gt;&lt;span class=&quot;gatsby-resp-image-wrapper&quot; style=&quot;position:relative;display:block;margin-left:auto;margin-right:auto;max-width:242px&quot;&gt;
      &lt;span class=&quot;gatsby-resp-image-background-image&quot; style=&quot;padding-bottom:33.88429752066116%;position:relative;bottom:0;left:0;background-image:url(&amp;#x27;data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAAHCAIAAACHqfpvAAAACXBIWXMAAA7DAAAOwwHHb6hkAAABeUlEQVQY0yXO2W6iUACAYR6mi2CVFlRWKWeD4bAIpVVQ0RYQxQWiE5Nm5qpv3nQm+W7/5GfU6VyxowH2ReSLyBOAK0DvCXiyHWk0/k/9R6OxZIci8ockGKBgZIcMb9gi9qNsS5N3muThahss8/C9GmDvZmjcSeBmZN7JgNPwrWQaQfKW1zTJX4u94bwwT4AOsD8rTpNlGWbbtGrn1THZnmCUPJrOkASyHQrQ7WqYVbFkRXS2tuIMxQuZTBhOw/yzvThe0rJZ1L/L5nOa71ena9lek6rdXf9e/nyl1ZE3CKfhjgIF6I79VxF6tyOT6epWTydhUYUf9XxziJZFtrsWh3NWt1F2mKyKJN/5af6gE1ZBDxrRaAwmieq8sDJkuhrmTWfdnLO6mX6cVpvLsqz9Yrc5f2b7Ni33s6JxZ+uOAjkVcSoSAJXt8NF0WOUnJpxKBEh7Y6tvWCJ0+2OrqxMBuPzzr/7456unE07FrIJYBXVkcC+BjgxZBX0D2px7Eg2Kbp8AAAAASUVORK5CYII=&amp;#x27;);background-size:cover;display:block&quot;&gt;&lt;/span&gt;
  &lt;img class=&quot;gatsby-resp-image-image&quot; alt=&quot;20221108130510&quot; title=&quot;20221108130510&quot; src=&quot;/static/70545015d542fc146bc9e7cbb7d42849/9ccb4/20221108130510.png&quot; srcSet=&quot;/static/70545015d542fc146bc9e7cbb7d42849/9ccb4/20221108130510.png 242w&quot; sizes=&quot;(max-width: 242px) 100vw, 242px&quot; style=&quot;width:100%;height:100%;margin:0;vertical-align:middle;position:absolute;top:0;left:0&quot; loading=&quot;lazy&quot; decoding=&quot;async&quot;/&gt;
    &lt;/span&gt;  &lt;/p&gt;</content:encoded><tags>KQL,Azure Data Explorer,Data Science</tags><featuredImage>https://blog.amestofortytwo.com/static/c4e5912d930f08bf09aad98d01433ac9/badge.png</featuredImage></item><item><title><![CDATA[Kusto Detective - Detective 1 - Election fraud?]]></title><description><![CDATA[Walkthrough of Kusto Detective Agency series]]></description><link>https://blog.amestofortytwo.com/kusto-detective-agency3</link><guid isPermaLink="false">https://blog.amestofortytwo.com/kusto-detective-agency3</guid><category><![CDATA[KQL]]></category><category><![CDATA[Azure Data Explorer]]></category><category><![CDATA[Data Science]]></category><pubDate>Sun, 11 Dec 2022 00:00:00 GMT</pubDate><content:encoded>&lt;h1 id=&quot;kusto-detective---detective-1---election-fraud&quot; style=&quot;position:relative&quot;&gt;&lt;a href=&quot;#kusto-detective---detective-1---election-fraud&quot; aria-label=&quot;kusto detective   detective 1   election fraud permalink&quot; class=&quot;heading-anchor before&quot;&gt;&lt;span&gt;#&lt;/span&gt;&lt;/a&gt;Kusto Detective - Detective 1 - Election fraud?&lt;/h1&gt;&lt;h2 id=&quot;introduction&quot; style=&quot;position:relative&quot;&gt;&lt;a href=&quot;#introduction&quot; aria-label=&quot;introduction permalink&quot; class=&quot;heading-anchor before&quot;&gt;&lt;span&gt;#&lt;/span&gt;&lt;/a&gt;Introduction&lt;/h2&gt;&lt;p&gt;This query moves a bit forward, and I’ve seen a few different ways of solving this via the community. But as far as I can tell, this is the most effective (least amount of code) way of solving it. Follow along for some of my thoughts along the way of solving. And of course, if you have any suggestions on a better code for performance - let us know!&lt;/p&gt;&lt;p&gt;I’ve added every hint at the bottom if you want to read through them and some of my thoughts on how these can be applied to the challenge. But, considering these only as optional for this task.&lt;/p&gt;&lt;h1 id=&quot;the-story&quot; style=&quot;position:relative&quot;&gt;&lt;a href=&quot;#the-story&quot; aria-label=&quot;the story permalink&quot; class=&quot;heading-anchor before&quot;&gt;&lt;span&gt;#&lt;/span&gt;&lt;/a&gt;The story&lt;/h1&gt;&lt;p&gt;&lt;span class=&quot;gatsby-resp-image-wrapper&quot; style=&quot;position:relative;display:block;margin-left:auto;margin-right:auto;max-width:1747px&quot;&gt;
      &lt;span class=&quot;gatsby-resp-image-background-image&quot; style=&quot;padding-bottom:44.81969089868346%;position:relative;bottom:0;left:0;background-image:url(&amp;#x27;data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAAJCAIAAAC9o5sfAAAACXBIWXMAAA7DAAAOwwHHb6hkAAABo0lEQVQoz03L627aMBjG8VzDVGhSYjuJyQnniBMgJydAEpsyAnRMnaZN/TBtVzDt+idKp/XVT4/+X16p3n8q+2PWDUU3LJrdvOppxWnFEyZu8V7CRFIJWvZx3pb9USr5seiGZbuv+LHip7TepbVIGKdVn9Q8rUXKeMJ40gjK+ijbzlmfbh6XYijFSXr6/uNw+daIc81P/PgsTl+6w2fWD6v1jpadv2zC1fomWDYzWkasEz9/nf/8bp6epbjYxtnGS6oF41U3lO2BvW7VHvLNPls/0qKd59t53obLxg4zP1sX50vz8lJ+PEuGS298WtCsCZJsFi7cIL1xfGrYwRvnLbATErqKV0zS7UizriwSefHcDzzPsYhtEceemVOsI/j/wD8QqBOXBBIwPNUgqk5MEpE4dGYunmJNRxqCCF5BcH0A7xZCqKoPtutJCrBlYMnAgphoJkHYhYajAKwiExkO0GyALKhZGnahbuvTmYrMCZzKEx3bvjRS8J1sjBQ8kvHdvTGSX0M2xsp0LGPkRvnXC3KjsYzvJ5Y8scYP5kjBH8YaMshfJ+hnhnufDusAAAAASUVORK5CYII=&amp;#x27;);background-size:cover;display:block&quot;&gt;&lt;/span&gt;
  &lt;img class=&quot;gatsby-resp-image-image&quot; alt=&quot;20221120233149&quot; title=&quot;20221120233149&quot; src=&quot;/static/f9d8de2e92917702041ce23865d7e029/0ed7d/20221120233149.png&quot; srcSet=&quot;/static/f9d8de2e92917702041ce23865d7e029/0ed7d/20221120233149.png 1747w&quot; sizes=&quot;(max-width: 1747px) 100vw, 1747px&quot; style=&quot;width:100%;height:100%;margin:0;vertical-align:middle;position:absolute;top:0;left:0&quot; loading=&quot;lazy&quot; decoding=&quot;async&quot;/&gt;
    &lt;/span&gt;  &lt;/p&gt;&lt;h2 id=&quot;digging-through&quot; style=&quot;position:relative&quot;&gt;&lt;a href=&quot;#digging-through&quot; aria-label=&quot;digging through permalink&quot; class=&quot;heading-anchor before&quot;&gt;&lt;span&gt;#&lt;/span&gt;&lt;/a&gt;Digging through&lt;/h2&gt;&lt;p&gt;There may have been an election fraud. We need to decide on how, what and if this actually has taken place. We are given a query that handles the total score of each contestant, which looks like this:&lt;/p&gt;&lt;div class=&quot;gatsby-highlight&quot; data-language=&quot;sql&quot;&gt;&lt;pre class=&quot;language-sql&quot;&gt;&lt;code class=&quot;language-sql&quot;&gt;&lt;span class=&quot;token comment&quot;&gt;// Query that counts the votes:&lt;/span&gt;
Votes
&lt;span class=&quot;token operator&quot;&gt;|&lt;/span&gt; summarize Count&lt;span class=&quot;token operator&quot;&gt;=&lt;/span&gt;&lt;span class=&quot;token function&quot;&gt;count&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt; &lt;span class=&quot;token keyword&quot;&gt;by&lt;/span&gt; vote
&lt;span class=&quot;token operator&quot;&gt;|&lt;/span&gt; &lt;span class=&quot;token keyword&quot;&gt;as&lt;/span&gt; hint&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;materialized&lt;span class=&quot;token operator&quot;&gt;=&lt;/span&gt;&lt;span class=&quot;token boolean&quot;&gt;true&lt;/span&gt; T
&lt;span class=&quot;token operator&quot;&gt;|&lt;/span&gt; extend Total &lt;span class=&quot;token operator&quot;&gt;=&lt;/span&gt; toscalar&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;T &lt;span class=&quot;token operator&quot;&gt;|&lt;/span&gt; summarize &lt;span class=&quot;token function&quot;&gt;sum&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;Count&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt;
&lt;span class=&quot;token operator&quot;&gt;|&lt;/span&gt; project vote&lt;span class=&quot;token punctuation&quot;&gt;,&lt;/span&gt; Percentage &lt;span class=&quot;token operator&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;token function&quot;&gt;round&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;Count&lt;span class=&quot;token operator&quot;&gt;*&lt;/span&gt;&lt;span class=&quot;token number&quot;&gt;100.0&lt;/span&gt; &lt;span class=&quot;token operator&quot;&gt;/&lt;/span&gt; Total&lt;span class=&quot;token punctuation&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;token number&quot;&gt;1&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;,&lt;/span&gt; Count
&lt;span class=&quot;token operator&quot;&gt;|&lt;/span&gt; &lt;span class=&quot;token keyword&quot;&gt;order&lt;/span&gt; &lt;span class=&quot;token keyword&quot;&gt;by&lt;/span&gt; Count&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;p&gt;This is a valid way of counting votes if nothing suspicious was present, but where should we start? Remember from the last challenge that we want to start out by looking at the data. Do this to see if anything stands out. I will definetly start by looking at Poppy, he is the one suspected of election fraud afterall.&lt;/p&gt;&lt;div class=&quot;gatsby-highlight&quot; data-language=&quot;sql&quot;&gt;&lt;pre class=&quot;language-sql&quot;&gt;&lt;code class=&quot;language-sql&quot;&gt;Votes
&lt;span class=&quot;token operator&quot;&gt;|&lt;/span&gt; &lt;span class=&quot;token keyword&quot;&gt;where&lt;/span&gt; vote &lt;span class=&quot;token operator&quot;&gt;=&lt;/span&gt;&lt;span class=&quot;token operator&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;token string&quot;&gt;&amp;quot;Poppy&amp;quot;&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;p&gt;Another more specific place to look for data or anomalies will be on the &lt;code class=&quot;language-text&quot;&gt;voter_hash_id&lt;/code&gt; as this is unique for every voter. Lets count the uniqueness of each &lt;code class=&quot;language-text&quot;&gt;vote&lt;/code&gt; on hash IDs and proxy (&lt;code class=&quot;language-text&quot;&gt;via_ip&lt;/code&gt;) and see if there are any duplicates - someone able to vote more than one time:&lt;/p&gt;&lt;div class=&quot;gatsby-highlight&quot; data-language=&quot;sql&quot;&gt;&lt;pre class=&quot;language-sql&quot;&gt;&lt;code class=&quot;language-sql&quot;&gt;Votes
&lt;span class=&quot;token operator&quot;&gt;|&lt;/span&gt; summarize num &lt;span class=&quot;token operator&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;token function&quot;&gt;count&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt; &lt;span class=&quot;token keyword&quot;&gt;by&lt;/span&gt; voter_hash_id&lt;span class=&quot;token punctuation&quot;&gt;,&lt;/span&gt; via_ip
&lt;span class=&quot;token operator&quot;&gt;|&lt;/span&gt; &lt;span class=&quot;token keyword&quot;&gt;where&lt;/span&gt; num &lt;span class=&quot;token operator&quot;&gt;&amp;gt;&lt;/span&gt; &lt;span class=&quot;token number&quot;&gt;1&lt;/span&gt;
&lt;span class=&quot;token operator&quot;&gt;|&lt;/span&gt; &lt;span class=&quot;token keyword&quot;&gt;order&lt;/span&gt;  &lt;span class=&quot;token keyword&quot;&gt;by&lt;/span&gt; num &lt;span class=&quot;token keyword&quot;&gt;desc&lt;/span&gt; &lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;p&gt;No results for this, now try to remove the &lt;code class=&quot;language-text&quot;&gt;via_ip&lt;/code&gt; and look once more. There we have 9 entries where the same hash ID has been used to cast a vote.&lt;/p&gt;&lt;p&gt;&lt;span class=&quot;gatsby-resp-image-wrapper&quot; style=&quot;position:relative;display:block;margin-left:auto;margin-right:auto;max-width:249px&quot;&gt;
      &lt;span class=&quot;gatsby-resp-image-background-image&quot; style=&quot;padding-bottom:116.06425702811245%;position:relative;bottom:0;left:0;background-image:url(&amp;#x27;data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAAXCAIAAACEf/j0AAAACXBIWXMAAA7DAAAOwwHHb6hkAAACw0lEQVQ4y3WTCZOiOhCA/f+/zJmat88ddFTU5ZBLBElC7nSHLcDZ2tK16ysInTSdvhas5zNcSCHltBBciJ6PSkIpZT1l/bQvuZCEMsrYrFxoY7TRrO+Pp9N+vy/K8ng6hYdDkqZFWWZ5Thkz1jRtezge86K41PWlrpXWQsrF5KGnjBFKb11HKO0Imbl1Hev7mY6Qa9PMmp7zyTlb9H2vlBJCXC6XLMuiKKqqKkmSpmmcc1pr8y12EmNM27bjt9YLa533Xin19bVN4iRJkjzPkyTJsmwYBu/98C3z0nvftu2sWWhjrQNjnTaW9VwqLaWilAGge4FSGgBHYy6VBey5WC7fPv77Eaw34fH4/+on67kfBgcI6P/GARZlhdMtFg7AOQBEa8e3VMo6Zx2M+hdoYwEnz0opRJRSBkHw8fGx2Wze39+DIACA4V/iva+q8h6zc4CI1oFSWghprZsSabz3APgvxpM4e+ZCGuuk0uHheDie9mH4K4q+trskSecIn7k2LUxBL4x1gF5IlZ6zoqyKssqLMknP84lnS+ugI/RubK0FAO89pZQQwhjrJjHGzBE+i5Ryrv/CGIOISqkwDHe73efnZxiG+/2eEDIMAyI+WCLi9Xq9J8zYsTDWOSHVNDdCKj0p3atSKa3hT8IceELpbh9ut7vl8m359r76+UlZ/6pJzln+3SRuapK/qjrdbnzOW88g4r09tR6bRGu93W7X63UQBLvdbrVapWn6MBh/fn2pqnvM1jn0Xml9bZqmaQkht1t3qa+EUvQeEB9wAFwInEslpDIWlLZRnOZFlZ6zc5YXZUUoQz9Yhw78A21Hplt/j6RU+pzleVFGcfwriouy6rmYW+IBY11769wcszEWAI2xlNLbrWualnNRX2ohhPcDon8COef3bBszzoDWerPZxHGc53l2Pm826ziOXk1VXddzwn4D4J0mvtm0CmYAAAAASUVORK5CYII=&amp;#x27;);background-size:cover;display:block&quot;&gt;&lt;/span&gt;
  &lt;img class=&quot;gatsby-resp-image-image&quot; alt=&quot;20221121093552&quot; title=&quot;20221121093552&quot; src=&quot;/static/1953513729fb98e3f698b6126cd82ed5/14a1f/20221121093552.png&quot; srcSet=&quot;/static/1953513729fb98e3f698b6126cd82ed5/14a1f/20221121093552.png 249w&quot; sizes=&quot;(max-width: 249px) 100vw, 249px&quot; style=&quot;width:100%;height:100%;margin:0;vertical-align:middle;position:absolute;top:0;left:0&quot; loading=&quot;lazy&quot; decoding=&quot;async&quot;/&gt;
    &lt;/span&gt;  &lt;/p&gt;&lt;p&gt;Lets look at one of the hashes:&lt;/p&gt;&lt;div class=&quot;gatsby-highlight&quot; data-language=&quot;sql&quot;&gt;&lt;pre class=&quot;language-sql&quot;&gt;&lt;code class=&quot;language-sql&quot;&gt;Votes
&lt;span class=&quot;token operator&quot;&gt;|&lt;/span&gt; &lt;span class=&quot;token keyword&quot;&gt;where&lt;/span&gt; voter_hash_id &lt;span class=&quot;token operator&quot;&gt;=&lt;/span&gt;&lt;span class=&quot;token operator&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;token string&quot;&gt;&amp;quot;bad705c7ee&amp;quot;&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;p&gt;&lt;span class=&quot;gatsby-resp-image-wrapper&quot; style=&quot;position:relative;display:block;margin-left:auto;margin-right:auto;max-width:708px&quot;&gt;
      &lt;span class=&quot;gatsby-resp-image-background-image&quot; style=&quot;padding-bottom:16.242937853107346%;position:relative;bottom:0;left:0;background-image:url(&amp;#x27;data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAADCAIAAAAcOLh5AAAACXBIWXMAAA7DAAAOwwHHb6hkAAAAhUlEQVQI1y3IWw6EIAwAQO9/TqOIlL4AtzWUTTabzNdsLC3dcN2ltTbG6D+qyiKIqKpI9P/eRZWJAAARRXX7PE+tcOWrFMg5I9L7vu7OLERkZsdxlFLMzN3NHAD2fScid9/MvSIjEkA9z8SiEStitdaJZc7I+SbiOWPOiFjMktLVx7PW+gLOJKqqVBW5BgAAAABJRU5ErkJggg==&amp;#x27;);background-size:cover;display:block&quot;&gt;&lt;/span&gt;
  &lt;img class=&quot;gatsby-resp-image-image&quot; alt=&quot;20221121093646&quot; title=&quot;20221121093646&quot; src=&quot;/static/4d971b94fb7ea1e6c45a67358b0817f8/d65de/20221121093646.png&quot; srcSet=&quot;/static/4d971b94fb7ea1e6c45a67358b0817f8/d65de/20221121093646.png 708w&quot; sizes=&quot;(max-width: 708px) 100vw, 708px&quot; style=&quot;width:100%;height:100%;margin:0;vertical-align:middle;position:absolute;top:0;left:0&quot; loading=&quot;lazy&quot; decoding=&quot;async&quot;/&gt;
    &lt;/span&gt;  &lt;/p&gt;&lt;p&gt;Not alerting at all. Is this a “bug” or by design? Not sure. It will definetly not tip one candidate above or below any other as we are dealing with votes ranging among up to a few millions. &lt;/p&gt;&lt;p&gt;Lets go back to looking at only Poppy. Is there anything abnormally with the timeline?&lt;/p&gt;&lt;div class=&quot;gatsby-highlight&quot; data-language=&quot;sql&quot;&gt;&lt;pre class=&quot;language-sql&quot;&gt;&lt;code class=&quot;language-sql&quot;&gt;Votes
&lt;span class=&quot;token operator&quot;&gt;|&lt;/span&gt; &lt;span class=&quot;token keyword&quot;&gt;where&lt;/span&gt; vote &lt;span class=&quot;token operator&quot;&gt;=&lt;/span&gt;&lt;span class=&quot;token operator&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;token string&quot;&gt;&amp;quot;Poppy&amp;quot;&lt;/span&gt;
&lt;span class=&quot;token operator&quot;&gt;|&lt;/span&gt; &lt;span class=&quot;token keyword&quot;&gt;order&lt;/span&gt; &lt;span class=&quot;token keyword&quot;&gt;by&lt;/span&gt; &lt;span class=&quot;token keyword&quot;&gt;Timestamp&lt;/span&gt; &lt;span class=&quot;token keyword&quot;&gt;asc&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;p&gt;This is the place that got me interested when working through this. Is there anything here that seems kinda off to you? To me it was that almost every vote in the beginning starts with the firstmost IP address in a /24 range. Lets look at this and note down the times.&lt;/p&gt;&lt;p&gt;&lt;span class=&quot;gatsby-resp-image-wrapper&quot; style=&quot;position:relative;display:block;margin-left:auto;margin-right:auto;max-width:688px&quot;&gt;
      &lt;span class=&quot;gatsby-resp-image-background-image&quot; style=&quot;padding-bottom:19.912790697674417%;position:relative;bottom:0;left:0;background-image:url(&amp;#x27;data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAAECAIAAAABPYjBAAAACXBIWXMAAA7DAAAOwwHHb6hkAAAAzUlEQVQI1yXIu26DMBQAUP7/d1qpLEmkjK2ULSIQiCi+LmBD7Ou3g7E65Iyn0ELI65VdLqqqfNu6pnFCKGMUIl8W5Fw2japrP8/We600omKMjeO4rmthCRFfJT+f2ek0Ho9LWYauCzl754Bxd7vJw2H6+AzfPyGlEKPzHoAOhBhrC0T11/fQPci9fVQ3cm+10sZ5bewAFCUyAn3dKCGN88a69/fDIFEVIb6eiBNf6DT/AkyMpz3vOW9pB6DxtQmlYBy3lPb8/gSUAtAQ4z9HOtsVdctOEQAAAABJRU5ErkJggg==&amp;#x27;);background-size:cover;display:block&quot;&gt;&lt;/span&gt;
  &lt;img class=&quot;gatsby-resp-image-image&quot; alt=&quot;20221121103216&quot; title=&quot;20221121103216&quot; src=&quot;/static/c217fb327ebb3be8fbdd1af2be010820/39eee/20221121103216.png&quot; srcSet=&quot;/static/c217fb327ebb3be8fbdd1af2be010820/39eee/20221121103216.png 688w&quot; sizes=&quot;(max-width: 688px) 100vw, 688px&quot; style=&quot;width:100%;height:100%;margin:0;vertical-align:middle;position:absolute;top:0;left:0&quot; loading=&quot;lazy&quot; decoding=&quot;async&quot;/&gt;
    &lt;/span&gt;  &lt;/p&gt;&lt;p&gt;Some random entries inbetween:
&lt;span class=&quot;gatsby-resp-image-wrapper&quot; style=&quot;position:relative;display:block;margin-left:auto;margin-right:auto;max-width:722px&quot;&gt;
      &lt;span class=&quot;gatsby-resp-image-background-image&quot; style=&quot;padding-bottom:18.005540166204987%;position:relative;bottom:0;left:0;background-image:url(&amp;#x27;data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAAECAIAAAABPYjBAAAACXBIWXMAAA7DAAAOwwHHb6hkAAAAyElEQVQI1yXLN1LEMBQAUN//NNCZCnrotoGBHQVLVrK1DopW+AzD69+gtVZaM8YpnTifS6mtdQDQ2uz7kWsl2mwhdoBaW+8QY0IYS6la64O1j9VapbQQUhvzn3sHY5bDh+t2k+O4vb41hCtA7+B9oJQas/xlxueJc0zIHSHK2OHc6YMLkTGmVru/f6CnZzG+uM+vI2Xng9227587JnQ/3SClElJOEyOEToyHmFK+rlLnWSzr6kvBSq3eXx1iyvkq+3EihIWQMeVfIyrd6T9A6dUAAAAASUVORK5CYII=&amp;#x27;);background-size:cover;display:block&quot;&gt;&lt;/span&gt;
  &lt;img class=&quot;gatsby-resp-image-image&quot; alt=&quot;20221124201001&quot; title=&quot;20221124201001&quot; src=&quot;/static/826be37bdbada8e5a32ad7eb242d033f/ad973/20221124201001.png&quot; srcSet=&quot;/static/826be37bdbada8e5a32ad7eb242d033f/ad973/20221124201001.png 722w&quot; sizes=&quot;(max-width: 722px) 100vw, 722px&quot; style=&quot;width:100%;height:100%;margin:0;vertical-align:middle;position:absolute;top:0;left:0&quot; loading=&quot;lazy&quot; decoding=&quot;async&quot;/&gt;
    &lt;/span&gt;&lt;br/&gt;
The first entry which has a new IP address that seem to be “spamming” appears after 5 seconds. Is this a pattern?&lt;/p&gt;&lt;p&gt;&lt;span class=&quot;gatsby-resp-image-wrapper&quot; style=&quot;position:relative;display:block;margin-left:auto;margin-right:auto;max-width:691px&quot;&gt;
      &lt;span class=&quot;gatsby-resp-image-background-image&quot; style=&quot;padding-bottom:19.68162083936324%;position:relative;bottom:0;left:0;background-image:url(&amp;#x27;data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAAECAIAAAABPYjBAAAACXBIWXMAAA7DAAAOwwHHb6hkAAAA1ElEQVQI1x3Oy1KDMBQAUP7/c7r2UdyptdBWFzoWSoCEcNNGCoW87o2OM+cDTqLHSekf0JpLqYYhECGiD6EHsM6Ny9IpZUOgGPFfrxTnfF4WIkp0tlNZDlnONxv1/BLOF4wx+CBBGa2n9w/xtrXHgliNFfPFSdR1w4W1jigm+u7+nKawTsXDY79a+YqFGL11cNGmk2P6JNepy/KwP4T9wb1ugbEOwBiDSAlwIcqSFyX7/JIV884jUfC+bVtj7ADQfB/d9YrzDacJjWlaXpan2zz/tX8BY5zcRaxhmMgAAAAASUVORK5CYII=&amp;#x27;);background-size:cover;display:block&quot;&gt;&lt;/span&gt;
  &lt;img class=&quot;gatsby-resp-image-image&quot; alt=&quot;20221121103613&quot; title=&quot;20221121103613&quot; src=&quot;/static/a38d2e3b1efe001e51c21f5ceb7cc0f2/2928f/20221121103613.png&quot; srcSet=&quot;/static/a38d2e3b1efe001e51c21f5ceb7cc0f2/2928f/20221121103613.png 691w&quot; sizes=&quot;(max-width: 691px) 100vw, 691px&quot; style=&quot;width:100%;height:100%;margin:0;vertical-align:middle;position:absolute;top:0;left:0&quot; loading=&quot;lazy&quot; decoding=&quot;async&quot;/&gt;
    &lt;/span&gt;  &lt;/p&gt;&lt;p&gt;It most definitely is - here’s another proof:
&lt;span class=&quot;gatsby-resp-image-wrapper&quot; style=&quot;position:relative;display:block;margin-left:auto;margin-right:auto;max-width:745px&quot;&gt;
      &lt;span class=&quot;gatsby-resp-image-background-image&quot; style=&quot;padding-bottom:18.5234899328859%;position:relative;bottom:0;left:0;background-image:url(&amp;#x27;data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAAECAIAAAABPYjBAAAACXBIWXMAAA7DAAAOwwHHb6hkAAAAsElEQVQI1yWPSa6DMBTAuP8Jq34pkJB5JtNLKlK+oF56ZS+1NSGVkpoyRjBJuVwPIUQf4nmeZKc55+u65vw+PiCEUrrNYn3YGd8pXzFBKzYulAYVOpeKcplKRRs2zlfoqdTSQCj9ev9JbVofi48H5YIJSSjbMLHOQx99fLSxSpvSAO+UCdmgN+jQh7YOrZv1vo/P0gCsu9EPtdZf9nEcIcY5p1IqpfRkz5/nnOdy3/0DueLguGbBlZ8AAAAASUVORK5CYII=&amp;#x27;);background-size:cover;display:block&quot;&gt;&lt;/span&gt;
  &lt;img class=&quot;gatsby-resp-image-image&quot; alt=&quot;20221121103705&quot; title=&quot;20221121103705&quot; src=&quot;/static/46aa8e11c8e587376a8df6fa3f911b09/bf436/20221121103705.png&quot; srcSet=&quot;/static/46aa8e11c8e587376a8df6fa3f911b09/bf436/20221121103705.png 745w&quot; sizes=&quot;(max-width: 745px) 100vw, 745px&quot; style=&quot;width:100%;height:100%;margin:0;vertical-align:middle;position:absolute;top:0;left:0&quot; loading=&quot;lazy&quot; decoding=&quot;async&quot;/&gt;
    &lt;/span&gt;  &lt;/p&gt;&lt;p&gt;My guessing so far is that the “attacker” has been using a script to ascend through the proxies, generating different voter hashes and changed IP every 5 seconds. How do we transfer this idea into KQL?&lt;/p&gt;&lt;p&gt;We do already have a counter query that works like a charm, but we want to exclude all entries from an IP with a count that is beyond “normal”. We need to decide what is normal… Run this query:&lt;/p&gt;&lt;div class=&quot;gatsby-highlight&quot; data-language=&quot;sql&quot;&gt;&lt;pre class=&quot;language-sql&quot;&gt;&lt;code class=&quot;language-sql&quot;&gt;Votes
&lt;span class=&quot;token operator&quot;&gt;|&lt;/span&gt; summarize hits &lt;span class=&quot;token operator&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;token function&quot;&gt;count&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt; &lt;span class=&quot;token keyword&quot;&gt;by&lt;/span&gt; bin&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;token keyword&quot;&gt;Timestamp&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;token number&quot;&gt;5&lt;/span&gt;s&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;,&lt;/span&gt; via_ip&lt;span class=&quot;token punctuation&quot;&gt;,&lt;/span&gt; vote&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;p&gt;This query counts every entry based on the &lt;code class=&quot;language-text&quot;&gt;bin()&lt;/code&gt;function, &lt;code class=&quot;language-text&quot;&gt;via_ip&lt;/code&gt; and &lt;code class=&quot;language-text&quot;&gt;vote&lt;/code&gt;. &lt;code class=&quot;language-text&quot;&gt;bin()&lt;/code&gt; is used to group entries (rows) by &lt;code class=&quot;language-text&quot;&gt;Timestamp&lt;/code&gt; in buckets of 5 seconds which was the time the IP adress used to iterate to the next. This means that we will get unique entries with a counter that says how many of these matches exist based on a combination of entries per 5 seconds where &lt;code class=&quot;language-text&quot;&gt;via_ip&lt;/code&gt; and &lt;code class=&quot;language-text&quot;&gt;vote&lt;/code&gt; is unique (in combination) added to the count value. We get this result when running the query:&lt;/p&gt;&lt;p&gt;&lt;span class=&quot;gatsby-resp-image-wrapper&quot; style=&quot;position:relative;display:block;margin-left:auto;margin-right:auto;max-width:500px&quot;&gt;
      &lt;span class=&quot;gatsby-resp-image-background-image&quot; style=&quot;padding-bottom:82.4%;position:relative;bottom:0;left:0;background-image:url(&amp;#x27;data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAAQCAIAAACZeshMAAAACXBIWXMAAA7DAAAOwwHHb6hkAAACYUlEQVQoz02S124cOxBE9///0LbW0u4wNHNOwzAGR7rAbfCBIHHIqu56ROe8MYpxyZhTKnuffQjGBGuNFF7r5Lw3JhirGffaeGM0596Y5P0jpn1LGQPOldY+hBCjsTbmLKTcJzE6732MXAgfo49Rae1CSKU8SikhREKIUhoA3ndRSnsfSilCCACEEHLOCOFa2xhzjFlKmWM8Sm0+RISJlIpSeB/ofSBM4RxTKv0+kLFuXVeI+UA4lzrXFVNmXFzX9WjtLLUKIZz3Sml+l1RqzuWcl1IqpXofrTWtzVrX9+p9bFgZSxn//fF8Hej59fr18fz15+Pj80tb/0b4z/P58fdTKAVCPj+/rA/GeeO8UHqM8YgpO+8xJowLTMjrdby27m2PC4ExRghb53yIhNJ29trO2s6Y8lpry045AzBrnRCS7gLOxZjTWguMUQqltlrrln1dc625VjvPLft+JgGAMfaGgVDKhRhzWesoADDe+0i5CCG227nGXO3sN1xbSolSUEoBMLQLA8AYQylNCAVgvfeUtrox5pxzjFFr23CpLcRECFXaAGMIY4TJDQylDaGU3LJTLpjQXOqY6+yjfMOtnTlnxpizTinFGANgUsq1fkYlhCiltNY4571vtXPO782j1BpiwoRIpSiw40AHQoRCv0NCAYSUY64Q03Gg//+8fjzvboPWmrHtGePtec6p9Q4sMEg5l1oJIa1tZszZWvvpdsoFGDPW3QllFJgQso9prWNcCCFjyqU1YLy2c66rj9naz6havLutteF3TnZgGJ9zaWNgPyTa2XMuGJPa2lrX+A/+B1yLhlsKUsQtAAAAAElFTkSuQmCC&amp;#x27;);background-size:cover;display:block&quot;&gt;&lt;/span&gt;
  &lt;img class=&quot;gatsby-resp-image-image&quot; alt=&quot;20221121105358&quot; title=&quot;20221121105358&quot; src=&quot;/static/ae2aadcf1c0d24e2880544ca382e6b34/0eb09/20221121105358.png&quot; srcSet=&quot;/static/ae2aadcf1c0d24e2880544ca382e6b34/0eb09/20221121105358.png 500w&quot; sizes=&quot;(max-width: 500px) 100vw, 500px&quot; style=&quot;width:100%;height:100%;margin:0;vertical-align:middle;position:absolute;top:0;left:0&quot; loading=&quot;lazy&quot; decoding=&quot;async&quot;/&gt;
    &lt;/span&gt;  &lt;/p&gt;&lt;p&gt;It seems that “normal” is 1 vote for the combination of the above query. A peculiarity with this query is what appears once you order it ascending by &lt;code class=&quot;language-text&quot;&gt;hits&lt;/code&gt;. We get a value that seems to touch every number from one and upwards. Not sure what to make of this yet - I do however have an explanation at the bottom (spoiler alert!). For now lets stick with the normal being 1 and add:&lt;/p&gt;&lt;div class=&quot;gatsby-highlight&quot; data-language=&quot;sql&quot;&gt;&lt;pre class=&quot;language-sql&quot;&gt;&lt;code class=&quot;language-sql&quot;&gt;&lt;span class=&quot;token operator&quot;&gt;|&lt;/span&gt; &lt;span class=&quot;token keyword&quot;&gt;where&lt;/span&gt; hits &lt;span class=&quot;token operator&quot;&gt;&amp;lt;&lt;/span&gt; &lt;span class=&quot;token number&quot;&gt;2&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;p&gt;Now we have a complete solution to this:&lt;/p&gt;&lt;div class=&quot;gatsby-highlight&quot; data-language=&quot;sql&quot;&gt;&lt;pre class=&quot;language-sql&quot;&gt;&lt;code class=&quot;language-sql&quot;&gt;Votes
&lt;span class=&quot;token operator&quot;&gt;|&lt;/span&gt; summarize hits &lt;span class=&quot;token operator&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;token function&quot;&gt;count&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt; &lt;span class=&quot;token keyword&quot;&gt;by&lt;/span&gt; bin&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;token keyword&quot;&gt;Timestamp&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;token number&quot;&gt;5&lt;/span&gt;s&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;,&lt;/span&gt; via_ip&lt;span class=&quot;token punctuation&quot;&gt;,&lt;/span&gt; vote
&lt;span class=&quot;token operator&quot;&gt;|&lt;/span&gt; &lt;span class=&quot;token keyword&quot;&gt;where&lt;/span&gt; hits &lt;span class=&quot;token operator&quot;&gt;&amp;lt;&lt;/span&gt; &lt;span class=&quot;token number&quot;&gt;2&lt;/span&gt;
&lt;span class=&quot;token operator&quot;&gt;|&lt;/span&gt; summarize Count &lt;span class=&quot;token operator&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;token function&quot;&gt;count&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt; &lt;span class=&quot;token keyword&quot;&gt;by&lt;/span&gt; vote
&lt;span class=&quot;token operator&quot;&gt;|&lt;/span&gt; &lt;span class=&quot;token keyword&quot;&gt;as&lt;/span&gt; hint&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;materialized&lt;span class=&quot;token operator&quot;&gt;=&lt;/span&gt;&lt;span class=&quot;token boolean&quot;&gt;true&lt;/span&gt; T
&lt;span class=&quot;token operator&quot;&gt;|&lt;/span&gt; extend Total &lt;span class=&quot;token operator&quot;&gt;=&lt;/span&gt; toscalar&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;T &lt;span class=&quot;token operator&quot;&gt;|&lt;/span&gt; summarize &lt;span class=&quot;token function&quot;&gt;sum&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;Count&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt;
&lt;span class=&quot;token operator&quot;&gt;|&lt;/span&gt; project vote&lt;span class=&quot;token punctuation&quot;&gt;,&lt;/span&gt; Percentage &lt;span class=&quot;token operator&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;token function&quot;&gt;round&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;Count&lt;span class=&quot;token operator&quot;&gt;*&lt;/span&gt;&lt;span class=&quot;token number&quot;&gt;100.0&lt;/span&gt; &lt;span class=&quot;token operator&quot;&gt;/&lt;/span&gt; Total&lt;span class=&quot;token punctuation&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;token number&quot;&gt;1&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;,&lt;/span&gt; Count
&lt;span class=&quot;token operator&quot;&gt;|&lt;/span&gt; &lt;span class=&quot;token keyword&quot;&gt;order&lt;/span&gt; &lt;span class=&quot;token keyword&quot;&gt;by&lt;/span&gt; Count&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;h1 id=&quot;hints&quot; style=&quot;position:relative&quot;&gt;&lt;a href=&quot;#hints&quot; aria-label=&quot;hints permalink&quot; class=&quot;heading-anchor before&quot;&gt;&lt;span&gt;#&lt;/span&gt;&lt;/a&gt;Hints&lt;/h1&gt;&lt;p&gt;Again, we are presented with three hints that we could get one at at time:&lt;/p&gt;&lt;h2 id=&quot;first-hint&quot; style=&quot;position:relative&quot;&gt;&lt;a href=&quot;#first-hint&quot; aria-label=&quot;first hint permalink&quot; class=&quot;heading-anchor before&quot;&gt;&lt;span&gt;#&lt;/span&gt;&lt;/a&gt;First hint&lt;/h2&gt;&lt;p&gt;&lt;span class=&quot;gatsby-resp-image-wrapper&quot; style=&quot;position:relative;display:block;margin-left:auto;margin-right:auto;max-width:967px&quot;&gt;
      &lt;span class=&quot;gatsby-resp-image-background-image&quot; style=&quot;padding-bottom:17.993795243019648%;position:relative;bottom:0;left:0;background-image:url(&amp;#x27;data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAAECAIAAAABPYjBAAAACXBIWXMAAA7DAAAOwwHHb6hkAAAAlklEQVQI142Iyw6CMBBF+R8sJYFMB/uYDm2lRUTjwvj/X2KwC7cmJzfn3CbdX8vj7ctTnkOvY6/D/zRAGSgPJgnlhfIdsAAvgLuaiiWyxFkid8hymr9Zn7mZ+KrDpsNm4m7izaZjTdxtOtBhU1QUFfTrxFdwGXlFX+rZKFoUZaQMbgF3eBVwF6Q86NCO5jTaSjvY9ufmAx0DOJY+E4XMAAAAAElFTkSuQmCC&amp;#x27;);background-size:cover;display:block&quot;&gt;&lt;/span&gt;
  &lt;img class=&quot;gatsby-resp-image-image&quot; alt=&quot;20221120233225&quot; title=&quot;20221120233225&quot; src=&quot;/static/d869b44b762476d60c556ff87f142e65/3ccd1/20221120233225.png&quot; srcSet=&quot;/static/d869b44b762476d60c556ff87f142e65/3ccd1/20221120233225.png 967w&quot; sizes=&quot;(max-width: 967px) 100vw, 967px&quot; style=&quot;width:100%;height:100%;margin:0;vertical-align:middle;position:absolute;top:0;left:0&quot; loading=&quot;lazy&quot; decoding=&quot;async&quot;/&gt;
    &lt;/span&gt;  &lt;/p&gt;&lt;p&gt;Comparing server votes can give you some hints towards correlation of timestamps and such. Try counting numbers of votes for each server where vote is for Poppy. One would think that the numbers would be more dynamic, but it sure is not. &lt;/p&gt;&lt;p&gt;Another approach I’ve seen some people do is to use &lt;code class=&quot;language-text&quot;&gt;series_decompose_anomalies&lt;/code&gt; in combination with other functions. Try looking into this as well - I’m not going to cover this here, but it sure made me learn something new by reading up on this.&lt;/p&gt;&lt;h2 id=&quot;second-hint&quot; style=&quot;position:relative&quot;&gt;&lt;a href=&quot;#second-hint&quot; aria-label=&quot;second hint permalink&quot; class=&quot;heading-anchor before&quot;&gt;&lt;span&gt;#&lt;/span&gt;&lt;/a&gt;Second hint&lt;/h2&gt;&lt;p&gt;&lt;span class=&quot;gatsby-resp-image-wrapper&quot; style=&quot;position:relative;display:block;margin-left:auto;margin-right:auto;max-width:972px&quot;&gt;
      &lt;span class=&quot;gatsby-resp-image-background-image&quot; style=&quot;padding-bottom:16.56378600823045%;position:relative;bottom:0;left:0;background-image:url(&amp;#x27;data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAADCAIAAAAcOLh5AAAACXBIWXMAAA7DAAAOwwHHb6hkAAAAZklEQVQI142JQQ5AMBBFeyHRkUyrrU7QiWEhbIT7n0Sq7CVv8f5/SrYzrYfsl+mXyg61G/+jwHMTuPEZcCmLS+AZ/HcWSnpngsDasTJxsjRbEuwmQ1IEY3ZDgk8tE6M8kiuS6Ha8ARhTKj5sW34VAAAAAElFTkSuQmCC&amp;#x27;);background-size:cover;display:block&quot;&gt;&lt;/span&gt;
  &lt;img class=&quot;gatsby-resp-image-image&quot; alt=&quot;20221120233252&quot; title=&quot;20221120233252&quot; src=&quot;/static/9c188e64f183bc2b04bc0c58e0e4715e/84a58/20221120233252.png&quot; srcSet=&quot;/static/9c188e64f183bc2b04bc0c58e0e4715e/84a58/20221120233252.png 972w&quot; sizes=&quot;(max-width: 972px) 100vw, 972px&quot; style=&quot;width:100%;height:100%;margin:0;vertical-align:middle;position:absolute;top:0;left:0&quot; loading=&quot;lazy&quot; decoding=&quot;async&quot;/&gt;
    &lt;/span&gt; &lt;/p&gt;&lt;p&gt;This hint made me also realize that the numbers for Poppy was off, really off. If you try to order ascending by count of votes on Poppy, there is a sudden spike. I tried for a long time to see if I could see a pattern in the spike, like its magnitude relating to where it originated from, and if it was as easy as dividing the number of magnitude to “get it back down”. I may have been touching a possible solution, but I gave up on it.&lt;/p&gt;&lt;h2 id=&quot;third-hint&quot; style=&quot;position:relative&quot;&gt;&lt;a href=&quot;#third-hint&quot; aria-label=&quot;third hint permalink&quot; class=&quot;heading-anchor before&quot;&gt;&lt;span&gt;#&lt;/span&gt;&lt;/a&gt;Third hint&lt;/h2&gt;&lt;p&gt;&lt;span class=&quot;gatsby-resp-image-wrapper&quot; style=&quot;position:relative;display:block;margin-left:auto;margin-right:auto;max-width:820px&quot;&gt;
      &lt;span class=&quot;gatsby-resp-image-background-image&quot; style=&quot;padding-bottom:18.78048780487805%;position:relative;bottom:0;left:0;background-image:url(&amp;#x27;data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAAECAIAAAABPYjBAAAACXBIWXMAAA7DAAAOwwHHb6hkAAAAgUlEQVQI142MSwrDMAxEfaGEhGJJTbFkx8WfZJFNIYve/x7BStpFV4XH8AakMWnb07avrzfNa09hmOL/GPIVpFBYxil24Hv0Hbb8yk89RT0Y67J1SbOBUoCV06WQX1Cq5YJcgTNwQakk9fZ4Gu3tTicScgadu54/2W7aaL5webzHA/I7OM9vLKefAAAAAElFTkSuQmCC&amp;#x27;);background-size:cover;display:block&quot;&gt;&lt;/span&gt;
  &lt;img class=&quot;gatsby-resp-image-image&quot; alt=&quot;20221120233314&quot; title=&quot;20221120233314&quot; src=&quot;/static/3942f2bc1539665eaa3a498eababa179/0bbcd/20221120233314.png&quot; srcSet=&quot;/static/3942f2bc1539665eaa3a498eababa179/0bbcd/20221120233314.png 820w&quot; sizes=&quot;(max-width: 820px) 100vw, 820px&quot; style=&quot;width:100%;height:100%;margin:0;vertical-align:middle;position:absolute;top:0;left:0&quot; loading=&quot;lazy&quot; decoding=&quot;async&quot;/&gt;
    &lt;/span&gt;  &lt;/p&gt;&lt;p&gt;When rendering a timechart for every vote with count based on what we saw our solution was, we can see that the attacker is pulsating for every 10 minute with a peak in votes:&lt;/p&gt;&lt;div class=&quot;gatsby-highlight&quot; data-language=&quot;sql&quot;&gt;&lt;pre class=&quot;language-sql&quot;&gt;&lt;code class=&quot;language-sql&quot;&gt;Votes
&lt;span class=&quot;token operator&quot;&gt;|&lt;/span&gt; summarize hits &lt;span class=&quot;token operator&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;token function&quot;&gt;count&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt; &lt;span class=&quot;token keyword&quot;&gt;by&lt;/span&gt; bin&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;token keyword&quot;&gt;Timestamp&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;token number&quot;&gt;5&lt;/span&gt;s&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;,&lt;/span&gt; via_ip&lt;span class=&quot;token punctuation&quot;&gt;,&lt;/span&gt; vote
&lt;span class=&quot;token operator&quot;&gt;|&lt;/span&gt; &lt;span class=&quot;token keyword&quot;&gt;where&lt;/span&gt; vote &lt;span class=&quot;token operator&quot;&gt;=&lt;/span&gt;&lt;span class=&quot;token operator&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;token string&quot;&gt;&amp;quot;Poppy&amp;quot;&lt;/span&gt;
&lt;span class=&quot;token operator&quot;&gt;|&lt;/span&gt; &lt;span class=&quot;token keyword&quot;&gt;order&lt;/span&gt; &lt;span class=&quot;token keyword&quot;&gt;by&lt;/span&gt; hits &lt;span class=&quot;token keyword&quot;&gt;desc&lt;/span&gt;
&lt;span class=&quot;token operator&quot;&gt;|&lt;/span&gt; project &lt;span class=&quot;token keyword&quot;&gt;Timestamp&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;,&lt;/span&gt; hits
&lt;span class=&quot;token operator&quot;&gt;|&lt;/span&gt; render timechart &lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;p&gt;Which gives this output (Bypass limit for this one once asked, as it is a huge query to process):
&lt;span class=&quot;gatsby-resp-image-wrapper&quot; style=&quot;position:relative;display:block;margin-left:auto;margin-right:auto;max-width:1291px&quot;&gt;
      &lt;span class=&quot;gatsby-resp-image-background-image&quot; style=&quot;padding-bottom:25.406661502711074%;position:relative;bottom:0;left:0;background-image:url(&amp;#x27;data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAAFCAIAAADKYVtkAAAACXBIWXMAAA7DAAAOwwHHb6hkAAAA3klEQVQY02P4/fv3f7LA9x8/GX79/vPx6++3H399/f7nw+dfH7/8fv/51+dvv999+v3p6+83H3+CZD/9+vT194cvvz98+fXm48/XH35+/f7n379/DO8//+pa8aBm7u32Zfdq595pXny3Zu6dtqX36uZD2Lfblt6rnXenZfG9+gV3mxffrZt3p2L27WV7n////5/h9YcfHuXnzLNOWueess45ZQVDEC6yCATZ5p02SD1ROuMWSPPHLz+nbXjYs+Je/+r7/avuQ0k4Wn2/b9U9MAnlTlh9v2v5vfWHQDYDAIgg6zfP9TMaAAAAAElFTkSuQmCC&amp;#x27;);background-size:cover;display:block&quot;&gt;&lt;/span&gt;
  &lt;img class=&quot;gatsby-resp-image-image&quot; alt=&quot;20221121113856&quot; title=&quot;20221121113856&quot; src=&quot;/static/3a8ecd593132f080a5b0f41b79bfabe1/e6481/20221121113856.png&quot; srcSet=&quot;/static/3a8ecd593132f080a5b0f41b79bfabe1/e6481/20221121113856.png 1291w&quot; sizes=&quot;(max-width: 1291px) 100vw, 1291px&quot; style=&quot;width:100%;height:100%;margin:0;vertical-align:middle;position:absolute;top:0;left:0&quot; loading=&quot;lazy&quot; decoding=&quot;async&quot;/&gt;
    &lt;/span&gt;  &lt;/p&gt;&lt;p&gt;Removing the two last lines of this query, you will get results that shows where and when a vote has been peeking as well as everything in between, but descending (peaks first). I struggled for a bit to make sense of these extra votes (&amp;gt;1) when going through these, because I was thinking “is a vote count of 15 OK?“. How low a number is considered to be OK for the counter to count as a unique vote? But that was before seeing it as a pulsating attack. The lower votes are basically a part of the valleys of the peaks, either going up or going down.&lt;/p&gt;&lt;h1 id=&quot;badge-time&quot; style=&quot;position:relative&quot;&gt;&lt;a href=&quot;#badge-time&quot; aria-label=&quot;badge time permalink&quot; class=&quot;heading-anchor before&quot;&gt;&lt;span&gt;#&lt;/span&gt;&lt;/a&gt;Badge-time&lt;/h1&gt;&lt;p&gt;&lt;span class=&quot;gatsby-resp-image-wrapper&quot; style=&quot;position:relative;display:block;margin-left:auto;margin-right:auto;max-width:190px&quot;&gt;
      &lt;span class=&quot;gatsby-resp-image-background-image&quot; style=&quot;padding-bottom:117.89473684210527%;position:relative;bottom:0;left:0;background-image:url(&amp;#x27;data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAAYCAIAAAB1KUohAAAACXBIWXMAAA7DAAAOwwHHb6hkAAAEmklEQVQ4y1WRa2/aVgCG/UsmbWnTJC3hEiCBJBhjDMYBfOFibILBBgy+YhswBgKk6bZma5s2ipKszdQtvW6T9h8nQtJ20vvpPc8jveccoNLUKk2t3FDKDZUVFIaXWUFm6wojyOW6Wq4rJV5iBJnhJbausIKy35jznKiDKQrojR93R4dHxy9/fn56/Or88urtydlvr86vnp9ePju9ODo+eXl+9eL04uTs9Yuz168u3jjTJ93RoT15guA0YAymuj396dnZ2eXV5dsP7z59vri6/v3PT2/+ePf05PTpy8v3f/37x/vP1x//Ob+6fnP9YXBwpNsTa3gYzxQBw5kZzswcznrjI8OZavZBZzAxhzPdPjCcWcee6PZEH0y1/ry3RofGYM5bo8dwpgjgTO02pRrB8CQrkKxAMDzB8DjztSFZ/qa8hQmWD8XTQDxb/Bq8GMsUYuk8gtMpisVy5STJwNl5szj9QiI4HYQwACFohKATRAnB6Xi2kKWrlaYq6n3JdCTTaRsDQTYLnJgkS3C2OMfu+GA0BSA4vUiCKJUbqtobav2x0jtQu0PFspXeWO0f6P2RqNsZuhpf+PgX+W4GL5mqZWeKIitoDUmla1p23+JFTWipRFktC7LWG+OlGpzOIzd8AETnd46l82xd0XtOmlb8mR+DWC+c7W8k5cBeH6SPwNIsVJxFmQnflOXuEKUYOFO4lWPpfLpQUbsOxbY28eM11+bKqtsToT27Bc8O4U+Kjzbg5R+W/GgLZkeirFVaeiydQ7LFQCQJQHs5ti7r/RFTk8L441VX+P7S8qor5IPq3gj70AevuSPLy+sbicYe57Q0QzIdlGJi6bwfTALxTKGumLLpqKaJMX13VPJC5QCqgtUPcPvjFm5544p/r7NDj2uionaHsjUgmRqE5fyRJJDE6Zbem3+MbiSKA3eksYn3Q8Q4yv+9XXgSQMVgpuuDK2HK3m9oijWQzUGRa0IYNZcTREns9JWus1+Xt7KHD1a895fur7pCnh0mgKmuYHI9lHMFU94Yt8c5bc2QrWGRE6MYtRG5md1QLMXsZst9d0Rcc4VDxHEwO41wF3H1ow/eX3OHHnoia+5dkJnyoqx2hxQrRFPkxm4CgFJUpaGqhpVhnfUdLojpXpBzbRHh4i/bzHGk+issXm5m++4wuVsY1JqqbDoYVYZS1MYOAkRRkqBrmjUoVFR/6mBlzXfv++9W1vzr4YIH2n8UjC8vPVi+98ANluLsuK3oQtuMYTl4L+/bRoAYlothOaFtSpqZyBn+1NAdra+D/KNten0770tIPqQZSOuR0oSpSarlZItcFCXncjg+nx1FyRTBtDS7pZg0J1MVkyibcM4Ai4d4dZzj7ULN4ARJMR2aa0VREkpRMSznDcNzGUpRYJLASLah9FRrKHd6cqfbaGsVvtlWDUmzFMNWzCFdESGUWvB3MkrehAITBJLO05zYkC2pY8uGo1hDqTNoaf1qU8vkK2CSuIPJWIryhmLzB1tksT+SJJBMIZOvUAxPMTxBV1NEKYqSc/MGuIVRyrMVA6JJ4n9BSTCBR5Dst1n032IQSnq2oP8AtuP7TVYJFUgAAAAASUVORK5CYII=&amp;#x27;);background-size:cover;display:block&quot;&gt;&lt;/span&gt;
  &lt;img class=&quot;gatsby-resp-image-image&quot; alt=&quot;20221121110153&quot; title=&quot;20221121110153&quot; src=&quot;/static/fb6c3bf0b18298489cf5375ba5b0bc13/08678/20221121110153.png&quot; srcSet=&quot;/static/fb6c3bf0b18298489cf5375ba5b0bc13/08678/20221121110153.png 190w&quot; sizes=&quot;(max-width: 190px) 100vw, 190px&quot; style=&quot;width:100%;height:100%;margin:0;vertical-align:middle;position:absolute;top:0;left:0&quot; loading=&quot;lazy&quot; decoding=&quot;async&quot;/&gt;
    &lt;/span&gt;&lt;br/&gt;
One of the details we noticed in this task is that you might try to export some of the data and visualize in applications like Microsoft Ecxel in order to point out a direction.&lt;/p&gt;&lt;p&gt;Good job! Did you learn anything new? Please let me know, I’d love to hear about it.&lt;/p&gt;</content:encoded><tags>KQL,Azure Data Explorer,Data Science</tags><featuredImage>https://blog.amestofortytwo.com/static/5cb4233e2c979c803ef8912e99c54c92/badge.png</featuredImage></item><item><title><![CDATA[Kusto Detective - Rookie - The rarest book is missing]]></title><description><![CDATA[Walkthrough of Kusto Detective Agency series]]></description><link>https://blog.amestofortytwo.com/kusto-detective-agency2</link><guid isPermaLink="false">https://blog.amestofortytwo.com/kusto-detective-agency2</guid><category><![CDATA[KQL]]></category><category><![CDATA[Azure Data Explorer]]></category><category><![CDATA[Data Science]]></category><pubDate>Sun, 11 Dec 2022 00:00:00 GMT</pubDate><content:encoded>&lt;h1 id=&quot;kusto-detective---rookie---the-rarest-book-is-missing&quot; style=&quot;position:relative&quot;&gt;&lt;a href=&quot;#kusto-detective---rookie---the-rarest-book-is-missing&quot; aria-label=&quot;kusto detective   rookie   the rarest book is missing permalink&quot; class=&quot;heading-anchor before&quot;&gt;&lt;span&gt;#&lt;/span&gt;&lt;/a&gt;Kusto Detective - Rookie - The rarest book is missing&lt;/h1&gt;&lt;h2 id=&quot;introduction&quot; style=&quot;position:relative&quot;&gt;&lt;a href=&quot;#introduction&quot; aria-label=&quot;introduction permalink&quot; class=&quot;heading-anchor before&quot;&gt;&lt;span&gt;#&lt;/span&gt;&lt;/a&gt;Introduction&lt;/h2&gt;&lt;p&gt;Welcome to the actual first challenge.  Let’s just say that it is expected that you have practiced since the last task. These tasks were released with a 2 week break inbetween eachother. Considering the level of the query for the first task, this one takes it even further. Not to be worried, but if you are solving this by yourself, you’re in for more and more brain twisters. &lt;/p&gt;&lt;p&gt;The query itself makes totally sense once you get the correct answer, but going from a logic reasoning and transferring into a query that does what you want takes practice. I will try to make these walktroughs more progressive than what the tasks may feel like.&lt;/p&gt;&lt;p&gt;Copy the query in the inbox text and run through it like we did in the onboarding case. It may take some time.&lt;/p&gt;&lt;h1 id=&quot;the-story&quot; style=&quot;position:relative&quot;&gt;&lt;a href=&quot;#the-story&quot; aria-label=&quot;the story permalink&quot; class=&quot;heading-anchor before&quot;&gt;&lt;span&gt;#&lt;/span&gt;&lt;/a&gt;The story&lt;/h1&gt;&lt;p&gt;&lt;span class=&quot;gatsby-resp-image-wrapper&quot; style=&quot;position:relative;display:block;margin-left:auto;margin-right:auto;max-width:918px&quot;&gt;
      &lt;span class=&quot;gatsby-resp-image-background-image&quot; style=&quot;padding-bottom:55.119825708061%;position:relative;bottom:0;left:0;background-image:url(&amp;#x27;data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAALCAIAAADwazoUAAAACXBIWXMAAA7DAAAOwwHHb6hkAAAB1UlEQVQoz1XL6W7aQBSGYd8HZjEez4xn8YI9gIF4wZgYvNCmXgpJSNL8aG+gUi+/coE2lR4dvTrSJy33VXho7/I6LFt7vef+veGnRtAxg5SttmSZkGVClwlbbdlqS/+4tLStnorTt+z4mh3fsuNbcXovT++79iVtzrvmHJaNX9RB2fh5LTaFu8lFUohNKZJyEmVS/Om4a85pfU6+PO6bl83nY1S28+3BiTInykScu3FOvLgzX1/jRgrzZlc9p9XT/cPjrnpel22Y1W60Z17MFxu+SPgyubQ+jTTXhx9Id+lDmFX+vgqyOsjrqGjjw9eoaKOiCfNGrPN5crD9lHoxnobA8bUPJGPuT1ZrexEw1+Oux5w5czzDXSDDGemmgo0R5iPUUbCh6EZ3bySNc92xqc01HasIAYyvdAwQBoioEAOkq4h0NDjoy4N+/0JClkmFawnGOWYEc0oo1RkjBKkYKFAZqiroZpiMlHG3HPT/kjQ2QaZLTBNhghDBmHaBKQQIAggBVAEaI64SU4FkMBx3RupA6UhjKlQqFCJkaP2jmTK0ZWj30QSaHmDTDp9plqdZHjDmgM8An0k9YNyY/7v+ZWDK0OopxlAs6M/v7NePcZL0hkzWrN9M+YfrgdtGegAAAABJRU5ErkJggg==&amp;#x27;);background-size:cover;display:block&quot;&gt;&lt;/span&gt;
  &lt;img class=&quot;gatsby-resp-image-image&quot; alt=&quot;20221114150115&quot; title=&quot;20221114150115&quot; src=&quot;/static/d7f3d5ea90fb32452860c797ff0baa5b/926ba/20221114150115.png&quot; srcSet=&quot;/static/d7f3d5ea90fb32452860c797ff0baa5b/926ba/20221114150115.png 918w&quot; sizes=&quot;(max-width: 918px) 100vw, 918px&quot; style=&quot;width:100%;height:100%;margin:0;vertical-align:middle;position:absolute;top:0;left:0&quot; loading=&quot;lazy&quot; decoding=&quot;async&quot;/&gt;
    &lt;/span&gt;  &lt;/p&gt;&lt;p&gt;Read through the screenshot provided and get a glimpse of the story. How would yo go forward from here? For me, I have been looking for a strategy by first getting the story and then deciding on what to look for. Keywords to extract from the story:&lt;/p&gt;&lt;ul&gt;&lt;li&gt;325,000 rare books&lt;/li&gt;&lt;li&gt;Cannot locate the rarest book in the world “De Revolutionibus Magnis Data”, published 1613 by Gustav Kustov.&lt;/li&gt;&lt;li&gt;Each book has number of pages and weight, RFID sticker&lt;/li&gt;&lt;li&gt;RFID is collected by each shelve: which books are here and total weight.&lt;/li&gt;&lt;/ul&gt;&lt;p&gt;So, basically the story is: A book has been misplaced without its RFID. Can you find it? My immediate thought to this was that we need to identify which shelve has the largest gap in weight from expected weight to actual weight. If a book has been misplaced the shelf will be heavier in total (it sends the actual weight, not the calculated RFID weight) than what the total of RFID’s will tell.&lt;/p&gt;&lt;p&gt;My approach will then be to calculate expected weight on shelves before moving on to compare it with the actual weight, order it descending and the answer should be the top result.&lt;/p&gt;&lt;p&gt;Lets move on and look at the hints to learn even more of what could lead us in the correct direction.&lt;/p&gt;&lt;h1 id=&quot;hints&quot; style=&quot;position:relative&quot;&gt;&lt;a href=&quot;#hints&quot; aria-label=&quot;hints permalink&quot; class=&quot;heading-anchor before&quot;&gt;&lt;span&gt;#&lt;/span&gt;&lt;/a&gt;Hints&lt;/h1&gt;&lt;h2 id=&quot;first-hint&quot; style=&quot;position:relative&quot;&gt;&lt;a href=&quot;#first-hint&quot; aria-label=&quot;first hint permalink&quot; class=&quot;heading-anchor before&quot;&gt;&lt;span&gt;#&lt;/span&gt;&lt;/a&gt;First hint&lt;/h2&gt;&lt;p&gt;&lt;span class=&quot;gatsby-resp-image-wrapper&quot; style=&quot;position:relative;display:block;margin-left:auto;margin-right:auto;max-width:555px&quot;&gt;
      &lt;span class=&quot;gatsby-resp-image-background-image&quot; style=&quot;padding-bottom:29.18918918918919%;position:relative;bottom:0;left:0;background-image:url(&amp;#x27;data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAAGCAIAAABM9SnKAAAACXBIWXMAAA7DAAAOwwHHb6hkAAAAwElEQVQY05WOUQuCMBRG93MsTTQf2nTmnLi5q6BuRkkU/v9fEVNDH3oJDoePc18uEuMkbu/qPrFuPF2rf1AoKJqQW/xM+RnMnmGw+ScMUGme6jGVwytgcExKjwp3xtvZTde4x0sFCnMIMhUydeZ1VNTWvImKOioaO7gty+lbGjvsv4AS0AmYtB5I1dF19Fi2CehYaSI7LLtY9YtjpbFsSdVfROtRgShoCoaCwbKlYPxUODg/EO4Q6w0b82U4MwfMP+YYWQT8ep9zAAAAAElFTkSuQmCC&amp;#x27;);background-size:cover;display:block&quot;&gt;&lt;/span&gt;
  &lt;img class=&quot;gatsby-resp-image-image&quot; alt=&quot;20221114151628&quot; title=&quot;20221114151628&quot; src=&quot;/static/43ad6e9cc8ba6679fbcfa72828ba77f3/98c96/20221114151628.png&quot; srcSet=&quot;/static/43ad6e9cc8ba6679fbcfa72828ba77f3/98c96/20221114151628.png 555w&quot; sizes=&quot;(max-width: 555px) 100vw, 555px&quot; style=&quot;width:100%;height:100%;margin:0;vertical-align:middle;position:absolute;top:0;left:0&quot; loading=&quot;lazy&quot; decoding=&quot;async&quot;/&gt;
    &lt;/span&gt;&lt;br/&gt;
Take a more in depth look of the book of interest. I find this as a self explanatory thing to do when starting out. Find out what kind of data you are dealing with, and see if anything stands out with the element in question. Also, you might remember a few details that can trigger any lead when doing so.&lt;/p&gt;&lt;h2 id=&quot;second-hint&quot; style=&quot;position:relative&quot;&gt;&lt;a href=&quot;#second-hint&quot; aria-label=&quot;second hint permalink&quot; class=&quot;heading-anchor before&quot;&gt;&lt;span&gt;#&lt;/span&gt;&lt;/a&gt;Second hint&lt;/h2&gt;&lt;p&gt;&lt;span class=&quot;gatsby-resp-image-wrapper&quot; style=&quot;position:relative;display:block;margin-left:auto;margin-right:auto;max-width:1463px&quot;&gt;
      &lt;span class=&quot;gatsby-resp-image-background-image&quot; style=&quot;padding-bottom:10.66302118933698%;position:relative;bottom:0;left:0;background-image:url(&amp;#x27;data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAACCAIAAADXZGvcAAAACXBIWXMAAA7DAAAOwwHHb6hkAAAAQElEQVQI12Ow948wdfXXsXXXtfMgCek7eDFYewVbuAcYO3kbO/uASBADxDZBcH2MnLxByNELJAjmGjv7GDp4AgDyHR11ctoxYwAAAABJRU5ErkJggg==&amp;#x27;);background-size:cover;display:block&quot;&gt;&lt;/span&gt;
  &lt;img class=&quot;gatsby-resp-image-image&quot; alt=&quot;20221114151718&quot; title=&quot;20221114151718&quot; src=&quot;/static/65e079037fd5cc6ab8b2d83f4f219b8f/1304e/20221114151718.png&quot; srcSet=&quot;/static/65e079037fd5cc6ab8b2d83f4f219b8f/1304e/20221114151718.png 1463w&quot; sizes=&quot;(max-width: 1463px) 100vw, 1463px&quot; style=&quot;width:100%;height:100%;margin:0;vertical-align:middle;position:absolute;top:0;left:0&quot; loading=&quot;lazy&quot; decoding=&quot;async&quot;/&gt;
    &lt;/span&gt;&lt;br/&gt;
This hint proves valuable as it leads me into some queries and keywords that was interesting. The first element locks down on shelf 5853 using &lt;code class=&quot;language-text&quot;&gt;where&lt;/code&gt;. The &lt;code class=&quot;language-text&quot;&gt;mv-expand&lt;/code&gt; function takes the whole list of RFID’s and creates a new row for each with their original belonging values residing in the original entry. From here we have every book with its shelf and the shelves total weight. Moving on the hint does a &lt;code class=&quot;language-text&quot;&gt;lookup&lt;/code&gt;. A &lt;code class=&quot;language-text&quot;&gt;lookup&lt;/code&gt; is similar to a &lt;code class=&quot;language-text&quot;&gt;join&lt;/code&gt; (it basically means to combine two tables), but has a few differences:&lt;/p&gt;&lt;ul&gt;&lt;li&gt;like non repeating columns from the $right table, &lt;/li&gt;&lt;li&gt;limited to leftouter (default) and inner (kind of join)&lt;/li&gt;&lt;li&gt;assumes $left is the larger table (oposite with join)&lt;/li&gt;&lt;li&gt;automatically broadcasts the $right table to the $left table&lt;/li&gt;&lt;/ul&gt;&lt;p&gt;&lt;a href=&quot;https://learn.microsoft.com/en-us/azure/data-explorer/kusto/query/lookupoperator&quot; target=&quot;_blank&quot; rel=&quot;noreferrer&quot;&gt;Microsoft has more info to dig deeper into.&lt;/a&gt;&lt;/p&gt;&lt;p&gt;So, what is lookup doing here? Well, it “joins” or looks up all the information from Books and broadcasts it based on rf_id from $right to $left. And then reducing numbers of columns shown by &lt;code class=&quot;language-text&quot;&gt;project&lt;/code&gt;. The columns you put after this will be the columns that are being part of the output.&lt;/p&gt;&lt;h2 id=&quot;third-hint&quot; style=&quot;position:relative&quot;&gt;&lt;a href=&quot;#third-hint&quot; aria-label=&quot;third hint permalink&quot; class=&quot;heading-anchor before&quot;&gt;&lt;span&gt;#&lt;/span&gt;&lt;/a&gt;Third hint&lt;/h2&gt;&lt;p&gt;&lt;span class=&quot;gatsby-resp-image-wrapper&quot; style=&quot;position:relative;display:block;margin-left:auto;margin-right:auto;max-width:681px&quot;&gt;
      &lt;span class=&quot;gatsby-resp-image-background-image&quot; style=&quot;padding-bottom:21.73274596182085%;position:relative;bottom:0;left:0;background-image:url(&amp;#x27;data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAAECAIAAAABPYjBAAAACXBIWXMAAA7DAAAOwwHHb6hkAAAAbklEQVQI12Ow8gs38wg09wg0cfXTs/ckCTE4BkY6+Ec4B0WZuPhq27jp2LoTiXTtPBjMXP3M3fzN3fzM3fzMXJGQi6+pi6+Zqx+EhAvC2YaOXgwmzj6mYHWmLr4mzj4ILpht5uqHqsAbztazcwcAY8o8I8IqR34AAAAASUVORK5CYII=&amp;#x27;);background-size:cover;display:block&quot;&gt;&lt;/span&gt;
  &lt;img class=&quot;gatsby-resp-image-image&quot; alt=&quot;20221114151737&quot; title=&quot;20221114151737&quot; src=&quot;/static/9e3a4a576ce9a1276534fafa26fb09e5/833a5/20221114151737.png&quot; srcSet=&quot;/static/9e3a4a576ce9a1276534fafa26fb09e5/833a5/20221114151737.png 681w&quot; sizes=&quot;(max-width: 681px) 100vw, 681px&quot; style=&quot;width:100%;height:100%;margin:0;vertical-align:middle;position:absolute;top:0;left:0&quot; loading=&quot;lazy&quot; decoding=&quot;async&quot;/&gt;
    &lt;/span&gt;&lt;br/&gt;
Nothing is perfect, ey? Dust?&lt;/p&gt;&lt;h1 id=&quot;solution&quot; style=&quot;position:relative&quot;&gt;&lt;a href=&quot;#solution&quot; aria-label=&quot;solution permalink&quot; class=&quot;heading-anchor before&quot;&gt;&lt;span&gt;#&lt;/span&gt;&lt;/a&gt;Solution&lt;/h1&gt;&lt;p&gt;Based on everything we have gone through now, we have a query from the hints that has taken us pretty far. We’ve been forced to try out a few differenct functions that seem to do a lot of what we are looking for. The query we are left with is: &lt;/p&gt;&lt;div class=&quot;gatsby-highlight&quot; data-language=&quot;sql&quot;&gt;&lt;pre class=&quot;language-sql&quot;&gt;&lt;code class=&quot;language-sql&quot;&gt;Shelves 
&lt;span class=&quot;token operator&quot;&gt;|&lt;/span&gt; &lt;span class=&quot;token keyword&quot;&gt;where&lt;/span&gt; shelf &lt;span class=&quot;token operator&quot;&gt;=&lt;/span&gt;&lt;span class=&quot;token operator&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;token string&quot;&gt;&amp;quot;5853&amp;quot;&lt;/span&gt;
&lt;span class=&quot;token operator&quot;&gt;|&lt;/span&gt; mv&lt;span class=&quot;token operator&quot;&gt;-&lt;/span&gt;expand rf_id &lt;span class=&quot;token operator&quot;&gt;=&lt;/span&gt; rf_ids &lt;span class=&quot;token keyword&quot;&gt;to&lt;/span&gt; typeof&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;string&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt; 
&lt;span class=&quot;token operator&quot;&gt;|&lt;/span&gt; lookup Books &lt;span class=&quot;token keyword&quot;&gt;on&lt;/span&gt; rf_id 
&lt;span class=&quot;token operator&quot;&gt;|&lt;/span&gt; project shelf&lt;span class=&quot;token punctuation&quot;&gt;,&lt;/span&gt; author&lt;span class=&quot;token punctuation&quot;&gt;,&lt;/span&gt; book_title&lt;span class=&quot;token punctuation&quot;&gt;,&lt;/span&gt; total_weight&lt;span class=&quot;token punctuation&quot;&gt;,&lt;/span&gt; weight_gram&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;p&gt;What was our goal? We need to calculate the total weight of each book for each shelf and compare it to the actual weight that the shelf is claiming to have. How do we move forward? A better question is, how do we calculate on columns? Google this and see what you can figure out before moving forward!&lt;/p&gt;&lt;p&gt;There are a few ways to do calculations on columns’ values. The solution would be to use &lt;code class=&quot;language-text&quot;&gt;summarize&lt;/code&gt; for this. &lt;code class=&quot;language-text&quot;&gt;summarize&lt;/code&gt; groups the rows based on what columns you provide after &lt;code class=&quot;language-text&quot;&gt;by&lt;/code&gt;. This way we can calculate and name the calculated value and make it into it’s own column. &lt;/p&gt;&lt;p&gt;To get the calculated weight we should &lt;code class=&quot;language-text&quot;&gt;sum()&lt;/code&gt; the &lt;code class=&quot;language-text&quot;&gt;weight_gram&lt;/code&gt; (each books weight) and we also need to create a column with the shelves claimed weight &lt;code class=&quot;language-text&quot;&gt;by&lt;/code&gt; shelf. Then move on to another type of calculating on columns in KQL - &lt;code class=&quot;language-text&quot;&gt;extend&lt;/code&gt;. &lt;code class=&quot;language-text&quot;&gt;extend&lt;/code&gt; does calculation and adds it into a new extended column. Subtract &lt;code class=&quot;language-text&quot;&gt;claimedWeight&lt;/code&gt; by &lt;code class=&quot;language-text&quot;&gt;bookWeight&lt;/code&gt;. Here’s the solution!&lt;/p&gt;&lt;div class=&quot;gatsby-highlight&quot; data-language=&quot;sql&quot;&gt;&lt;pre class=&quot;language-sql&quot;&gt;&lt;code class=&quot;language-sql&quot;&gt;Shelves 
&lt;span class=&quot;token operator&quot;&gt;|&lt;/span&gt; mv&lt;span class=&quot;token operator&quot;&gt;-&lt;/span&gt;expand rf_id &lt;span class=&quot;token operator&quot;&gt;=&lt;/span&gt; rf_ids &lt;span class=&quot;token keyword&quot;&gt;to&lt;/span&gt; typeof&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;string&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt;
&lt;span class=&quot;token operator&quot;&gt;|&lt;/span&gt; lookup Books &lt;span class=&quot;token keyword&quot;&gt;on&lt;/span&gt; rf_id 
&lt;span class=&quot;token operator&quot;&gt;|&lt;/span&gt; project shelf&lt;span class=&quot;token punctuation&quot;&gt;,&lt;/span&gt; author&lt;span class=&quot;token punctuation&quot;&gt;,&lt;/span&gt; book_title&lt;span class=&quot;token punctuation&quot;&gt;,&lt;/span&gt; total_weight&lt;span class=&quot;token punctuation&quot;&gt;,&lt;/span&gt; weight_gram
&lt;span class=&quot;token operator&quot;&gt;|&lt;/span&gt; summarize bookWeight &lt;span class=&quot;token operator&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;token function&quot;&gt;sum&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;weight_gram&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;,&lt;/span&gt; claimedWeight &lt;span class=&quot;token operator&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;token function&quot;&gt;min&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;total_weight&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt; &lt;span class=&quot;token keyword&quot;&gt;by&lt;/span&gt; shelf
&lt;span class=&quot;token operator&quot;&gt;|&lt;/span&gt; extend difference &lt;span class=&quot;token operator&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;claimedWeight &lt;span class=&quot;token operator&quot;&gt;-&lt;/span&gt; bookWeight&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt;
&lt;span class=&quot;token operator&quot;&gt;|&lt;/span&gt; &lt;span class=&quot;token keyword&quot;&gt;order&lt;/span&gt; &lt;span class=&quot;token keyword&quot;&gt;by&lt;/span&gt; difference &lt;span class=&quot;token keyword&quot;&gt;desc&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;p&gt;Or you can use another type of summarize as I’ve seen other players had used.:&lt;/p&gt;&lt;div class=&quot;gatsby-highlight&quot; data-language=&quot;sql&quot;&gt;&lt;pre class=&quot;language-sql&quot;&gt;&lt;code class=&quot;language-sql&quot;&gt;Shelves 
&lt;span class=&quot;token operator&quot;&gt;|&lt;/span&gt; mv&lt;span class=&quot;token operator&quot;&gt;-&lt;/span&gt;expand rf_id &lt;span class=&quot;token operator&quot;&gt;=&lt;/span&gt; rf_ids &lt;span class=&quot;token keyword&quot;&gt;to&lt;/span&gt; typeof&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;string&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt;
&lt;span class=&quot;token operator&quot;&gt;|&lt;/span&gt; lookup Books &lt;span class=&quot;token keyword&quot;&gt;on&lt;/span&gt; rf_id 
&lt;span class=&quot;token operator&quot;&gt;|&lt;/span&gt; project shelf&lt;span class=&quot;token punctuation&quot;&gt;,&lt;/span&gt; author&lt;span class=&quot;token punctuation&quot;&gt;,&lt;/span&gt; book_title&lt;span class=&quot;token punctuation&quot;&gt;,&lt;/span&gt; total_weight&lt;span class=&quot;token punctuation&quot;&gt;,&lt;/span&gt; weight_gram
&lt;span class=&quot;token operator&quot;&gt;|&lt;/span&gt; summarize bookWeight &lt;span class=&quot;token operator&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;token function&quot;&gt;sum&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;weight_gram&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt; &lt;span class=&quot;token keyword&quot;&gt;by&lt;/span&gt; shelf&lt;span class=&quot;token punctuation&quot;&gt;,&lt;/span&gt; total_weight
&lt;span class=&quot;token operator&quot;&gt;|&lt;/span&gt; extend difference &lt;span class=&quot;token operator&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;claimedWeight &lt;span class=&quot;token operator&quot;&gt;-&lt;/span&gt; total_weight&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt;
&lt;span class=&quot;token operator&quot;&gt;|&lt;/span&gt; &lt;span class=&quot;token keyword&quot;&gt;order&lt;/span&gt; &lt;span class=&quot;token keyword&quot;&gt;by&lt;/span&gt; difference &lt;span class=&quot;token keyword&quot;&gt;desc&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;h1 id=&quot;badge-time&quot; style=&quot;position:relative&quot;&gt;&lt;a href=&quot;#badge-time&quot; aria-label=&quot;badge time permalink&quot; class=&quot;heading-anchor before&quot;&gt;&lt;span&gt;#&lt;/span&gt;&lt;/a&gt;Badge-time&lt;/h1&gt;&lt;p&gt;&lt;span class=&quot;gatsby-resp-image-wrapper&quot; style=&quot;position:relative;display:block;margin-left:auto;margin-right:auto;max-width:192px&quot;&gt;
      &lt;span class=&quot;gatsby-resp-image-background-image&quot; style=&quot;padding-bottom:118.75%;position:relative;bottom:0;left:0;background-image:url(&amp;#x27;data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAAYCAIAAAB1KUohAAAACXBIWXMAAA7DAAAOwwHHb6hkAAAEo0lEQVQ4y12OiW/aZhyG/ZdMU9tkDRRsDEmbEMAYG9vYfL4wBpvDwRwBY8AmJokhzb2ld7Vuqjbt0HpKWatpnfb/TZBo6ia9svy9eh79XogvGaLWELUGUOt8aQuodVBcRK0D1eBLW3zJmP+oBlDr+WJdWPBypUmLGjScHHiz07F/fPrg2eHZg/PHLy6evvjmyYvTi+fnj54fnj86OH98/ujZ8cWzs4fPL55+e//sobt/tHf4tbE9hCzXd/buD7zDlz+9+uHnX978/unt5YfLj3/9+uby9dvX50++//G39398+vvdhz9fvf/w/vLjk+9eDrzZzvSk2rIh25uNp8eufzSenngHp65/5Owfjv2jeTP/Hnuzk7F/slh3NJ4ej6cnzv7h5P5ZrTOABG2rUGnKlaaoNyS9IVVMudqUK6akm6LeWJTm/LloroFKU6m1aUmD0lwhk1c+D8bKGCsRoEgKKsmrOKdgOel/GAGKCVqACFDMCqWrkLxK8kVBM2rtQcve6Qwn7aFnWmPN7LFK5XOSEsspRoIyeWXhqAQoMpJmdEcD78CezPre1B7P7J2Z7U0Hk4P+eFpubJNAJUGR5NWsUEoyIoRzBZJXM3mFkbTOaLfZdQS93Og6ZteVDb3cNFtdr9rqCZpmOX61YxOLzSSvzmfjXIEAxQwoNvput7+P68RqNRwvr2+o8VUlmmhFMXNjQ4+hpSBXLgy9Q9XopFk5K5TmcoYr4KxcqDX7oymp0REptHwDWUHDcBYOriFhHEEoeHkpfDuIhPmAqOn9sc9IZSKvJCkeSrMykVdMy7EcH9QLURFZugkv34JDcQRl0fBmJBhFbt9BbofgmIiWjKbtzVSjg3OFBMVDGCPmZL07mvTGu+2el9DjCDPXVkuRzNF62onCBBwrRWEQzJZZezTtuZOt7pDIK5tZAKVogS/Ve85uz901t514+R5CI+t19G4lgk/vrRXQCIug+UgQD2bK2d5gv+tM2vY4y6ubZB5KUgKv1rojrzfc5w0lAkK3vkCWl+FgDFlTogiFBBAYZdAAiiAcrJlty91r9l0SFOMEN7/Myvr2yOv0PLyOrcRCCIFutNC7xiq+t5qwIoEoHEDhABwJJAKsLvYd/2p2nMhDGC0SnNLqu52el9KToRR8V42uwDDKRTettXUDWavD0QK8CmKBzSCjAduZalvb6Zw8l9OMhNFi2ejYoylTzYdzgaUb8NJNOBBFECqCUMjSMrz0JfxVMBzKrSi1uu1O80olzUjXcpqRskDdHnpm20lr+GoRiQAY5sJ3kuEIF4oVQ1ExHCvAlAqs4X6tac3HsoV4Jg+lKAHPySlKAEq15+y1u57WaKsNQ6pX8FqG7eSKzZpqblXNrjX0m5ZLcgpGixm2sIFzc/nqeIoS8oVKq7/Td6bW0O8NfLPlttqeNfCtod93/XrbJvPFFCWmGQnPyQs5y6dp8SpJEpCcolZbZnfUsXcsd6/n7Lb7Y6NtiyUjTYsp6hrGGWkjzULJLI/R4lWu7idIgOdkWiixsp6TdAqoGC0mSJCiRIyW/iXX5zIJMEr4T2gBywpJElwllQXX5WdMmhbXsdw/vtnnSRQzowwAAAAASUVORK5CYII=&amp;#x27;);background-size:cover;display:block&quot;&gt;&lt;/span&gt;
  &lt;img class=&quot;gatsby-resp-image-image&quot; alt=&quot;20221120232913&quot; title=&quot;20221120232913&quot; src=&quot;/static/d4b659fdc92ba84461fadae2827ca5eb/3b721/20221120232913.png&quot; srcSet=&quot;/static/d4b659fdc92ba84461fadae2827ca5eb/3b721/20221120232913.png 192w&quot; sizes=&quot;(max-width: 192px) 100vw, 192px&quot; style=&quot;width:100%;height:100%;margin:0;vertical-align:middle;position:absolute;top:0;left:0&quot; loading=&quot;lazy&quot; decoding=&quot;async&quot;/&gt;
    &lt;/span&gt;  &lt;/p&gt;&lt;p&gt;Good job! Did you learn anything new? Did you prefer any of the types of summarize? Please let me know, I’d love to hear about it.&lt;/p&gt;</content:encoded><tags>KQL,Azure Data Explorer,Data Science</tags><featuredImage>https://blog.amestofortytwo.com/static/35d14e82d2b02be972ed50e595ea80df/badge.png</featuredImage></item><item><title><![CDATA[Kusto Detective - Detective 2 - Bank Robbery]]></title><description><![CDATA[Walkthrough of Kusto Detective Agency series]]></description><link>https://blog.amestofortytwo.com/kusto-detective-agency4</link><guid isPermaLink="false">https://blog.amestofortytwo.com/kusto-detective-agency4</guid><category><![CDATA[KQL]]></category><category><![CDATA[Azure Data Explorer]]></category><category><![CDATA[Data Science]]></category><pubDate>Sun, 11 Dec 2022 00:00:00 GMT</pubDate><content:encoded>&lt;h1 id=&quot;kusto-detective---detective-2---bank-robbery&quot; style=&quot;position:relative&quot;&gt;&lt;a href=&quot;#kusto-detective---detective-2---bank-robbery&quot; aria-label=&quot;kusto detective   detective 2   bank robbery permalink&quot; class=&quot;heading-anchor before&quot;&gt;&lt;span&gt;#&lt;/span&gt;&lt;/a&gt;Kusto Detective - Detective 2 - Bank Robbery&lt;/h1&gt;&lt;h2 id=&quot;introduction&quot; style=&quot;position:relative&quot;&gt;&lt;a href=&quot;#introduction&quot; aria-label=&quot;introduction permalink&quot; class=&quot;heading-anchor before&quot;&gt;&lt;span&gt;#&lt;/span&gt;&lt;/a&gt;Introduction&lt;/h2&gt;&lt;p&gt;Moving on, we are in for a bit more tweakers. I spent a whole lot of time on this one, and I tried a lot of different approaches and queries. Minor tweaks made these queries apart from each other, until I noticed a solution that could be a lot easier than my first thoughts. Lets go through some of them. Ingest the data and get ready!&lt;/p&gt;&lt;h1 id=&quot;the-story&quot; style=&quot;position:relative&quot;&gt;&lt;a href=&quot;#the-story&quot; aria-label=&quot;the story permalink&quot; class=&quot;heading-anchor before&quot;&gt;&lt;span&gt;#&lt;/span&gt;&lt;/a&gt;The story&lt;/h1&gt;&lt;p&gt;&lt;span class=&quot;gatsby-resp-image-wrapper&quot; style=&quot;position:relative;display:block;margin-left:auto;margin-right:auto;max-width:1269px&quot;&gt;
      &lt;span class=&quot;gatsby-resp-image-background-image&quot; style=&quot;padding-bottom:64.77541371158392%;position:relative;bottom:0;left:0;background-image:url(&amp;#x27;data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAANCAIAAAAmMtkJAAAACXBIWXMAAA7DAAAOwwHHb6hkAAACS0lEQVQoz13M2W7TUBAGYD9BlTZpksbxvm/xOV7i9XiNlzS26paGbghBQQjBFbz/BUoKqDD69Gv0azRY0d0W/d4vdiDamOEBiH4zwxKEG3BsYFxZqIZx9Rq2vXnc3T51+3fNcN8OD81wf1jePNbDXdZe+8Wlk9RO2qyCwgwK6OcgKGBYgqBYBTmG6qu0HZLmKqmv4k0fb/romGG5i8ouKvujzvRzzUmi/HK/f+qHOy9tDTfFqu42Krsg2/pZa0elE1cuqq2wdOKNE1fAz00vA34O/NyKSjsoP3//dv3wZDiJAkNsePu+2F7n7ZBUfVzu4rJDVR+Vu6jYoU23RrUTb9ZJrTuou3n48Pz18dMXxXQXpMSqNpZWfVzsUNlF+WWQth6qPVQHSROkTZA0HqrDbBtm7TquNBj5qLK9DKdVRgKsbGHQy+A61a1IhaFho5WNTDdRQSBorqi7or4+ciV9zakWJZiUCFjFYiTISBDTVtCAjqybvChzvMgKEsMJFMMTJENQ7B8cQbEkzZE0TzG8YVqGCSV1hQmyoJqqZiqyJoqKKMgCLwqCdMByLEWRFPl3iBfHkiBIGtOAo5kOcDzbhbYFoaE5wDA1Bega0JSVIhqKaOmKLos0RVHk6180RjAKQcsko+AEf4Gz8wWDEzwn6PiSw5ccy2kkLS1JASf42YL5DzaZMi9OJ9RoTJ6cLc/O6SWtTXF+Roi0sJrj4mTGTubsaEyeTv6BnZ0TL8bHnOPcbMGcnMy0DDU/n+sfHznLGo0uxlNyPD3cvPYLEGqVEGqSLPEAAAAASUVORK5CYII=&amp;#x27;);background-size:cover;display:block&quot;&gt;&lt;/span&gt;
  &lt;img class=&quot;gatsby-resp-image-image&quot; alt=&quot;20221121122344&quot; title=&quot;20221121122344&quot; src=&quot;/static/99c6d1bff3ded34731f7ec5fc9249b54/6cbfb/20221121122344.png&quot; srcSet=&quot;/static/99c6d1bff3ded34731f7ec5fc9249b54/6cbfb/20221121122344.png 1269w&quot; sizes=&quot;(max-width: 1269px) 100vw, 1269px&quot; style=&quot;width:100%;height:100%;margin:0;vertical-align:middle;position:absolute;top:0;left:0&quot; loading=&quot;lazy&quot; decoding=&quot;async&quot;/&gt;
    &lt;/span&gt;  &lt;/p&gt;&lt;p&gt;As you can see from the screenshot, we are dealing with a bank robbery. We are going to use our investigational skills as well as KQL skills to find out where have the robbers stopped, where can the police find them now? Every timestamp from the database are registered passings, which means that the registrations are moving cars. If you follow one car, and suddenly there are no more entries, it has stopped. Which is backed by the first hint that is provided:&lt;/p&gt;&lt;h2 id=&quot;hint-1&quot; style=&quot;position:relative&quot;&gt;&lt;a href=&quot;#hint-1&quot; aria-label=&quot;hint 1 permalink&quot; class=&quot;heading-anchor before&quot;&gt;&lt;span&gt;#&lt;/span&gt;&lt;/a&gt;Hint 1&lt;/h2&gt;&lt;p&gt;&lt;span class=&quot;gatsby-resp-image-wrapper&quot; style=&quot;position:relative;display:block;margin-left:auto;margin-right:auto;max-width:1207px&quot;&gt;
      &lt;span class=&quot;gatsby-resp-image-background-image&quot; style=&quot;padding-bottom:13.338856669428335%;position:relative;bottom:0;left:0;background-image:url(&amp;#x27;data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAADCAIAAAAcOLh5AAAACXBIWXMAAA7DAAAOwwHHb6hkAAAAW0lEQVQI12Nw8Aqyc/c3tHbWt3QiFTFYOnpbOHgZ27gaWbkYWbsaW4MYxhAGGCGzIWoMYQoYTG3dzOzcze09zOzczezcLRw8IQxzew9zMBeCIIJwlRYOnpYOngD0tCp9Bjp7TQAAAABJRU5ErkJggg==&amp;#x27;);background-size:cover;display:block&quot;&gt;&lt;/span&gt;
  &lt;img class=&quot;gatsby-resp-image-image&quot; alt=&quot;20221121133534&quot; title=&quot;20221121133534&quot; src=&quot;/static/91f3e7dfc43720231d4385fd7537d902/302da/20221121133534.png&quot; srcSet=&quot;/static/91f3e7dfc43720231d4385fd7537d902/302da/20221121133534.png 1207w&quot; sizes=&quot;(max-width: 1207px) 100vw, 1207px&quot; style=&quot;width:100%;height:100%;margin:0;vertical-align:middle;position:absolute;top:0;left:0&quot; loading=&quot;lazy&quot; decoding=&quot;async&quot;/&gt;
    &lt;/span&gt;  &lt;/p&gt;&lt;p&gt;My initial thought for this challenge was to make a list of every car that is registered anywhere, create a variable that excludes cars that moved while the robbery was going on and adding in a variable where these cars has passed the correct street and avenue at any time (just to keep it more open). Starting wide, and narrowing it down is an approach I use a lot.&lt;/p&gt;&lt;p&gt;This idea is actually backed by the second hint in this task:&lt;/p&gt;&lt;h2 id=&quot;hint-2&quot; style=&quot;position:relative&quot;&gt;&lt;a href=&quot;#hint-2&quot; aria-label=&quot;hint 2 permalink&quot; class=&quot;heading-anchor before&quot;&gt;&lt;span&gt;#&lt;/span&gt;&lt;/a&gt;Hint 2&lt;/h2&gt;&lt;p&gt;&lt;span class=&quot;gatsby-resp-image-wrapper&quot; style=&quot;position:relative;display:block;margin-left:auto;margin-right:auto;max-width:1266px&quot;&gt;
      &lt;span class=&quot;gatsby-resp-image-background-image&quot; style=&quot;padding-bottom:14.296998420221168%;position:relative;bottom:0;left:0;background-image:url(&amp;#x27;data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAADCAIAAAAcOLh5AAAACXBIWXMAAA7DAAAOwwHHb6hkAAAAa0lEQVQI143LSw6DMAwEUG7UOGklPG6h2OajgIR6/8tUCYg10luM7XHzXX7dvAfYg/UEuyPAGtgGXV/d/PxU7ynKGOFRnGAkJZzgAdc4UnkeMg9ZdIVmaG77hdgiLJW2HYg1wZM4sR6nVJd/AlIqBXQAvLIAAAAASUVORK5CYII=&amp;#x27;);background-size:cover;display:block&quot;&gt;&lt;/span&gt;
  &lt;img class=&quot;gatsby-resp-image-image&quot; alt=&quot;20221121133636&quot; title=&quot;20221121133636&quot; src=&quot;/static/aa6f874b9d4e6739189b35c17fe1128e/03d4c/20221121133636.png&quot; srcSet=&quot;/static/aa6f874b9d4e6739189b35c17fe1128e/03d4c/20221121133636.png 1266w&quot; sizes=&quot;(max-width: 1266px) 100vw, 1266px&quot; style=&quot;width:100%;height:100%;margin:0;vertical-align:middle;position:absolute;top:0;left:0&quot; loading=&quot;lazy&quot; decoding=&quot;async&quot;/&gt;
    &lt;/span&gt;  &lt;/p&gt;&lt;p&gt;This idea makes us enter into the creation of variables, kinda like a temporary list to check values against either for exclusion or inclusion moving forward in a pipe. To create a variable we use the &lt;code class=&quot;language-text&quot;&gt;let&lt;/code&gt; keyword to initialize this. Once the logic for the variable is done, you need to use &lt;code class=&quot;language-text&quot;&gt;;&lt;/code&gt; to finish it up. “Hey, I’m done here, and if you call me I know where to stop”. We will create a variable further down.&lt;/p&gt;&lt;p&gt;Unfortunelately, this didnt leave me anywhere. I tried to alter and maxing out seconds for each end of the time-series. No luck, although a valid thought. The solution I ended up with was based on the idea that the cars that the robbers used had to be parked at the &lt;code class=&quot;language-text&quot;&gt;Street&lt;/code&gt; and &lt;code class=&quot;language-text&quot;&gt;Ave&lt;/code&gt;nue of the robbery when the robbery was taking place. I used this idea to create a variable that stored every car in the correct location at the absoulte end time of the robbery. &lt;/p&gt;&lt;p&gt;Because the challenge states that “Here is a precice order of events:” which means that they left the bank at the earliest 08:31:00 and they were all gone before the police arrived at 08:40:00. Try running this:&lt;/p&gt;&lt;div class=&quot;gatsby-highlight&quot; data-language=&quot;sql&quot;&gt;&lt;pre class=&quot;language-sql&quot;&gt;&lt;code class=&quot;language-sql&quot;&gt;Traffic
&lt;span class=&quot;token operator&quot;&gt;|&lt;/span&gt; &lt;span class=&quot;token keyword&quot;&gt;where&lt;/span&gt; &lt;span class=&quot;token keyword&quot;&gt;Timestamp&lt;/span&gt; &lt;span class=&quot;token operator&quot;&gt;between&lt;/span&gt; &lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;token keyword&quot;&gt;datetime&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;token number&quot;&gt;2022&lt;/span&gt;&lt;span class=&quot;token operator&quot;&gt;-&lt;/span&gt;&lt;span class=&quot;token number&quot;&gt;10&lt;/span&gt;&lt;span class=&quot;token operator&quot;&gt;-&lt;/span&gt;&lt;span class=&quot;token number&quot;&gt;16&lt;/span&gt; &lt;span class=&quot;token number&quot;&gt;08&lt;/span&gt;:&lt;span class=&quot;token number&quot;&gt;31&lt;/span&gt;:&lt;span class=&quot;token number&quot;&gt;00&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt; &lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt; &lt;span class=&quot;token keyword&quot;&gt;datetime&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;token number&quot;&gt;2022&lt;/span&gt;&lt;span class=&quot;token operator&quot;&gt;-&lt;/span&gt;&lt;span class=&quot;token number&quot;&gt;10&lt;/span&gt;&lt;span class=&quot;token operator&quot;&gt;-&lt;/span&gt;&lt;span class=&quot;token number&quot;&gt;16&lt;/span&gt; &lt;span class=&quot;token number&quot;&gt;08&lt;/span&gt;:&lt;span class=&quot;token number&quot;&gt;40&lt;/span&gt;:&lt;span class=&quot;token number&quot;&gt;00&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt;
&lt;span class=&quot;token operator&quot;&gt;|&lt;/span&gt; summarize arg_min&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;token keyword&quot;&gt;Timestamp&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;token operator&quot;&gt;*&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt; &lt;span class=&quot;token keyword&quot;&gt;by&lt;/span&gt; VIN
&lt;span class=&quot;token operator&quot;&gt;|&lt;/span&gt; &lt;span class=&quot;token keyword&quot;&gt;where&lt;/span&gt; Ave &lt;span class=&quot;token operator&quot;&gt;=&lt;/span&gt;&lt;span class=&quot;token operator&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;token number&quot;&gt;157&lt;/span&gt;
&lt;span class=&quot;token operator&quot;&gt;|&lt;/span&gt; &lt;span class=&quot;token keyword&quot;&gt;where&lt;/span&gt; Street &lt;span class=&quot;token operator&quot;&gt;=&lt;/span&gt;&lt;span class=&quot;token operator&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;token number&quot;&gt;148&lt;/span&gt;
&lt;span class=&quot;token operator&quot;&gt;|&lt;/span&gt;summarize make_list&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;VIN&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;p&gt;Let’s break it down. First we are asking the Traffic database for data before we check for timestamps between the two datetime types. The &lt;code class=&quot;language-text&quot;&gt;..&lt;/code&gt; in between the &lt;code class=&quot;language-text&quot;&gt;between&lt;/code&gt; keyword is called an ellipsis and often used to represent a range in programming languages. The next move is essential. We are looking for the &lt;strong&gt;&lt;em&gt;first&lt;/em&gt;&lt;/strong&gt; entry of these vehicles and then seeing which cars are at the correct location. If we had used a single timestamp, we may have missed it as it is based on moving vehicles. Then it would have been more guesswork. We &lt;strong&gt;&lt;em&gt;know&lt;/em&gt;&lt;/strong&gt; that the first place the robbers’ cars are in this timegap is at the banks location. The star &lt;code class=&quot;language-text&quot;&gt;*&lt;/code&gt; inside &lt;code class=&quot;language-text&quot;&gt;arg_min&lt;/code&gt; means that we want to send all columns through the pipe and &lt;code class=&quot;language-text&quot;&gt;arg_min&lt;/code&gt; tells it to send the lowest (earliest) entry &lt;code class=&quot;language-text&quot;&gt;by&lt;/code&gt; &lt;code class=&quot;language-text&quot;&gt;VIN&lt;/code&gt; (read this as a normal sentence - ahh, The beauty of KQL). Next up, we are making the results into a list by summarizing it. Lets make these findings into a variable:&lt;/p&gt;&lt;div class=&quot;gatsby-highlight&quot; data-language=&quot;sql&quot;&gt;&lt;pre class=&quot;language-sql&quot;&gt;&lt;code class=&quot;language-sql&quot;&gt;let &lt;span class=&quot;token keyword&quot;&gt;after&lt;/span&gt; &lt;span class=&quot;token operator&quot;&gt;=&lt;/span&gt; Traffic
&lt;span class=&quot;token operator&quot;&gt;|&lt;/span&gt; &lt;span class=&quot;token keyword&quot;&gt;where&lt;/span&gt; &lt;span class=&quot;token keyword&quot;&gt;Timestamp&lt;/span&gt; &lt;span class=&quot;token operator&quot;&gt;between&lt;/span&gt; &lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;token keyword&quot;&gt;datetime&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;token number&quot;&gt;2022&lt;/span&gt;&lt;span class=&quot;token operator&quot;&gt;-&lt;/span&gt;&lt;span class=&quot;token number&quot;&gt;10&lt;/span&gt;&lt;span class=&quot;token operator&quot;&gt;-&lt;/span&gt;&lt;span class=&quot;token number&quot;&gt;16&lt;/span&gt; &lt;span class=&quot;token number&quot;&gt;08&lt;/span&gt;:&lt;span class=&quot;token number&quot;&gt;31&lt;/span&gt;:&lt;span class=&quot;token number&quot;&gt;00&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt; &lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt; &lt;span class=&quot;token keyword&quot;&gt;datetime&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;token number&quot;&gt;2022&lt;/span&gt;&lt;span class=&quot;token operator&quot;&gt;-&lt;/span&gt;&lt;span class=&quot;token number&quot;&gt;10&lt;/span&gt;&lt;span class=&quot;token operator&quot;&gt;-&lt;/span&gt;&lt;span class=&quot;token number&quot;&gt;16&lt;/span&gt; &lt;span class=&quot;token number&quot;&gt;08&lt;/span&gt;:&lt;span class=&quot;token number&quot;&gt;40&lt;/span&gt;:&lt;span class=&quot;token number&quot;&gt;00&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt;
&lt;span class=&quot;token operator&quot;&gt;|&lt;/span&gt; summarize arg_min&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;token keyword&quot;&gt;Timestamp&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;token operator&quot;&gt;*&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt; &lt;span class=&quot;token keyword&quot;&gt;by&lt;/span&gt; VIN
&lt;span class=&quot;token operator&quot;&gt;|&lt;/span&gt; &lt;span class=&quot;token keyword&quot;&gt;where&lt;/span&gt; Ave &lt;span class=&quot;token operator&quot;&gt;=&lt;/span&gt;&lt;span class=&quot;token operator&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;token number&quot;&gt;157&lt;/span&gt;
&lt;span class=&quot;token operator&quot;&gt;|&lt;/span&gt; &lt;span class=&quot;token keyword&quot;&gt;where&lt;/span&gt; Street &lt;span class=&quot;token operator&quot;&gt;=&lt;/span&gt;&lt;span class=&quot;token operator&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;token number&quot;&gt;148&lt;/span&gt;
&lt;span class=&quot;token operator&quot;&gt;|&lt;/span&gt; summarize make_list&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;VIN&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;;&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;p&gt;Next up is pretty straight forward. We are doing some similar action, but instead of looking in a timestamp sequence where cars are first located, we are looking at the end - where they are last registered with &lt;code class=&quot;language-text&quot;&gt;arg_max&lt;/code&gt; and summarize it by &lt;code class=&quot;language-text&quot;&gt;VIN&lt;/code&gt; before we are checking the cars towards the list we created which only had cars at the right location at the right time.&lt;/p&gt;&lt;div class=&quot;gatsby-highlight&quot; data-language=&quot;sql&quot;&gt;&lt;pre class=&quot;language-sql&quot;&gt;&lt;code class=&quot;language-sql&quot;&gt;Traffic
&lt;span class=&quot;token operator&quot;&gt;|&lt;/span&gt; summarize arg_max&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;token keyword&quot;&gt;Timestamp&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;token operator&quot;&gt;*&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt; &lt;span class=&quot;token keyword&quot;&gt;by&lt;/span&gt; VIN
&lt;span class=&quot;token operator&quot;&gt;|&lt;/span&gt; &lt;span class=&quot;token keyword&quot;&gt;where&lt;/span&gt; VIN &lt;span class=&quot;token operator&quot;&gt;in&lt;/span&gt; &lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;token keyword&quot;&gt;after&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;p&gt;Concatenate these two queries and run it. There you have your answer - the &lt;code class=&quot;language-text&quot;&gt;Ave&lt;/code&gt; and &lt;code class=&quot;language-text&quot;&gt;Street&lt;/code&gt; where there are three equal entries. If we were to change the datetime between in the variable to start during or early in the robbery, the list would have been bigger, and there would have been more to look through. So, based on the “preciseness” of the data, this felt the most tuned to get a quick answer. &lt;/p&gt;&lt;h2 id=&quot;hint-3&quot; style=&quot;position:relative&quot;&gt;&lt;a href=&quot;#hint-3&quot; aria-label=&quot;hint 3 permalink&quot; class=&quot;heading-anchor before&quot;&gt;&lt;span&gt;#&lt;/span&gt;&lt;/a&gt;Hint 3&lt;/h2&gt;&lt;p&gt;&lt;span class=&quot;gatsby-resp-image-wrapper&quot; style=&quot;position:relative;display:block;margin-left:auto;margin-right:auto;max-width:902px&quot;&gt;
      &lt;span class=&quot;gatsby-resp-image-background-image&quot; style=&quot;padding-bottom:18.070953436807095%;position:relative;bottom:0;left:0;background-image:url(&amp;#x27;data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAAECAIAAAABPYjBAAAACXBIWXMAAA7DAAAOwwHHb6hkAAAAfUlEQVQI143JaQrDIBCGYS/UNW6x6hibOGMDKfb+hymDpcu/wsvHM4wAalBbuj0U0GHMR3f9P5GohbJFvA9+2Zm0/2n6wPZz+v6Ks5uHy3Jys/SFC0VxqANKz5ChdKiOlznh8jqmqgFtqgaIN1XeyHZ5tUAWSEc0Ec3bjPoEyc442aD84VsAAAAASUVORK5CYII=&amp;#x27;);background-size:cover;display:block&quot;&gt;&lt;/span&gt;
  &lt;img class=&quot;gatsby-resp-image-image&quot; alt=&quot;20221121133934&quot; title=&quot;20221121133934&quot; src=&quot;/static/48dbb0f6edcf7df2410abea10a7691ac/8d021/20221121133934.png&quot; srcSet=&quot;/static/48dbb0f6edcf7df2410abea10a7691ac/8d021/20221121133934.png 902w&quot; sizes=&quot;(max-width: 902px) 100vw, 902px&quot; style=&quot;width:100%;height:100%;margin:0;vertical-align:middle;position:absolute;top:0;left:0&quot; loading=&quot;lazy&quot; decoding=&quot;async&quot;/&gt;
    &lt;/span&gt;
As we are dealing with data in a challenge and we need to pivot between lots of entries - finding that ONE car seemed like a weird thing. This is why I early on assumed that we are dealing with multiple cars. Because, when they finally stop at their hiding spot - the number will stand out. If it was one car, it would have been pretty hard to differentiate.&lt;/p&gt;&lt;h1 id=&quot;bonus&quot; style=&quot;position:relative&quot;&gt;&lt;a href=&quot;#bonus&quot; aria-label=&quot;bonus permalink&quot; class=&quot;heading-anchor before&quot;&gt;&lt;span&gt;#&lt;/span&gt;&lt;/a&gt;Bonus&lt;/h1&gt;&lt;p&gt;I found &lt;a href=&quot;https://www.opsman.co.za/kusto-detective-agency-challenge-3-bank-robbery/&quot; target=&quot;_blank&quot; rel=&quot;noreferrer&quot;&gt;this&lt;/a&gt; walkthrough very interesting when deciding on writing this challenge. It shows the power of scatterchart rendering -  you may actually see the whole path of the cars involved considering the layout of the town based on a grid system. Here are the robbers’ path from the end of the robbery to their end destination:&lt;/p&gt;&lt;div class=&quot;gatsby-highlight&quot; data-language=&quot;sql&quot;&gt;&lt;pre class=&quot;language-sql&quot;&gt;&lt;code class=&quot;language-sql&quot;&gt;Traffic
&lt;span class=&quot;token operator&quot;&gt;|&lt;/span&gt; &lt;span class=&quot;token keyword&quot;&gt;where&lt;/span&gt; VIN &lt;span class=&quot;token operator&quot;&gt;in&lt;/span&gt; &lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;token string&quot;&gt;&amp;quot;XC2952A7FB&amp;quot;&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;token string&quot;&gt;&amp;quot;RI8E6C4294&amp;quot;&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;token string&quot;&gt;&amp;quot;CXDE148D63&amp;quot;&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt;
&lt;span class=&quot;token operator&quot;&gt;|&lt;/span&gt; summarize Ave &lt;span class=&quot;token operator&quot;&gt;=&lt;/span&gt; make_list&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;Ave&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;,&lt;/span&gt; Street &lt;span class=&quot;token operator&quot;&gt;=&lt;/span&gt; make_list&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;Street&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt; &lt;span class=&quot;token keyword&quot;&gt;by&lt;/span&gt; VIN
&lt;span class=&quot;token operator&quot;&gt;|&lt;/span&gt; render scatterchart &lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;p&gt;&lt;span class=&quot;gatsby-resp-image-wrapper&quot; style=&quot;position:relative;display:block;margin-left:auto;margin-right:auto;max-width:1501px&quot;&gt;
      &lt;span class=&quot;gatsby-resp-image-background-image&quot; style=&quot;padding-bottom:36.042638241172554%;position:relative;bottom:0;left:0;background-image:url(&amp;#x27;data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAAHCAIAAACHqfpvAAAACXBIWXMAAA7DAAAOwwHHb6hkAAABDklEQVQY002Qy2rDMBBF/f8/1GWhUAqFbAtt44Y8nNhWLFmypJE0M1JxHKc9zGJWl3Nv5SEgIjExcyklr/D6lHK7nBExpIBIEIIYlHO+isiXzjb7a3PSh70imiP+syTMISvG2J+6FkJUakq7kzb91cb8Xct+8D7y5FGapG2aPFEuDxe+u9ypIJEavTq3RtvdXn3V6n1z3tbybdM+vTTPr8fttlcmXnUadJImtUOMiRehaqlaKBWnu0PXXKwQrpSSMLcqWWB56fWgDbC2yQGdBFigW51SEfN9lghdffz8OE9S5wjonVGTHt3YCSO1DXOXyaP1xKt59TcvEQfIMVAABCCAHOfj4MtiV/Iy4KPzL5vTk8dD7vVRAAAAAElFTkSuQmCC&amp;#x27;);background-size:cover;display:block&quot;&gt;&lt;/span&gt;
  &lt;img class=&quot;gatsby-resp-image-image&quot; alt=&quot;20221125000248&quot; title=&quot;20221125000248&quot; src=&quot;/static/6ae760a43a235c842285a9e4bbd95d6a/aca32/20221125000248.png&quot; srcSet=&quot;/static/6ae760a43a235c842285a9e4bbd95d6a/aca32/20221125000248.png 1501w&quot; sizes=&quot;(max-width: 1501px) 100vw, 1501px&quot; style=&quot;width:100%;height:100%;margin:0;vertical-align:middle;position:absolute;top:0;left:0&quot; loading=&quot;lazy&quot; decoding=&quot;async&quot;/&gt;
    &lt;/span&gt;  &lt;/p&gt;&lt;h1 id=&quot;badge-time&quot; style=&quot;position:relative&quot;&gt;&lt;a href=&quot;#badge-time&quot; aria-label=&quot;badge time permalink&quot; class=&quot;heading-anchor before&quot;&gt;&lt;span&gt;#&lt;/span&gt;&lt;/a&gt;Badge-time&lt;/h1&gt;&lt;p&gt;&lt;span class=&quot;gatsby-resp-image-wrapper&quot; style=&quot;position:relative;display:block;margin-left:auto;margin-right:auto;max-width:190px&quot;&gt;
      &lt;span class=&quot;gatsby-resp-image-background-image&quot; style=&quot;padding-bottom:120.52631578947368%;position:relative;bottom:0;left:0;background-image:url(&amp;#x27;data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAAYCAIAAAB1KUohAAAACXBIWXMAAA7DAAAOwwHHb6hkAAAEaklEQVQ4y2WQaXPaZhSF9Sc6/ZY2SeMsGGMImM1GSIhFQoAQYhEItCBAG6DNFpvjTIdkpukkaZ04dVwvidP0d3YEaeq2M8+HO2fOec99LyBqtotqdVVLUExO0jnZ4GWdl3ReNrqq5SoreMngZUNYOQdjp0TzgDV7ak2P7MWzV8e/PX/55uL689nl9dnVH2/fX56cXS1/ev3r6eW71fz27MP7q0/LF69059B5smxwEmBMn+qTI2vx/OUvJ69Ozs+uro9Pz0/OPrx5f3F8+vuTZz+/Pb+++Pjn+cfPx6eX7y4+Ll+8Hh0c7h8u65wEDO350J5r1kyz55o9k42JbEwUa6aaU9mYuIruSIYj6Y5sOKo11SzXbDhPKKYHoJXWTTCKwSgmRzZX0NkyvRJbeVf/lw1ESQAp1v6hVIMLVQinMuVGod4hmnyJ5lCqlSq64k1nulTfzZSAdKm+JkM0kGINrzJsX5PGB6o1He27P1LMiaia1baIrG1/m3ezN8KpQpVqi7IxHVgL1V4o1pzXDnrjiWovZPtQMueCrOfK9Lr2S3i9BoxTFNPVDo6aNMOiIM/xPMuNOErts3y3LzTK7SIijiaiZq1r0qV6PFMEVskqVmmp1ozh+vzew0roHgN6RTTYwnY1GukVgkT0gYx4ulS+b8wYUYFxKkOsw4UqnK+wg6EwnrJwoBC4982dwCPPdjrqTwS8qcdbYND/7e3tjQf+o5KXptuqvcAqTaRQjacLAIxTuTItjfdla9ZpthrhDY/H/+ChDwt6dCKKJ8OhTU8iFMiFfaMKzCnW0J7VuQGMU24YwshSg1UMRzUcQbWZ3U0uG9SoXR28/WGM/CiA9T2PiIWUjEdoVt1bGgfcYIQUqjEEB0C0TLYExZzI5pTluq3Ixl7ocQHaaYTvLZtxFNypJXw1OFiIbA5rGX7oqKYjKDpSrEVTOADmiDLNubWjiZBPJL0bt+5uRbyeTDzME4nq3uZ3t72JWMTnC45QP8v3FHPKSW5zFM4DSbSMU4xqOLxsdEBfLOATU15h94dlK351WJPxbRbeoqFANBRkQK/E1CRzznQVOF+JpfIAhJIIXu1rpqDut5Pbucg2Et+5dceLhrfsFiLgoT7i5dJBKB7m4a1+pymbi0qTh1AyBucBGKskc+VGp69YC4bIU/5bj+57tj3ePZ8HjgYTO/6N+97v73pSgYd6Mcz2R9JoP12owVglCq3CEEqm8lRPMXtDhyHwHhIQs0ERjQilxLCdlYiYmAvIBNhm+5o1JxscmCUQvOqGIZSEUBLMEjmCHmi2ZMxZ2WYHOtdV+iwtiiLbG7EDg1cnmjlvdPpgrgyhJIxVIkkMgHKkC0qCmVK2WGN7mqo7qjFRjImoHgxG7qwZk8HQLjf4ZJZY+7+Ek7nyVxKZEpglcIpp8hIvjUXF6Mp6p6dRrS6CV/fSxa9OCCXDIPpl7TUwSkKrJxKZEpRzD+GeM+sqyVwZvul0m1EgmkT/C4Sth8j/lK/EIOxxDPkLIBvwSmkszSwAAAAASUVORK5CYII=&amp;#x27;);background-size:cover;display:block&quot;&gt;&lt;/span&gt;
  &lt;img class=&quot;gatsby-resp-image-image&quot; alt=&quot;20221121134205&quot; title=&quot;20221121134205&quot; src=&quot;/static/73de99198fe8e339d547a9618458343a/08678/20221121134205.png&quot; srcSet=&quot;/static/73de99198fe8e339d547a9618458343a/08678/20221121134205.png 190w&quot; sizes=&quot;(max-width: 190px) 100vw, 190px&quot; style=&quot;width:100%;height:100%;margin:0;vertical-align:middle;position:absolute;top:0;left:0&quot; loading=&quot;lazy&quot; decoding=&quot;async&quot;/&gt;
    &lt;/span&gt;&lt;br/&gt;
Good job! Did you learn anything new? Please let me know, I’d love to hear about it.&lt;/p&gt;</content:encoded><tags>KQL,Azure Data Explorer,Data Science</tags><featuredImage>https://blog.amestofortytwo.com/static/b36d2be9cd3557ae820f5a6491d5c27b/badge.png</featuredImage></item><item><title><![CDATA[Kusto Detective - Detective 3 - Ready to play?]]></title><description><![CDATA[Walkthrough of Kusto Detective Agency series]]></description><link>https://blog.amestofortytwo.com/kusto-detective-agency5</link><guid isPermaLink="false">https://blog.amestofortytwo.com/kusto-detective-agency5</guid><category><![CDATA[KQL]]></category><category><![CDATA[Azure Data Explorer]]></category><category><![CDATA[Data Science]]></category><pubDate>Sun, 11 Dec 2022 00:00:00 GMT</pubDate><content:encoded>&lt;h1 id=&quot;kusto-detective---detective-3---ready-to-play&quot; style=&quot;position:relative&quot;&gt;&lt;a href=&quot;#kusto-detective---detective-3---ready-to-play&quot; aria-label=&quot;kusto detective   detective 3   ready to play permalink&quot; class=&quot;heading-anchor before&quot;&gt;&lt;span&gt;#&lt;/span&gt;&lt;/a&gt;Kusto Detective - Detective 3 - Ready to play?&lt;/h1&gt;&lt;h2 id=&quot;introduction&quot; style=&quot;position:relative&quot;&gt;&lt;a href=&quot;#introduction&quot; aria-label=&quot;introduction permalink&quot; class=&quot;heading-anchor before&quot;&gt;&lt;span&gt;#&lt;/span&gt;&lt;/a&gt;Introduction&lt;/h2&gt;&lt;p&gt;For this challenge, we are not provided much details as of yet. No story other than some theory on special prime numbers. Where will this take us? I personally love these kind of challenges, where the opening is wide open, yet pretty narrow.&lt;/p&gt;&lt;h1 id=&quot;the-story&quot; style=&quot;position:relative&quot;&gt;&lt;a href=&quot;#the-story&quot; aria-label=&quot;the story permalink&quot; class=&quot;heading-anchor before&quot;&gt;&lt;span&gt;#&lt;/span&gt;&lt;/a&gt;The story&lt;/h1&gt;&lt;p&gt;&lt;span class=&quot;gatsby-resp-image-wrapper&quot; style=&quot;position:relative;display:block;margin-left:auto;margin-right:auto;max-width:1267px&quot;&gt;
      &lt;span class=&quot;gatsby-resp-image-background-image&quot; style=&quot;padding-bottom:45.54064719810576%;position:relative;bottom:0;left:0;background-image:url(&amp;#x27;data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAAJCAIAAAC9o5sfAAAACXBIWXMAAA7DAAAOwwHHb6hkAAABkElEQVQoz1XL7W6bMBgFYG6iStWE7+AEMDYmAWzABuxSEiDdtP3c1Ezapkm9l97Bdq9Twhpp0qOj90jv0Zrhkxw/MzlEeYNYe0H/g5m8KOZUcakuWSjMpMbaseqey8cTkxOVY6Gm6z2WairVqVRTXh9T0UdZA1MRJFVIqijhYVLBVGii7pUc2vYg5VHJQcpjp8ZHNYimr5sDr3vKZEZbWsgAs93T2H4/y5/fsvG0RUzLyq4UB8Z7xvuUqTityVWYVAGp4I7jTMR5DffcBkR8+Xr+83b+/aZ+/bAB0Yp2FN2HuvvImuecT1RMKFV+LELSoH2TUEloG8SFBzNnu/OibJuWQVYBnLv+TotTAUkRxDQkLErKIKb2BpseMgGyALY22AToWrF1ZXr/WABreM+9cG9viOkh3YW6G+lu5GyJ5cW6CZeGbzjRZTPP5v171VZOaLjQWEcrJ3yw/AfLX9qBuUYgoclTT7oOJLnuQtOLjPUNmqu2WHqz+9U7Hdwt7E3O1OuLej0HnN8tnPsVuH3e/AXB12z2dLVqyQAAAABJRU5ErkJggg==&amp;#x27;);background-size:cover;display:block&quot;&gt;&lt;/span&gt;
  &lt;img class=&quot;gatsby-resp-image-image&quot; alt=&quot;20221121134342&quot; title=&quot;20221121134342&quot; src=&quot;/static/d8020f67651650590fcace1e4b2228ae/abff7/20221121134342.png&quot; srcSet=&quot;/static/d8020f67651650590fcace1e4b2228ae/abff7/20221121134342.png 1267w&quot; sizes=&quot;(max-width: 1267px) 100vw, 1267px&quot; style=&quot;width:100%;height:100%;margin:0;vertical-align:middle;position:absolute;top:0;left:0&quot; loading=&quot;lazy&quot; decoding=&quot;async&quot;/&gt;
    &lt;/span&gt;  &lt;/p&gt;&lt;p&gt;This is the initial story - but we will add to it as this challenge is widening out as we progress. Read through it.&lt;/p&gt;&lt;p&gt;Although the task itself gives you the link for the data to be working with you need to make the ingestion query yourself - unless you do it manually as I provided info on in the first onboarding article of this series. Here is the ingestion query for you to try yourself:&lt;/p&gt;&lt;div class=&quot;gatsby-highlight&quot; data-language=&quot;text&quot;&gt;&lt;pre class=&quot;language-text&quot;&gt;&lt;code class=&quot;language-text&quot;&gt;.execute database script &amp;lt;|
.create-merge table Primes (Prime:int)
.ingest async into table Primes (@&amp;#x27;https://kustodetectiveagency.blob.core.windows.net/prime-numbers/prime-numbers.csv.gz&amp;#x27;)&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;h1 id=&quot;the-hunt-starts&quot; style=&quot;position:relative&quot;&gt;&lt;a href=&quot;#the-hunt-starts&quot; aria-label=&quot;the hunt starts permalink&quot; class=&quot;heading-anchor before&quot;&gt;&lt;span&gt;#&lt;/span&gt;&lt;/a&gt;The hunt starts!&lt;/h1&gt;&lt;p&gt;So, what we have until now is the link to geeks for geeks where we learn about special prime numbers and the limits are set to the addition of two neighbouring primes + 1.&lt;/p&gt;&lt;p&gt;$(p1 + p2 + 1)$&lt;/p&gt;&lt;p&gt;Let’s start with this. The way I wanted to achieve this was to join the Primes table on the table itself, but shifting it by one row, before adding columns together plus 1. I googled myself to pieces on this one - until i thought logicaly on it - i just need to get a glimpse of the next number in line. There is my keyword: &lt;strong&gt;next&lt;/strong&gt;. To use &lt;code class=&quot;language-text&quot;&gt;next()&lt;/code&gt; we also need &lt;code class=&quot;language-text&quot;&gt;serialize&lt;/code&gt; and &lt;code class=&quot;language-text&quot;&gt;extend&lt;/code&gt;. &lt;code class=&quot;language-text&quot;&gt;serialize&lt;/code&gt; - “This operator “freezes” the order of rows in an arbitrary manner.” (&lt;a href=&quot;https://learn.microsoft.com/en-us/azure/data-explorer/kusto/query/windowsfunctions#serialized-row-set&quot; target=&quot;_blank&quot; rel=&quot;noreferrer&quot;&gt;Window functions&lt;/a&gt;). Remember that order is key here, because we need the nearest neighbouring number. &lt;code class=&quot;language-text&quot;&gt;extend&lt;/code&gt; adds a column to the current table and is able to do calculation as we need.&lt;/p&gt;&lt;h3 id=&quot;hint-1&quot; style=&quot;position:relative&quot;&gt;&lt;a href=&quot;#hint-1&quot; aria-label=&quot;hint 1 permalink&quot; class=&quot;heading-anchor before&quot;&gt;&lt;span&gt;#&lt;/span&gt;&lt;/a&gt;Hint 1&lt;/h3&gt;&lt;p&gt;&lt;span class=&quot;gatsby-resp-image-wrapper&quot; style=&quot;position:relative;display:block;margin-left:auto;margin-right:auto;max-width:1218px&quot;&gt;
      &lt;span class=&quot;gatsby-resp-image-background-image&quot; style=&quot;padding-bottom:12.479474548440066%;position:relative;bottom:0;left:0;background-image:url(&amp;#x27;data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAACCAIAAADXZGvcAAAACXBIWXMAAA7DAAAOwwHHb6hkAAAAUUlEQVQI11XI3QqAIAxAYd9oQuFmP06UZJMgev+XCaWQ4Ls4HLOXi/Ve8ml9Bp/AZ/uBzv7BiGTmrVBUDIKsyNK0FheEYqVYXXin65CVumk9Hr+lHKQq7UvPAAAAAElFTkSuQmCC&amp;#x27;);background-size:cover;display:block&quot;&gt;&lt;/span&gt;
  &lt;img class=&quot;gatsby-resp-image-image&quot; alt=&quot;20221121210835&quot; title=&quot;20221121210835&quot; src=&quot;/static/cc1efd821782b9c909489a30d671756a/708e8/20221121210835.png&quot; srcSet=&quot;/static/cc1efd821782b9c909489a30d671756a/708e8/20221121210835.png 1218w&quot; sizes=&quot;(max-width: 1218px) 100vw, 1218px&quot; style=&quot;width:100%;height:100%;margin:0;vertical-align:middle;position:absolute;top:0;left:0&quot; loading=&quot;lazy&quot; decoding=&quot;async&quot;/&gt;
    &lt;/span&gt;&lt;br/&gt;
This gives us little, except knowing that we were on to the correct solution.&lt;/p&gt;&lt;div class=&quot;gatsby-highlight&quot; data-language=&quot;sql&quot;&gt;&lt;pre class=&quot;language-sql&quot;&gt;&lt;code class=&quot;language-sql&quot;&gt;Primes
&lt;span class=&quot;token operator&quot;&gt;|&lt;/span&gt; serialize 
&lt;span class=&quot;token operator&quot;&gt;|&lt;/span&gt; &lt;span class=&quot;token keyword&quot;&gt;join&lt;/span&gt; Primes &lt;span class=&quot;token keyword&quot;&gt;on&lt;/span&gt; Prime 
    &lt;span class=&quot;token operator&quot;&gt;|&lt;/span&gt; serialize
    &lt;span class=&quot;token operator&quot;&gt;|&lt;/span&gt; extend nextPrime &lt;span class=&quot;token operator&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;token keyword&quot;&gt;next&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;Prime&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt;
&lt;span class=&quot;token operator&quot;&gt;|&lt;/span&gt; extend result &lt;span class=&quot;token operator&quot;&gt;=&lt;/span&gt; nextPrime &lt;span class=&quot;token operator&quot;&gt;+&lt;/span&gt; Prime &lt;span class=&quot;token operator&quot;&gt;+&lt;/span&gt; &lt;span class=&quot;token number&quot;&gt;1&lt;/span&gt;
&lt;span class=&quot;token operator&quot;&gt;|&lt;/span&gt; &lt;span class=&quot;token keyword&quot;&gt;join&lt;/span&gt; kind&lt;span class=&quot;token operator&quot;&gt;=&lt;/span&gt;&lt;span class=&quot;token keyword&quot;&gt;inner&lt;/span&gt; Primes &lt;span class=&quot;token keyword&quot;&gt;on&lt;/span&gt; $&lt;span class=&quot;token keyword&quot;&gt;left&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;result &lt;span class=&quot;token operator&quot;&gt;=&lt;/span&gt;&lt;span class=&quot;token operator&quot;&gt;=&lt;/span&gt; $&lt;span class=&quot;token keyword&quot;&gt;right&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;Prime
&lt;span class=&quot;token operator&quot;&gt;|&lt;/span&gt; summarize maxPri &lt;span class=&quot;token operator&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;token function&quot;&gt;max&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;result&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt;
&lt;span class=&quot;token operator&quot;&gt;|&lt;/span&gt; project TheAnswer&lt;span class=&quot;token operator&quot;&gt;=&lt;/span&gt;strcat&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;token string&quot;&gt;&amp;quot;https://aka.ms/&amp;quot;&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;,&lt;/span&gt; maxPri&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;p&gt;Firstly, we ask for serialized data from Primes, before we ask for it one more time where we join those two together and extend the last table to output the &lt;code class=&quot;language-text&quot;&gt;next()&lt;/code&gt; value (shifting it once). Now, we have two columns where one row contains a &lt;code class=&quot;language-text&quot;&gt;Prime&lt;/code&gt; number and the other has the neighbouring &lt;code class=&quot;language-text&quot;&gt;nextPrime&lt;/code&gt; number. Next, we extend it once more to add another column that does the calculation according to the formula above. Then we join that &lt;code class=&quot;language-text&quot;&gt;result&lt;/code&gt; on &lt;code class=&quot;language-text&quot;&gt;Prime&lt;/code&gt;. The syntax here might be confusing. Isn’t &lt;code class=&quot;language-text&quot;&gt;inner&lt;/code&gt; default? &lt;/p&gt;&lt;p&gt;In many other languages it might be, in KQL &lt;code class=&quot;language-text&quot;&gt;innerunique&lt;/code&gt; is the default. And the difference is that inner returns all the matches from both sides and &lt;code class=&quot;language-text&quot;&gt;innerunique&lt;/code&gt; returns a row for each match of the left row with rows from the right (meaning that there are duplicate values for the left). We want &lt;code class=&quot;language-text&quot;&gt;inner&lt;/code&gt; as you can see and we can specify which columns by the syntax provided at the end of the &lt;code class=&quot;language-text&quot;&gt;join&lt;/code&gt; line. Last up, we should only get the highest number (&lt;code class=&quot;language-text&quot;&gt;max()&lt;/code&gt;) and a neat little trick to apply that number to the URL provided in the challenge text with &lt;code class=&quot;language-text&quot;&gt;strcat()&lt;/code&gt; which concatenates strings.&lt;/p&gt;&lt;p&gt;Go to the link. Then we are prompted with a raw text:&lt;/p&gt;&lt;div class=&quot;gatsby-highlight&quot; data-language=&quot;sql&quot;&gt;&lt;pre class=&quot;language-sql&quot;&gt;&lt;code class=&quot;language-sql&quot;&gt;    Well done&lt;span class=&quot;token punctuation&quot;&gt;,&lt;/span&gt; my friend&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;
    It&lt;span class=&quot;token string&quot;&gt;&amp;#x27;s time to meet. Let&amp;#x27;&lt;/span&gt;s go &lt;span class=&quot;token keyword&quot;&gt;for&lt;/span&gt; a virtual sTREEt tour&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;
    Across the Big Apple city&lt;span class=&quot;token punctuation&quot;&gt;,&lt;/span&gt; there &lt;span class=&quot;token operator&quot;&gt;is&lt;/span&gt; a special place &lt;span class=&quot;token keyword&quot;&gt;with&lt;/span&gt; Turkish Hazelnut &lt;span class=&quot;token operator&quot;&gt;and&lt;/span&gt; four Schubert Chokecherries &lt;span class=&quot;token keyword&quot;&gt;within&lt;/span&gt; &lt;span class=&quot;token number&quot;&gt;66&lt;/span&gt;&lt;span class=&quot;token operator&quot;&gt;-&lt;/span&gt;meters radius area&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;
    Go &lt;span class=&quot;token string&quot;&gt;&amp;#x27;out&amp;#x27;&lt;/span&gt; &lt;span class=&quot;token operator&quot;&gt;and&lt;/span&gt; look &lt;span class=&quot;token keyword&quot;&gt;for&lt;/span&gt; me there&lt;span class=&quot;token punctuation&quot;&gt;,&lt;/span&gt; near the smallest American Linden tree &lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;token keyword&quot;&gt;within&lt;/span&gt; the same area&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;
    Find me &lt;span class=&quot;token operator&quot;&gt;and&lt;/span&gt; the bottom line: my &lt;span class=&quot;token keyword&quot;&gt;key&lt;/span&gt; message &lt;span class=&quot;token keyword&quot;&gt;to&lt;/span&gt; you&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;

    Cheers&lt;span class=&quot;token punctuation&quot;&gt;,&lt;/span&gt;
    El Puente&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;

    PS: You know what &lt;span class=&quot;token keyword&quot;&gt;to&lt;/span&gt; &lt;span class=&quot;token keyword&quot;&gt;do&lt;/span&gt; &lt;span class=&quot;token keyword&quot;&gt;with&lt;/span&gt; the &lt;span class=&quot;token keyword&quot;&gt;following&lt;/span&gt;:

    &lt;span class=&quot;token comment&quot;&gt;----------------------------------------------------------------------------------------------&lt;/span&gt;

    &lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;token keyword&quot;&gt;execute&lt;/span&gt; &lt;span class=&quot;token keyword&quot;&gt;database&lt;/span&gt; script &lt;span class=&quot;token operator&quot;&gt;&amp;lt;&lt;/span&gt;&lt;span class=&quot;token operator&quot;&gt;|&lt;/span&gt;
    &lt;span class=&quot;token comment&quot;&gt;// The data below is from https://data.cityofnewyork.us/Environment/2015-Street-Tree-Census-Tree-Data/uvpi-gqnh &lt;/span&gt;
    &lt;span class=&quot;token comment&quot;&gt;// The size of the tree can be derived using &amp;#x27;tree_dbh&amp;#x27; (tree diameter) column.&lt;/span&gt;
    &lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;token keyword&quot;&gt;create&lt;/span&gt;&lt;span class=&quot;token operator&quot;&gt;-&lt;/span&gt;&lt;span class=&quot;token keyword&quot;&gt;merge&lt;/span&gt; &lt;span class=&quot;token keyword&quot;&gt;table&lt;/span&gt; nyc_trees 
        &lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;tree_id:&lt;span class=&quot;token keyword&quot;&gt;int&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;,&lt;/span&gt; block_id:&lt;span class=&quot;token keyword&quot;&gt;int&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;,&lt;/span&gt; created_at:&lt;span class=&quot;token keyword&quot;&gt;datetime&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;,&lt;/span&gt; tree_dbh:&lt;span class=&quot;token keyword&quot;&gt;int&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;,&lt;/span&gt; stump_diam:&lt;span class=&quot;token keyword&quot;&gt;int&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;,&lt;/span&gt; 
    curb_loc:string&lt;span class=&quot;token punctuation&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;token keyword&quot;&gt;status&lt;/span&gt;:string&lt;span class=&quot;token punctuation&quot;&gt;,&lt;/span&gt; health:string&lt;span class=&quot;token punctuation&quot;&gt;,&lt;/span&gt; spc_latin:string&lt;span class=&quot;token punctuation&quot;&gt;,&lt;/span&gt; spc_common:string&lt;span class=&quot;token punctuation&quot;&gt;,&lt;/span&gt; steward:string&lt;span class=&quot;token punctuation&quot;&gt;,&lt;/span&gt;
    guards:string&lt;span class=&quot;token punctuation&quot;&gt;,&lt;/span&gt; sidewalk:string&lt;span class=&quot;token punctuation&quot;&gt;,&lt;/span&gt; user_type:string&lt;span class=&quot;token punctuation&quot;&gt;,&lt;/span&gt; problems:string&lt;span class=&quot;token punctuation&quot;&gt;,&lt;/span&gt; root_stone:string&lt;span class=&quot;token punctuation&quot;&gt;,&lt;/span&gt; root_grate:string&lt;span class=&quot;token punctuation&quot;&gt;,&lt;/span&gt;
    root_other:string&lt;span class=&quot;token punctuation&quot;&gt;,&lt;/span&gt; trunk_wire:string&lt;span class=&quot;token punctuation&quot;&gt;,&lt;/span&gt; trnk_light:string&lt;span class=&quot;token punctuation&quot;&gt;,&lt;/span&gt; trnk_other:string&lt;span class=&quot;token punctuation&quot;&gt;,&lt;/span&gt; brch_light:string&lt;span class=&quot;token punctuation&quot;&gt;,&lt;/span&gt; brch_shoe:string&lt;span class=&quot;token punctuation&quot;&gt;,&lt;/span&gt;
    brch_other:string&lt;span class=&quot;token punctuation&quot;&gt;,&lt;/span&gt; address:string&lt;span class=&quot;token punctuation&quot;&gt;,&lt;/span&gt; postcode:&lt;span class=&quot;token keyword&quot;&gt;int&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;,&lt;/span&gt; zip_city:string&lt;span class=&quot;token punctuation&quot;&gt;,&lt;/span&gt; community_board:&lt;span class=&quot;token keyword&quot;&gt;int&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;,&lt;/span&gt; borocode:&lt;span class=&quot;token keyword&quot;&gt;int&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;,&lt;/span&gt; borough:string&lt;span class=&quot;token punctuation&quot;&gt;,&lt;/span&gt;
    cncldist:&lt;span class=&quot;token keyword&quot;&gt;int&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;,&lt;/span&gt; st_assem:&lt;span class=&quot;token keyword&quot;&gt;int&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;,&lt;/span&gt; st_senate:&lt;span class=&quot;token keyword&quot;&gt;int&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;,&lt;/span&gt; nta:string&lt;span class=&quot;token punctuation&quot;&gt;,&lt;/span&gt; nta_name:string&lt;span class=&quot;token punctuation&quot;&gt;,&lt;/span&gt; boro_ct:string&lt;span class=&quot;token punctuation&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;token punctuation&quot;&gt;[&lt;/span&gt;&lt;span class=&quot;token string&quot;&gt;&amp;#x27;state&amp;#x27;&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;]&lt;/span&gt;:string&lt;span class=&quot;token punctuation&quot;&gt;,&lt;/span&gt;
    latitude:&lt;span class=&quot;token keyword&quot;&gt;real&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;,&lt;/span&gt; longitude:&lt;span class=&quot;token keyword&quot;&gt;real&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;,&lt;/span&gt; x_sp:&lt;span class=&quot;token keyword&quot;&gt;real&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;,&lt;/span&gt; y_sp:&lt;span class=&quot;token keyword&quot;&gt;real&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;,&lt;/span&gt; council_district:&lt;span class=&quot;token keyword&quot;&gt;int&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;,&lt;/span&gt; census_tract:&lt;span class=&quot;token keyword&quot;&gt;int&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;token punctuation&quot;&gt;[&lt;/span&gt;&lt;span class=&quot;token string&quot;&gt;&amp;#x27;bin&amp;#x27;&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;]&lt;/span&gt;:&lt;span class=&quot;token keyword&quot;&gt;int&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;,&lt;/span&gt; bbl:long&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt;
    &lt;span class=&quot;token keyword&quot;&gt;with&lt;/span&gt; &lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;docstring &lt;span class=&quot;token operator&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;token string&quot;&gt;&amp;quot;2015 NYC Tree Census&amp;quot;&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt;
    &lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;ingest async &lt;span class=&quot;token keyword&quot;&gt;into&lt;/span&gt; &lt;span class=&quot;token keyword&quot;&gt;table&lt;/span&gt; nyc_trees &lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;token string&quot;&gt;&amp;#x27;https://kustodetectiveagency.blob.core.windows.net/el-puente/1.csv.gz&amp;#x27;&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt;
    &lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;ingest async &lt;span class=&quot;token keyword&quot;&gt;into&lt;/span&gt; &lt;span class=&quot;token keyword&quot;&gt;table&lt;/span&gt; nyc_trees &lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;token string&quot;&gt;&amp;#x27;https://kustodetectiveagency.blob.core.windows.net/el-puente/2.csv.gz&amp;#x27;&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt;
    &lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;ingest async &lt;span class=&quot;token keyword&quot;&gt;into&lt;/span&gt; &lt;span class=&quot;token keyword&quot;&gt;table&lt;/span&gt; nyc_trees &lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;token string&quot;&gt;&amp;#x27;https://kustodetectiveagency.blob.core.windows.net/el-puente/3.csv.gz&amp;#x27;&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt;
    &lt;span class=&quot;token comment&quot;&gt;// Get a virtual tour link with Latitude/Longitude coordinates&lt;/span&gt;
    &lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;token keyword&quot;&gt;create&lt;/span&gt;&lt;span class=&quot;token operator&quot;&gt;-&lt;/span&gt;&lt;span class=&quot;token operator&quot;&gt;or&lt;/span&gt;&lt;span class=&quot;token operator&quot;&gt;-&lt;/span&gt;&lt;span class=&quot;token keyword&quot;&gt;alter&lt;/span&gt; &lt;span class=&quot;token keyword&quot;&gt;function&lt;/span&gt; &lt;span class=&quot;token keyword&quot;&gt;with&lt;/span&gt; &lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;docstring &lt;span class=&quot;token operator&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;token string&quot;&gt;&amp;quot;Virtual tour starts here&amp;quot;&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;,&lt;/span&gt; skipvalidation &lt;span class=&quot;token operator&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;token string&quot;&gt;&amp;quot;true&amp;quot;&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt; VirtualTourLink&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;lat:&lt;span class=&quot;token keyword&quot;&gt;real&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;,&lt;/span&gt; lon:&lt;span class=&quot;token keyword&quot;&gt;real&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt; { 
        &lt;span class=&quot;token keyword&quot;&gt;print&lt;/span&gt; Link&lt;span class=&quot;token operator&quot;&gt;=&lt;/span&gt;strcat&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;token string&quot;&gt;&amp;#x27;https://www.google.com/maps/@&amp;#x27;&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;,&lt;/span&gt; lat&lt;span class=&quot;token punctuation&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;token string&quot;&gt;&amp;#x27;,&amp;#x27;&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;,&lt;/span&gt; lon&lt;span class=&quot;token punctuation&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;token string&quot;&gt;&amp;#x27;,4a,75y,32.0h,79.0t/data=!3m7!1e1!3m5!1s-1P!2e0!5s20191101T000000!7i16384!8i8192&amp;#x27;&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt;
    }
    &lt;span class=&quot;token comment&quot;&gt;// Decrypt message helper function. Usage: print Message=Decrypt(message, key)&lt;/span&gt;
    &lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;token keyword&quot;&gt;create&lt;/span&gt;&lt;span class=&quot;token operator&quot;&gt;-&lt;/span&gt;&lt;span class=&quot;token operator&quot;&gt;or&lt;/span&gt;&lt;span class=&quot;token operator&quot;&gt;-&lt;/span&gt;&lt;span class=&quot;token keyword&quot;&gt;alter&lt;/span&gt; &lt;span class=&quot;token keyword&quot;&gt;function&lt;/span&gt; &lt;span class=&quot;token keyword&quot;&gt;with&lt;/span&gt; 
    &lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;docstring &lt;span class=&quot;token operator&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;token string&quot;&gt;&amp;quot;Use this function to decrypt messages&amp;quot;&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt;
    Decrypt&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;_message:string&lt;span class=&quot;token punctuation&quot;&gt;,&lt;/span&gt; _key:string&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt; { 
        let S &lt;span class=&quot;token operator&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;_key:string&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt; {let r &lt;span class=&quot;token operator&quot;&gt;=&lt;/span&gt; array_concat&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;range&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;token number&quot;&gt;48&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;token number&quot;&gt;57&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;token number&quot;&gt;1&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;,&lt;/span&gt; range&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;token number&quot;&gt;65&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;token number&quot;&gt;92&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;token number&quot;&gt;1&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;,&lt;/span&gt; range&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;token number&quot;&gt;97&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;token number&quot;&gt;122&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;token number&quot;&gt;1&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;;&lt;/span&gt; 
        toscalar&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;token keyword&quot;&gt;print&lt;/span&gt; l&lt;span class=&quot;token operator&quot;&gt;=&lt;/span&gt;r&lt;span class=&quot;token punctuation&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;token keyword&quot;&gt;key&lt;/span&gt;&lt;span class=&quot;token operator&quot;&gt;=&lt;/span&gt;to_utf8&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;hash_sha256&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;_key&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt; &lt;span class=&quot;token operator&quot;&gt;|&lt;/span&gt; mv&lt;span class=&quot;token operator&quot;&gt;-&lt;/span&gt;expand l &lt;span class=&quot;token keyword&quot;&gt;to&lt;/span&gt; typeof&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;token keyword&quot;&gt;int&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;token keyword&quot;&gt;key&lt;/span&gt; &lt;span class=&quot;token keyword&quot;&gt;to&lt;/span&gt; typeof&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;token keyword&quot;&gt;int&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt; &lt;span class=&quot;token operator&quot;&gt;|&lt;/span&gt; &lt;span class=&quot;token keyword&quot;&gt;order&lt;/span&gt; &lt;span class=&quot;token keyword&quot;&gt;by&lt;/span&gt; &lt;span class=&quot;token keyword&quot;&gt;key&lt;/span&gt; &lt;span class=&quot;token keyword&quot;&gt;asc&lt;/span&gt; &lt;span class=&quot;token operator&quot;&gt;|&lt;/span&gt; summarize make_string&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;make_list&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;l&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt;}&lt;span class=&quot;token punctuation&quot;&gt;;&lt;/span&gt;
        let cypher1 &lt;span class=&quot;token operator&quot;&gt;=&lt;/span&gt; S&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;tolower&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;_key&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;;&lt;/span&gt; let cypher2 &lt;span class=&quot;token operator&quot;&gt;=&lt;/span&gt; S&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;toupper&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;_key&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;;&lt;/span&gt; &lt;span class=&quot;token keyword&quot;&gt;coalesce&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;base64_decode_tostring&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;translate&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;cypher1&lt;span class=&quot;token punctuation&quot;&gt;,&lt;/span&gt; cypher2&lt;span class=&quot;token punctuation&quot;&gt;,&lt;/span&gt; _message&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;token string&quot;&gt;&amp;quot;Failure: wrong key&amp;quot;&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt;
    }&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;p&gt;Ingest the whole raw message above into ADX. To keep this article a bit short based on the task length, I’m not going into to much detail as we’re moving forward. You should have created a function that appears in the left pane on ADX by the ingestion. If you haven’t, do it now as we need those functions to move forward. It will look something like this:
&lt;span class=&quot;gatsby-resp-image-wrapper&quot; style=&quot;position:relative;display:block;margin-left:auto;margin-right:auto;max-width:325px&quot;&gt;
      &lt;span class=&quot;gatsby-resp-image-background-image&quot; style=&quot;padding-bottom:53.84615384615385%;position:relative;bottom:0;left:0;background-image:url(&amp;#x27;data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAALCAIAAADwazoUAAAACXBIWXMAAA7DAAAOwwHHb6hkAAABRklEQVQoz4WQS0+DQBSF+f//wsfaxI2JiVKXJm7UCEhbngNtYWCAMjPMG2ObKDEQb77lOffcc60ek6ZpixJ2xyMmpMcneowxwZi0bTcLY1xIZQnOtNYb38uT0HXcre9tPr1g7Qdbf7vxtVbj8lgF1pCaXSfiEq9zFBZ9UtEEkriiST0gMUJqSjKPZcfKjtX9mqxiefta3ryAi4e3qyfveuVc2c7lo3Pn9avE2LE8K6dYYaPDRge1DJDaQLYuh2c3fU+Qm7UOaD9AGyAZteYs+4M17SA4U0rGUdCUB1jBwy7fZxksDoudzTj+YowZR6WUVopSSgjlnEspx6lmgrW0taprhGoAwH6XR1Gi1Mzb583GGCGEkvKUj7vuOH/2UjKsIEIIpGkGsjiK0gzkeZaEIRv4/8lKf48QYqAD55wxxjnjnGttfsxfxV5xGXU8XaYAAAAASUVORK5CYII=&amp;#x27;);background-size:cover;display:block&quot;&gt;&lt;/span&gt;
  &lt;img class=&quot;gatsby-resp-image-image&quot; alt=&quot;20221123091359&quot; title=&quot;20221123091359&quot; src=&quot;/static/9cf3889f51fa7b56420d6d87ae5ef928/e5cc6/20221123091359.png&quot; srcSet=&quot;/static/9cf3889f51fa7b56420d6d87ae5ef928/e5cc6/20221123091359.png 325w&quot; sizes=&quot;(max-width: 325px) 100vw, 325px&quot; style=&quot;width:100%;height:100%;margin:0;vertical-align:middle;position:absolute;top:0;left:0&quot; loading=&quot;lazy&quot; decoding=&quot;async&quot;/&gt;
    &lt;/span&gt;  &lt;/p&gt;&lt;h2 id=&quot;hint-2&quot; style=&quot;position:relative&quot;&gt;&lt;a href=&quot;#hint-2&quot; aria-label=&quot;hint 2 permalink&quot; class=&quot;heading-anchor before&quot;&gt;&lt;span&gt;#&lt;/span&gt;&lt;/a&gt;Hint 2&lt;/h2&gt;&lt;p&gt;&lt;span class=&quot;gatsby-resp-image-wrapper&quot; style=&quot;position:relative;display:block;margin-left:auto;margin-right:auto;max-width:539px&quot;&gt;
      &lt;span class=&quot;gatsby-resp-image-background-image&quot; style=&quot;padding-bottom:30.426716141001855%;position:relative;bottom:0;left:0;background-image:url(&amp;#x27;data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAAGCAIAAABM9SnKAAAACXBIWXMAAA7DAAAOwwHHb6hkAAAAz0lEQVQY04WLzW6DMBAG/TaVWqhxEjDY8Rr/QYGA00g0lySn3Pr+98omSD0l0hxmR9+iHbRU9UXdlXqozFDqgeoeM5Nx+xIku+/L/Xc838af23y9H+arGef3HBJaJ4V8Bq3RJ1WEWcJsxkxWPdhwR7gl3C6y4S4QZ9EfBWGqyPoTpNRkkQheT1zqMGCLaEwVpgoV8CUbL9uj7k7cHISd9naExoPzwk3Q+BDdVLdHCDNfqV53py2zb7hCH9t9uoMkEkVEF/+iiARZu0hzSHP5B6WPVLH9VmJlAAAAAElFTkSuQmCC&amp;#x27;);background-size:cover;display:block&quot;&gt;&lt;/span&gt;
  &lt;img class=&quot;gatsby-resp-image-image&quot; alt=&quot;20221121210934&quot; title=&quot;20221121210934&quot; src=&quot;/static/8652cff68194674a0c3f8a0eb312f85d/4eee8/20221121210934.png&quot; srcSet=&quot;/static/8652cff68194674a0c3f8a0eb312f85d/4eee8/20221121210934.png 539w&quot; sizes=&quot;(max-width: 539px) 100vw, 539px&quot; style=&quot;width:100%;height:100%;margin:0;vertical-align:middle;position:absolute;top:0;left:0&quot; loading=&quot;lazy&quot; decoding=&quot;async&quot;/&gt;
    &lt;/span&gt;&lt;br/&gt;
This is interesting. KQL is actually able to work with geo-data. Amazing! What does it do actually?&lt;/p&gt;&lt;p&gt;Lets dig in. It &lt;a href=&quot;https://learn.microsoft.com/en-us/azure/data-explorer/kusto/query/geo-point-to-h3cell-function&quot; target=&quot;_blank&quot; rel=&quot;noreferrer&quot;&gt;“Calculates the H3 Cell token string value for a geographic location.”&lt;/a&gt;. What is a H3 Cell token? It is a spatial grid system for geo location where the grid basically consist of hexagons (the “H” in H3). Why hexagons? Because hexagons share the same distance to all of its closest neighbours and they have the highest number of neighbours if you were to calculate only neighbours where there is an edge-share. &lt;/p&gt;&lt;p&gt;Subdivision is also key to this system, where squares are able to subdivide perfectly, hexagons are not. But the system Uber made, they subdivide one hexagon into 7 and rotate them slightly. This way they are able to map out large areas in only a handfull of hexagon shapes and also to make the shapes fit into most kind of lansdscape shapes. Read more on this topic &lt;a href=&quot;https://www.uber.com/en-NO/blog/h3/&quot; target=&quot;_blank&quot; rel=&quot;noreferrer&quot;&gt;here&lt;/a&gt;, where distortion is also (the most important) part of their solution.&lt;/p&gt;&lt;p&gt;To use this function we then need to convert the longitude and latitude to H3 values, with a cell size of 10 which is aproximate 66m as the hint states. &lt;/p&gt;&lt;div class=&quot;gatsby-highlight&quot; data-language=&quot;sql&quot;&gt;&lt;pre class=&quot;language-sql&quot;&gt;&lt;code class=&quot;language-sql&quot;&gt;let h3Tree &lt;span class=&quot;token operator&quot;&gt;=&lt;/span&gt; nyc_trees
&lt;span class=&quot;token operator&quot;&gt;|&lt;/span&gt; extend  h3Cell&lt;span class=&quot;token operator&quot;&gt;=&lt;/span&gt;geo_point_to_h3cell&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;longitude&lt;span class=&quot;token punctuation&quot;&gt;,&lt;/span&gt; latitude&lt;span class=&quot;token punctuation&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;token number&quot;&gt;10&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;;&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;p&gt;Next up we need to&lt;/p&gt;&lt;ul&gt;&lt;li&gt;minimize the output by &lt;code class=&quot;language-text&quot;&gt;project&lt;/code&gt;&lt;/li&gt;&lt;li&gt;Filter on where we have the correct amount of trees and species&lt;/li&gt;&lt;li&gt;and correlate these findings to make them grouped into a radius of 66 meters&lt;/li&gt;&lt;/ul&gt;&lt;p&gt;First and foremost I think this is most suited to put into a variable that we later can call upon. Take a look at this:&lt;/p&gt;&lt;div class=&quot;gatsby-highlight&quot; data-language=&quot;sql&quot;&gt;&lt;pre class=&quot;language-sql&quot;&gt;&lt;code class=&quot;language-sql&quot;&gt;let cells &lt;span class=&quot;token operator&quot;&gt;=&lt;/span&gt; h3Tree
&lt;span class=&quot;token operator&quot;&gt;|&lt;/span&gt; &lt;span class=&quot;token keyword&quot;&gt;where&lt;/span&gt; spc_common has_any &lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;token string&quot;&gt;&amp;quot;Schubert&amp;quot;&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;token string&quot;&gt;&amp;quot;Turkish&amp;quot;&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;token string&quot;&gt;&amp;quot;American&amp;quot;&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt;
&lt;span class=&quot;token operator&quot;&gt;|&lt;/span&gt; project h3Cell&lt;span class=&quot;token punctuation&quot;&gt;,&lt;/span&gt; spc_common
&lt;span class=&quot;token operator&quot;&gt;|&lt;/span&gt; evaluate &lt;span class=&quot;token keyword&quot;&gt;pivot&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;spc_common&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt;: &lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;h3Cell:string &lt;span class=&quot;token punctuation&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;token punctuation&quot;&gt;[&lt;/span&gt;&lt;span class=&quot;token string&quot;&gt;&amp;quot;&amp;#x27;Schubert&amp;#x27; chokecherry&amp;quot;&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;]&lt;/span&gt;:&lt;span class=&quot;token keyword&quot;&gt;int&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;token punctuation&quot;&gt;[&lt;/span&gt;&lt;span class=&quot;token string&quot;&gt;&amp;quot;Turkish hazelnut&amp;quot;&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;]&lt;/span&gt;:&lt;span class=&quot;token keyword&quot;&gt;int&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;token punctuation&quot;&gt;[&lt;/span&gt;&lt;span class=&quot;token string&quot;&gt;&amp;quot;American linden&amp;quot;&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;]&lt;/span&gt;:&lt;span class=&quot;token keyword&quot;&gt;int&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt;
&lt;span class=&quot;token operator&quot;&gt;|&lt;/span&gt; &lt;span class=&quot;token keyword&quot;&gt;where&lt;/span&gt; &lt;span class=&quot;token punctuation&quot;&gt;[&lt;/span&gt;&lt;span class=&quot;token string&quot;&gt;&amp;quot;&amp;#x27;Schubert&amp;#x27; chokecherry&amp;quot;&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;]&lt;/span&gt; &lt;span class=&quot;token operator&quot;&gt;=&lt;/span&gt;&lt;span class=&quot;token operator&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;token number&quot;&gt;4&lt;/span&gt; &lt;span class=&quot;token operator&quot;&gt;and&lt;/span&gt; &lt;span class=&quot;token punctuation&quot;&gt;[&lt;/span&gt;&lt;span class=&quot;token string&quot;&gt;&amp;quot;Turkish hazelnut&amp;quot;&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;]&lt;/span&gt; &lt;span class=&quot;token operator&quot;&gt;&amp;gt;&lt;/span&gt; &lt;span class=&quot;token number&quot;&gt;0&lt;/span&gt; &lt;span class=&quot;token operator&quot;&gt;and&lt;/span&gt; &lt;span class=&quot;token punctuation&quot;&gt;[&lt;/span&gt;&lt;span class=&quot;token string&quot;&gt;&amp;quot;American linden&amp;quot;&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;]&lt;/span&gt; &lt;span class=&quot;token operator&quot;&gt;&amp;gt;&lt;/span&gt; &lt;span class=&quot;token number&quot;&gt;0&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;;&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;p&gt;Most of these keywords should be familiar to you by now. The only interesting part that is has not been used earlier is the &lt;code class=&quot;language-text&quot;&gt;pivot()&lt;/code&gt; and the string syntax in the where clause. &lt;code class=&quot;language-text&quot;&gt;evaluate pivot()&lt;/code&gt; takes a column you provide and creates a new row for each match of the pivot column. &lt;/p&gt;&lt;p&gt;Microsoft has this explanation: &lt;code class=&quot;language-text&quot;&gt;pivot()&lt;/code&gt; &lt;a href=&quot;https://learn.microsoft.com/en-us/azure/data-explorer/kusto/query/pivotplugin&quot; target=&quot;_blank&quot; rel=&quot;noreferrer&quot;&gt;rotates a table by turning the unique values from one column in the input table into multiple columns in the output table and performs aggregations as required on any remaining column values that will appear in the final output.&lt;/a&gt;. Which means that for every species we will add a new column and add the data count the matches residing in the same &lt;code class=&quot;language-text&quot;&gt;h3Cell&lt;/code&gt; - 66 meter radius. &lt;/p&gt;&lt;p&gt;We are also limiting output by using a query-defined output schema (a fancy &lt;code class=&quot;language-text&quot;&gt;project&lt;/code&gt;-like function), which you can read more on in the link above. Now, the syntax on the columns are used whenever we have a string with spaces in it - enclose it in square brackets and quotes. &lt;a href=&quot;https://learn.microsoft.com/en-us/azure/data-explorer/kusto/query/schema-entities/entity-names&quot; target=&quot;_blank&quot; rel=&quot;noreferrer&quot;&gt;Read more here&lt;/a&gt;. Now we’re good to go:&lt;/p&gt;&lt;div class=&quot;gatsby-highlight&quot; data-language=&quot;sql&quot;&gt;&lt;pre class=&quot;language-sql&quot;&gt;&lt;code class=&quot;language-sql&quot;&gt;h3Tree
&lt;span class=&quot;token operator&quot;&gt;|&lt;/span&gt; &lt;span class=&quot;token keyword&quot;&gt;join&lt;/span&gt; kind&lt;span class=&quot;token operator&quot;&gt;=&lt;/span&gt;&lt;span class=&quot;token keyword&quot;&gt;inner&lt;/span&gt; cells &lt;span class=&quot;token keyword&quot;&gt;on&lt;/span&gt; h3Cell
&lt;span class=&quot;token operator&quot;&gt;|&lt;/span&gt; &lt;span class=&quot;token keyword&quot;&gt;where&lt;/span&gt; spc_common &lt;span class=&quot;token operator&quot;&gt;=&lt;/span&gt;&lt;span class=&quot;token operator&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;token string&quot;&gt;&amp;quot;American linden&amp;quot;&lt;/span&gt;
&lt;span class=&quot;token operator&quot;&gt;|&lt;/span&gt; summarize arg_min&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;tree_dbh&lt;span class=&quot;token punctuation&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;token operator&quot;&gt;*&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt;
&lt;span class=&quot;token operator&quot;&gt;|&lt;/span&gt; project latitude&lt;span class=&quot;token punctuation&quot;&gt;,&lt;/span&gt; longitude&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;h3 id=&quot;the-whole-query&quot; style=&quot;position:relative&quot;&gt;&lt;a href=&quot;#the-whole-query&quot; aria-label=&quot;the whole query permalink&quot; class=&quot;heading-anchor before&quot;&gt;&lt;span&gt;#&lt;/span&gt;&lt;/a&gt;The whole query&lt;/h3&gt;&lt;p&gt;Enter the link as created by this query:&lt;/p&gt;&lt;div class=&quot;gatsby-highlight&quot; data-language=&quot;sql&quot;&gt;&lt;pre class=&quot;language-sql&quot;&gt;&lt;code class=&quot;language-sql&quot;&gt;let h3Tree &lt;span class=&quot;token operator&quot;&gt;=&lt;/span&gt; nyc_trees
&lt;span class=&quot;token operator&quot;&gt;|&lt;/span&gt; extend  h3Cell&lt;span class=&quot;token operator&quot;&gt;=&lt;/span&gt;geo_point_to_h3cell&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;longitude&lt;span class=&quot;token punctuation&quot;&gt;,&lt;/span&gt; latitude&lt;span class=&quot;token punctuation&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;token number&quot;&gt;10&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;;&lt;/span&gt;
let cells &lt;span class=&quot;token operator&quot;&gt;=&lt;/span&gt; h3Tree
&lt;span class=&quot;token operator&quot;&gt;|&lt;/span&gt; &lt;span class=&quot;token keyword&quot;&gt;where&lt;/span&gt; spc_common has_any &lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;token string&quot;&gt;&amp;quot;Schubert&amp;quot;&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;token string&quot;&gt;&amp;quot;Turkish&amp;quot;&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;token string&quot;&gt;&amp;quot;American&amp;quot;&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt;
&lt;span class=&quot;token operator&quot;&gt;|&lt;/span&gt; project h3Cell&lt;span class=&quot;token punctuation&quot;&gt;,&lt;/span&gt; spc_common
&lt;span class=&quot;token operator&quot;&gt;|&lt;/span&gt; evaluate &lt;span class=&quot;token keyword&quot;&gt;pivot&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;spc_common&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt;: &lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;h3Cell:string &lt;span class=&quot;token punctuation&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;token punctuation&quot;&gt;[&lt;/span&gt;&lt;span class=&quot;token string&quot;&gt;&amp;quot;&amp;#x27;Schubert&amp;#x27; chokecherry&amp;quot;&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;]&lt;/span&gt;:&lt;span class=&quot;token keyword&quot;&gt;int&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;token punctuation&quot;&gt;[&lt;/span&gt;&lt;span class=&quot;token string&quot;&gt;&amp;quot;Turkish hazelnut&amp;quot;&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;]&lt;/span&gt;:&lt;span class=&quot;token keyword&quot;&gt;int&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;token punctuation&quot;&gt;[&lt;/span&gt;&lt;span class=&quot;token string&quot;&gt;&amp;quot;American linden&amp;quot;&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;]&lt;/span&gt;:&lt;span class=&quot;token keyword&quot;&gt;int&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt;
&lt;span class=&quot;token operator&quot;&gt;|&lt;/span&gt; &lt;span class=&quot;token keyword&quot;&gt;where&lt;/span&gt; &lt;span class=&quot;token punctuation&quot;&gt;[&lt;/span&gt;&lt;span class=&quot;token string&quot;&gt;&amp;quot;&amp;#x27;Schubert&amp;#x27; chokecherry&amp;quot;&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;]&lt;/span&gt; &lt;span class=&quot;token operator&quot;&gt;=&lt;/span&gt;&lt;span class=&quot;token operator&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;token number&quot;&gt;4&lt;/span&gt; &lt;span class=&quot;token operator&quot;&gt;and&lt;/span&gt; &lt;span class=&quot;token punctuation&quot;&gt;[&lt;/span&gt;&lt;span class=&quot;token string&quot;&gt;&amp;quot;Turkish hazelnut&amp;quot;&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;]&lt;/span&gt; &lt;span class=&quot;token operator&quot;&gt;&amp;gt;&lt;/span&gt; &lt;span class=&quot;token number&quot;&gt;0&lt;/span&gt; &lt;span class=&quot;token operator&quot;&gt;and&lt;/span&gt; &lt;span class=&quot;token punctuation&quot;&gt;[&lt;/span&gt;&lt;span class=&quot;token string&quot;&gt;&amp;quot;American linden&amp;quot;&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;]&lt;/span&gt; &lt;span class=&quot;token operator&quot;&gt;&amp;gt;&lt;/span&gt; &lt;span class=&quot;token number&quot;&gt;0&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;;&lt;/span&gt;
h3Tree
&lt;span class=&quot;token operator&quot;&gt;|&lt;/span&gt; &lt;span class=&quot;token keyword&quot;&gt;join&lt;/span&gt; kind&lt;span class=&quot;token operator&quot;&gt;=&lt;/span&gt;&lt;span class=&quot;token keyword&quot;&gt;inner&lt;/span&gt; cells &lt;span class=&quot;token keyword&quot;&gt;on&lt;/span&gt; h3Cell
&lt;span class=&quot;token operator&quot;&gt;|&lt;/span&gt; &lt;span class=&quot;token keyword&quot;&gt;where&lt;/span&gt; spc_common &lt;span class=&quot;token operator&quot;&gt;=&lt;/span&gt;&lt;span class=&quot;token operator&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;token string&quot;&gt;&amp;quot;American linden&amp;quot;&lt;/span&gt;
&lt;span class=&quot;token operator&quot;&gt;|&lt;/span&gt; summarize arg_min&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;tree_dbh&lt;span class=&quot;token punctuation&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;token operator&quot;&gt;*&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt;
&lt;span class=&quot;token operator&quot;&gt;|&lt;/span&gt; project latitude&lt;span class=&quot;token punctuation&quot;&gt;,&lt;/span&gt; longitude&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;p&gt;Now that we have the correct latitude and longitude - let’s throw them into the function that was part of the raw text we found:&lt;/p&gt;&lt;div class=&quot;gatsby-highlight&quot; data-language=&quot;sql&quot;&gt;&lt;pre class=&quot;language-sql&quot;&gt;&lt;code class=&quot;language-sql&quot;&gt;VirtualTourLink&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;token number&quot;&gt;40.71222313&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;token operator&quot;&gt;-&lt;/span&gt;&lt;span class=&quot;token number&quot;&gt;73.96452201&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;h2 id=&quot;hint-3&quot; style=&quot;position:relative&quot;&gt;&lt;a href=&quot;#hint-3&quot; aria-label=&quot;hint 3 permalink&quot; class=&quot;heading-anchor before&quot;&gt;&lt;span&gt;#&lt;/span&gt;&lt;/a&gt;Hint 3&lt;/h2&gt;&lt;p&gt;&lt;span class=&quot;gatsby-resp-image-wrapper&quot; style=&quot;position:relative;display:block;margin-left:auto;margin-right:auto;max-width:469px&quot;&gt;
      &lt;span class=&quot;gatsby-resp-image-background-image&quot; style=&quot;padding-bottom:33.90191897654584%;position:relative;bottom:0;left:0;background-image:url(&amp;#x27;data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAAHCAIAAACHqfpvAAAACXBIWXMAAA7DAAAOwwHHb6hkAAAA6UlEQVQY042MW26DMBBFvZ0EDASIMWAHz/AGlciAaCu15afK/pdQmTRVm59UOro690ozxGaKRuDGOeXgxOgmuZcWvqz+A5nfPs8v67B8PK+Xp+V9WS+qm6zjyYmRcjAft7zjOpJGv0I3iXLAfspaDf3EVGuzjEbqIcSJwOXoJbnLjbgxHtIilHUoq1BWgaiCHzGUNzEjMZccHQZOBF6MJrlJytT2F+78CmVgHzOC3YTdCI0+lUPRz6a2I7Zjgr2pm6haq0YX/ZzVZ9XovJu5ane+IFYg9r6wAvlb7EBa3y5v4x/f+2J3SL8AJ9pjQKK5QHoAAAAASUVORK5CYII=&amp;#x27;);background-size:cover;display:block&quot;&gt;&lt;/span&gt;
  &lt;img class=&quot;gatsby-resp-image-image&quot; alt=&quot;20221121211029&quot; title=&quot;20221121211029&quot; src=&quot;/static/91cc6ce05f2fa6d8d8af6b7425ce3939/44038/20221121211029.png&quot; srcSet=&quot;/static/91cc6ce05f2fa6d8d8af6b7425ce3939/44038/20221121211029.png 469w&quot; sizes=&quot;(max-width: 469px) 100vw, 469px&quot; style=&quot;width:100%;height:100%;margin:0;vertical-align:middle;position:absolute;top:0;left:0&quot; loading=&quot;lazy&quot; decoding=&quot;async&quot;/&gt;
    &lt;/span&gt;  &lt;/p&gt;&lt;p&gt;Walking around in the (Google)street, try looking for a tree and try looking for a message close by a tree. This actually took me ages - but I noticed that I had been on the verge of finding the answer many times. I went back and read the challenge text on the kusto site. The message was sent from “El Puento”. I KNEW I had read that somewhere in the streets. And finally i found it:&lt;/p&gt;&lt;p&gt;&lt;span class=&quot;gatsby-resp-image-wrapper&quot; style=&quot;position:relative;display:block;margin-left:auto;margin-right:auto;max-width:1219px&quot;&gt;
      &lt;span class=&quot;gatsby-resp-image-background-image&quot; style=&quot;padding-bottom:80.06562756357671%;position:relative;bottom:0;left:0;background-image:url(&amp;#x27;data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAAQCAIAAACZeshMAAAACXBIWXMAAA7DAAAOwwHHb6hkAAAD20lEQVQozwHQAy/8AKrDxqjAwrHExrzIybrHycHOz8LQ0b/MzrzHybjExLzIysbT1b7Ky7fExb3Lyr7Ly7vIyLnHyLfFyL3KygAvLCxOTlA/PkA7PD1ISUpxcnZhX2JFPjw8NTE5MS01KiVrZmRxbm8lJyJERT5WU0tbWVFUVlJJTE1UUUoAKSMcSUU4My8tOjo7REREa2xrdXF0X1RRWlBOXVVVUkdDjIWDpaKlR0xGY3BoT1RRY2RdeHhxc3ZtbnRvADAlGzowJjkxKDUsJj42MFxWSXZyZ4R8e29na2VgZm9scrm3vr25uHF1bY6YlHBramRnWW9sZ253bmh5bQBPPixEOCxDNSRNNyVIMx9ORTNTTj9bTT9mXl9WT01mX2GxrrSuqqpTS0OEfXiOdXlwcWV4eW5rcGtlbWQAbmJQYVRERjosTjwsRzEdSDwpUlFSOzUgVk4+TkI5SkA3rKuurK2vQD5AWVZYUk9dVkxTe2ZqiYB6bnRzAEhCOVxTREY+NEQ3Lj4uJko3LnFtaExHNEpKPkk+OSIYDVFLQz48QjYuO0pEWWVaVnNuc4V5gYh+eWpraAAiHRsmIBwlIR0eGxgiHhwzKylJR0NMSEFMTVA+PD0vLi4/QUE3HhxWTVRqgYJhTVBmZ219hX9za2VcXF0AHR0fKCUmIyIlICEjJyYlQ0VLU15hO0hKNzk/LywrVVBMSERATSsnVFhbXaS0WVlmY1RNcWRkfmZmW1BQADw8PExMTVVVVmZmZ0tMU0hJUEpOUEhKSGplYIiCe4mDe316dGNTTVk/PllfaGZUVE5FQFFTUGJdW1BNUAB8fH2AgIGTkpKMjI1nZmheW1t4dHGJhH6Qi4WRjIaYk4ublY+YkYuViIN2Z2VbW1xTYWQ8QUc1OT4vMzYAkZCOkpGPiYiHgn59joqGmpaTlZCKjouHjouHlI6GmJKLmpWOmZKPZWZpTlVcOkBHQ0dOHx8kHh8iGhsfAISCf3RwbmZjY21pZ4J8doeCfYuIhYuJiIuHg4F7d4J9eYN+el5aWjk3PTM0OxoZHAoJDAwMDwsKDAwLDQCXnKPa1dDXzcLW0MXk3tXGwbxycHF4dnZ6dnZ5dnalop6Jh4dhX2MbGx4NDQ1CQEAgHyApKis/QEFQUlMArrK69PX67/Dw7+3o///45OHeiomInZuZm5mZoJ6ds7GteXd4dXJ1XFpcSUhIWVhaaWlrc3R4enyBfH+DAK6vrNHRz8vLy7/AwLq3tamsqo2MjImJiXp6fZOSkqyqpnh3eoGAg4OChYOChYKDhn+AhHx9gXd5fXh6fyBpjDWStrviAAAAAElFTkSuQmCC&amp;#x27;);background-size:cover;display:block&quot;&gt;&lt;/span&gt;
  &lt;img class=&quot;gatsby-resp-image-image&quot; alt=&quot;20221121210500&quot; title=&quot;20221121210500&quot; src=&quot;/static/1445af916fb05081ed769771f009237a/a7903/20221121210500.png&quot; srcSet=&quot;/static/1445af916fb05081ed769771f009237a/a7903/20221121210500.png 1219w&quot; sizes=&quot;(max-width: 1219px) 100vw, 1219px&quot; style=&quot;width:100%;height:100%;margin:0;vertical-align:middle;position:absolute;top:0;left:0&quot; loading=&quot;lazy&quot; decoding=&quot;async&quot;/&gt;
    &lt;/span&gt;&lt;br/&gt;
&lt;span class=&quot;gatsby-resp-image-wrapper&quot; style=&quot;position:relative;display:block;margin-left:auto;margin-right:auto;max-width:317px&quot;&gt;
      &lt;span class=&quot;gatsby-resp-image-background-image&quot; style=&quot;padding-bottom:43.53312302839117%;position:relative;bottom:0;left:0;background-image:url(&amp;#x27;data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAAJCAIAAAC9o5sfAAAACXBIWXMAAA7DAAAOwwHHb6hkAAABXUlEQVQoz33Lay/DUByA8X4VoZmt7Wl3utP1+j+9radnrTAMtYnLEjEyt2HukYxEvOArC94QJvnlefcIRpAhSDHlmPLqZzHlKuUapLrH/gNMsCm/nkXnojyckc5E+UyUT0X5QZTmCCjAax7DE+geE5gTH5YQmS+SxQ7kbT9v24udVd3ZQkaZ8prTwG4yiRC68cVUaWupGKx0j4rNYXfnYKN3jM2OUpsFhp1Ic+K/ubFAKFuX8MikQxsGAeyR+ua0tFvRXIPKTqzZkTpRLOjASk4sBZkS5lKUyVEm+bzsc9VL8Be3UfWSqtv4TcBeolmhQkAhoNZ9hUDVDpFBNTuS675iBsgKVSvEv07sNgTdSyoEWKvIlruUt5pLHTPM0lZRD5psYS3K25C2IF2oEEBmoPz0MZewU2z3L27Hg/Obx5e3k8v73v7J+k5/dDceP79ePTxZUS4bFFnh9xOZwTuBQ4q/7JULSwAAAABJRU5ErkJggg==&amp;#x27;);background-size:cover;display:block&quot;&gt;&lt;/span&gt;
  &lt;img class=&quot;gatsby-resp-image-image&quot; alt=&quot;20221121210610&quot; title=&quot;20221121210610&quot; src=&quot;/static/ecdbf32879c2d60249822a3bcac64868/66d24/20221121210610.png&quot; srcSet=&quot;/static/ecdbf32879c2d60249822a3bcac64868/66d24/20221121210610.png 317w&quot; sizes=&quot;(max-width: 317px) 100vw, 317px&quot; style=&quot;width:100%;height:100%;margin:0;vertical-align:middle;position:absolute;top:0;left:0&quot; loading=&quot;lazy&quot; decoding=&quot;async&quot;/&gt;
    &lt;/span&gt;  &lt;/p&gt;&lt;p&gt;We are looking for text to use in our decrypt function (part of the raw text we ingested). Lets try out the text below it as that is the only readable part of the message besides “El Puente” - “ASHES to ASHES”. &lt;/p&gt;&lt;p&gt;The &lt;code class=&quot;language-text&quot;&gt;Decrypt&lt;/code&gt; function we ingested earlier is now going to be used, but it does not contain a print function, therefore, we need those in sequence with the message from the detective dashboard.&lt;/p&gt;&lt;div class=&quot;gatsby-highlight&quot; data-language=&quot;sql&quot;&gt;&lt;pre class=&quot;language-sql&quot;&gt;&lt;code class=&quot;language-sql&quot;&gt;&lt;span class=&quot;token keyword&quot;&gt;print&lt;/span&gt; Decrypt&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;token variable&quot;&gt;@&amp;quot;20INznpGzmkmK2NlZ0JILtO4OoYhOoYUB0OrOoTl5mJ3KgXrB0[8LTSSXUYhzUY8vmkyKUYevUYrDgYNK07yaf7soC3kKgMlOtHkLt[kZEclBtkyOoYwvtJGK2YevUY[v65iLtkeLEOhvtNlBtpizoY[v65yLdOkLEOhvtNlDn5lB07lOtJIDmllzmJ4vf7soCpiLdYIK0[eK27soleqO6keDpYp2CeH5d\F\fN6aQT6aQL[aQcUaQc[aQ57aQ5[aQDG&amp;quot;&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;token string&quot;&gt;&amp;quot;ASHES to ASHES&amp;quot;&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;p&gt;To get this query to run through, we added the use of verbatim string. What is that? As you can see, the encrypted string contains special characters which needs to either be escaped by putting a backslash in front, OR by adding a &lt;code class=&quot;language-text&quot;&gt;@&lt;/code&gt; in front of the quote that starts the string.&lt;/p&gt;&lt;p&gt;After running the query above, we recieve a message through the decryption algorithm/function:&lt;/p&gt;&lt;div class=&quot;gatsby-highlight&quot; data-language=&quot;text&quot;&gt;&lt;pre class=&quot;language-text&quot;&gt;&lt;code class=&quot;language-text&quot;&gt;Impressive, you got it right! Something BIG is going to happen...
Keep the next hint close to you, it will help you. We will be in touch soon.
El Puente.

wytaPUJM!PS:2,7,17,29,42,49,58,59,63&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;h1 id=&quot;badge-time&quot; style=&quot;position:relative&quot;&gt;&lt;a href=&quot;#badge-time&quot; aria-label=&quot;badge time permalink&quot; class=&quot;heading-anchor before&quot;&gt;&lt;span&gt;#&lt;/span&gt;&lt;/a&gt;Badge-time&lt;/h1&gt;&lt;p&gt;&lt;span class=&quot;gatsby-resp-image-wrapper&quot; style=&quot;position:relative;display:block;margin-left:auto;margin-right:auto;max-width:190px&quot;&gt;
      &lt;span class=&quot;gatsby-resp-image-background-image&quot; style=&quot;padding-bottom:122.10526315789474%;position:relative;bottom:0;left:0;background-image:url(&amp;#x27;data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAAYCAIAAAB1KUohAAAACXBIWXMAAA7DAAAOwwHHb6hkAAAEeklEQVQ4y12UeW/TZhyA/RV2SENiEpOmwQ6g0kCMHpDacRLbcQ47du7ER3zfZ2w3aUNpKQzGoIO1pYUGSqd9he2Padpf+1qTE4YqpEeW/NPz+H1fyzIgGoFoBILu85rHay4j26zisEp65VRnoHusbDOK8//cGWieYASKHVVbHBCO7wajzWhy/+nzgwdP9qanvx9NTw+nv+0dvj549Wbn0e6vL98eHL0+nL7df3ly9Ob0/k9PvWSS3Nlp8SrgRBv2cN1b2368u/f4+dHR9OTZwcv9V2+fvzh+un+4ce/R7sH0aHr64vjk2f7x/vHJ1o8/m8EoGN2t92XADMczRkYwMoI11Y1VN9a8RPMS3U/McKS5serF7+eGn5puPKF7IoCS7XfU2ijZwagORnXRWgchWwUiBSXbWG02r6Wgtc58kkEJIFdtvCdfbcLlerZEI2S73GSqba7SYot0D67UoRKdq6TCO5NoriAVIFdpvAfCqSLdZWRbsoeal9jRhhmOFScSDJ/uS9lyHS7X52a+2lwpnImzJZrqiXNV8xPFjRnZEgxf99dkO5TMgNfcAtGa9+9iePY8CKeonmgEo/5AM+xY0l3Z8IJo3XQjXrENN5Y1d6C5ohXmZ8vkKo3lfBmYl0Wqq/trXV5z/PWBYHj+2mRyjx+oQbC2vrEtSmYYbci6J1lBTzQhnMpX53GJhnCKUx1WMTUrrjf5jz4+d/nK9QJSAbNYHq2CEPrJp+e/unR1cvdhsy/oQVKkOnCJXs6VAAinELKlOEPFHfKyJcjO5SvXvv3ue7rBbm49bHX4W5l8vlDGS5QXjhnZNMNRg5UhnEpjECMrDUZzI92LWdlUjaFph3FyZ3P7yd///Lv7y4Eg21449vyxpHmyFcw0Cy7RSzAOrKJErcPr6Tc0ZCVT1UMoi9UbPUFy9/aPqXqX4dROTyRrbTdYZ2XT8BNec3Ll+lIWBzJIlWhzhp9wimXYcQEhzn/+5fIKXK7Qrp8wnHrhi0u5PL6wcMP21hjR0LyIU224RC9CRWAVIXCqq7sxK5maES2vwP5wMky2Xx2f/vHnXzsPnnADo0b3b93OtbuCYgSKFfQEHcJqaQyiJIzTkhFwsqXoIUG20SLx2bkLjRa7vrFlOUNFD7qMgpcoltclzVPtYa3Ngyi5BBUBCKtlCtVGX1LtkJdsXrCuLty4dn15aQXOF0oghH79zcLFi1dQjAyGE0bQFSvMlegsVlsEiwCEkiBCZItU+jNR7IHsRMlmMtq8s7mjG144HI83tpPRVhBNupyqORHR5DL5Klykbq5i6bZBlMwUqki1JZmhZAR9wWBFkxUtRfcF1WEEkxFNVrJ0N2n0pQxCgCgJYbVZjBAgQkBI2hfKDUY0dTfW3VhzooHqSGYwv5XNkGxyqzM59VHyZgZN3/YcECUyheoqQpSobptTWNkSdW+gOn3BoDqDHE7fzlfOyOQPGTQ981nmR8gUqlmsBuMUXKRAhMjMsrNaNt02CiyC6AcsgdgSiC6uojdnzCcfOhB2bTn7H2V/F0lkE2b1AAAAAElFTkSuQmCC&amp;#x27;);background-size:cover;display:block&quot;&gt;&lt;/span&gt;
  &lt;img class=&quot;gatsby-resp-image-image&quot; alt=&quot;20221123104605&quot; title=&quot;20221123104605&quot; src=&quot;/static/69087298c49ab3816bae43a4ff4c803f/08678/20221123104605.png&quot; srcSet=&quot;/static/69087298c49ab3816bae43a4ff4c803f/08678/20221123104605.png 190w&quot; sizes=&quot;(max-width: 190px) 100vw, 190px&quot; style=&quot;width:100%;height:100%;margin:0;vertical-align:middle;position:absolute;top:0;left:0&quot; loading=&quot;lazy&quot; decoding=&quot;async&quot;/&gt;
    &lt;/span&gt;&lt;br/&gt;
Good job! Did you learn anything new? Please let me know, I’d love to hear about it.&lt;/p&gt;</content:encoded><tags>KQL,Azure Data Explorer,Data Science</tags><featuredImage>https://blog.amestofortytwo.com/static/f1c33454376cde2d699413464544ebbd/badge.png</featuredImage></item><item><title><![CDATA[Kusto Detective - Senior Detective - Big Heist]]></title><description><![CDATA[Walkthrough of Kusto Detective Agency series]]></description><link>https://blog.amestofortytwo.com/kusto-detective-agency6</link><guid isPermaLink="false">https://blog.amestofortytwo.com/kusto-detective-agency6</guid><category><![CDATA[KQL]]></category><category><![CDATA[Azure Data Explorer]]></category><category><![CDATA[Data Science]]></category><pubDate>Sun, 11 Dec 2022 00:00:00 GMT</pubDate><content:encoded>&lt;h1 id=&quot;kusto-detective---senior-detective---big-heist&quot; style=&quot;position:relative&quot;&gt;&lt;a href=&quot;#kusto-detective---senior-detective---big-heist&quot; aria-label=&quot;kusto detective   senior detective   big heist permalink&quot; class=&quot;heading-anchor before&quot;&gt;&lt;span&gt;#&lt;/span&gt;&lt;/a&gt;Kusto Detective - Senior Detective - Big Heist&lt;/h1&gt;&lt;h2 id=&quot;introduction&quot; style=&quot;position:relative&quot;&gt;&lt;a href=&quot;#introduction&quot; aria-label=&quot;introduction permalink&quot; class=&quot;heading-anchor before&quot;&gt;&lt;span&gt;#&lt;/span&gt;&lt;/a&gt;Introduction&lt;/h2&gt;&lt;p&gt;So, now that we have done the geo-location task we’ve learned a lot of which function resides in KQL and how to build our syntax. &lt;/p&gt;&lt;h1 id=&quot;the-story&quot; style=&quot;position:relative&quot;&gt;&lt;a href=&quot;#the-story&quot; aria-label=&quot;the story permalink&quot; class=&quot;heading-anchor before&quot;&gt;&lt;span&gt;#&lt;/span&gt;&lt;/a&gt;The story&lt;/h1&gt;&lt;p&gt;&lt;span class=&quot;gatsby-resp-image-wrapper&quot; style=&quot;position:relative;display:block;margin-left:auto;margin-right:auto;max-width:1258px&quot;&gt;
      &lt;span class=&quot;gatsby-resp-image-background-image&quot; style=&quot;padding-bottom:58.34658187599364%;position:relative;bottom:0;left:0;background-image:url(&amp;#x27;data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAAMCAIAAADtbgqsAAAACXBIWXMAAA7DAAAOwwHHb6hkAAACTklEQVQozz3NSU/bUBQFYP+FAg4YD8/28xjbsZ9HPGd4JiGDQ8qQUAotdEUXLaKrikWldl213SN1Uam/szIpSN/inKMrXQLPTlBWoaxy82odnqub7z9pshl2rahnRl0nwSjFToqJfH+e4GmMpymexoNJimcJnqXVLBlMg3IUdBthd4QSfPDqcrK8eH11g0/PysNjwy+IcrjIq7qo6ryqg2IYFcOwGIXFyM8qO+qheIBi7GWV2onf3N7Nzt7Wy8vVp4+Lq2vLL4mDxWp2dD5erCYvz0bz5X59MqxPq+nxsD7Fk6OkN47KUdIbu0l/vFhd3XyIZ3M76V1/ve+fnxNR2Tx5gk0/N7zsmWxF0PAlMwSKc3179+XH95OLd7///P318ADtiJCNgJMdQXMbKhJ1T9TcNah7goaEddVdTrZ3eUO397pVjYJSUBGR9yfFYBpmlR8PvLgfpNiNul7c9+NBkGLLywwn0TuxbAaqFWr2nmwEvOLwigNkm/Djwt8rOm5k2L7pBB03slBo2H6j41lOYDmBbiJRMSTNklRTbdtemNooUnSbsLwIBaHjGLqmWKZhGe0mSaIKBU0SFcirUBAFwLIMQ9Msy3AcK4qCKPACDwgA2zxsC1KbAwrDySwnyarFizoQNCComoFU3WY4meNVWbNpVqJZiWIgRUOKgQTFKDsNlaSkrR34guR1K5I1d3tHam1DDpi81NllNU4woYIY0KY5fZuWSQqSFCQ2SPBfC2y0+AYJSEqc3L9f/vw8/3bbYqSNLbD5uG+2+M31zaN/3OiUZpE9CEsAAAAASUVORK5CYII=&amp;#x27;);background-size:cover;display:block&quot;&gt;&lt;/span&gt;
  &lt;img class=&quot;gatsby-resp-image-image&quot; alt=&quot;20221123113333&quot; title=&quot;20221123113333&quot; src=&quot;/static/4865a371036ea9ea2a8fc0ac905679f9/5745f/20221123113333.png&quot; srcSet=&quot;/static/4865a371036ea9ea2a8fc0ac905679f9/5745f/20221123113333.png 1258w&quot; sizes=&quot;(max-width: 1258px) 100vw, 1258px&quot; style=&quot;width:100%;height:100%;margin:0;vertical-align:middle;position:absolute;top:0;left:0&quot; loading=&quot;lazy&quot; decoding=&quot;async&quot;/&gt;
    &lt;/span&gt;  &lt;/p&gt;&lt;p&gt;Ingest your data as we’ve done for each task by now and take a look at it. It’s a pretty good idea to run &lt;code class=&quot;language-text&quot;&gt;| take 10&lt;/code&gt; on that kind of query, to make it respond as fast as possible.&lt;/p&gt;&lt;p&gt;As you can see from the data we have a timestamp and a message which consist of different types of events. Now, that is not very practical for us as analysts, as we want to treat one type of event at a time. Therefore, we need to &lt;code class=&quot;language-text&quot;&gt;parse&lt;/code&gt; our input. And &lt;code class=&quot;language-text&quot;&gt;parse&lt;/code&gt; was my initial go for this, as this is one of the main things that show up in google when searching for the obvious. Let’s first take a look at how I started this task before I remembered a keyword from my tiny programming background.&lt;/p&gt;&lt;p&gt;&lt;code class=&quot;language-text&quot;&gt;parse&lt;/code&gt; is a function in KQL that parses text such that by providing it a string and telling it what part should match before turning whatever comes after it into a value in a named column. If there are multiple values in the same string, repeat this.&lt;/p&gt;&lt;div class=&quot;gatsby-highlight&quot; data-language=&quot;sql&quot;&gt;&lt;pre class=&quot;language-sql&quot;&gt;&lt;code class=&quot;language-sql&quot;&gt;ChatLogs
&lt;span class=&quot;token operator&quot;&gt;|&lt;/span&gt; parse Message &lt;span class=&quot;token keyword&quot;&gt;with&lt;/span&gt; &lt;span class=&quot;token string&quot;&gt;&amp;quot;User &amp;quot;&lt;/span&gt; &lt;span class=&quot;token keyword&quot;&gt;user&lt;/span&gt; &lt;span class=&quot;token string&quot;&gt;&amp;quot; sent message to the channel &amp;quot;&lt;/span&gt; sent_to_channel
&lt;span class=&quot;token operator&quot;&gt;|&lt;/span&gt; parse Message &lt;span class=&quot;token keyword&quot;&gt;with&lt;/span&gt; &lt;span class=&quot;token string&quot;&gt;&amp;quot;User &amp;quot;&lt;/span&gt; user1 &lt;span class=&quot;token string&quot;&gt;&amp;quot; left the channel &amp;quot;&lt;/span&gt; left_channel
&lt;span class=&quot;token operator&quot;&gt;|&lt;/span&gt; parse Message &lt;span class=&quot;token keyword&quot;&gt;with&lt;/span&gt; &lt;span class=&quot;token string&quot;&gt;&amp;quot;User &amp;quot;&lt;/span&gt; user2 &lt;span class=&quot;token string&quot;&gt;&amp;quot; logged out from the &amp;quot;&lt;/span&gt; logged_out_from
&lt;span class=&quot;token operator&quot;&gt;|&lt;/span&gt; parse Message &lt;span class=&quot;token keyword&quot;&gt;with&lt;/span&gt; &lt;span class=&quot;token string&quot;&gt;&amp;quot;User &amp;quot;&lt;/span&gt; user3 &lt;span class=&quot;token string&quot;&gt;&amp;quot; joined the channel &amp;quot;&lt;/span&gt; joined_channel
&lt;span class=&quot;token operator&quot;&gt;|&lt;/span&gt; parse Message &lt;span class=&quot;token keyword&quot;&gt;with&lt;/span&gt; &lt;span class=&quot;token string&quot;&gt;&amp;quot;User &amp;quot;&lt;/span&gt; user4 &lt;span class=&quot;token string&quot;&gt;&amp;quot; logged in from &amp;quot;&lt;/span&gt; loginIP
&lt;span class=&quot;token operator&quot;&gt;|&lt;/span&gt; parse Message &lt;span class=&quot;token keyword&quot;&gt;with&lt;/span&gt; &lt;span class=&quot;token string&quot;&gt;&amp;quot;User &amp;quot;&lt;/span&gt; user5 &lt;span class=&quot;token string&quot;&gt;&amp;quot; sent message to the user &amp;quot;&lt;/span&gt; sent_to_user
&lt;span class=&quot;token operator&quot;&gt;|&lt;/span&gt; extend TheUser &lt;span class=&quot;token operator&quot;&gt;=&lt;/span&gt; strcat&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;token keyword&quot;&gt;user&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;,&lt;/span&gt; user1&lt;span class=&quot;token punctuation&quot;&gt;,&lt;/span&gt; user2&lt;span class=&quot;token punctuation&quot;&gt;,&lt;/span&gt; user3&lt;span class=&quot;token punctuation&quot;&gt;,&lt;/span&gt; user4&lt;span class=&quot;token punctuation&quot;&gt;,&lt;/span&gt; user5&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt; 
&lt;span class=&quot;token operator&quot;&gt;|&lt;/span&gt; project&lt;span class=&quot;token operator&quot;&gt;-&lt;/span&gt;away &lt;span class=&quot;token keyword&quot;&gt;user&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;,&lt;/span&gt; user1&lt;span class=&quot;token punctuation&quot;&gt;,&lt;/span&gt; user2&lt;span class=&quot;token punctuation&quot;&gt;,&lt;/span&gt; user3&lt;span class=&quot;token punctuation&quot;&gt;,&lt;/span&gt; user4&lt;span class=&quot;token punctuation&quot;&gt;,&lt;/span&gt; user5&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;p&gt;Putting this into the context of the brief explanation over, we are parsing the &lt;code class=&quot;language-text&quot;&gt;Message&lt;/code&gt; for each line that we can see that is different from another. Starting with the first one the &lt;code class=&quot;language-text&quot;&gt;user&lt;/code&gt;-ID is what comes after “User ” (notice the space), this will be stored into &lt;code class=&quot;language-text&quot;&gt;user&lt;/code&gt;. &lt;/p&gt;&lt;p&gt;The line continues with ” sent message to the channel ” (notice the spaces) and the value at the end of the line is stored into &lt;code class=&quot;language-text&quot;&gt;sent_to_channel&lt;/code&gt;, which name is descriptive of what action this line is referencing. Repeat this explanation for each of the &lt;code class=&quot;language-text&quot;&gt;parse&lt;/code&gt; line. &lt;/p&gt;&lt;p&gt;At the end, we create a new column with &lt;code class=&quot;language-text&quot;&gt;extend&lt;/code&gt; called &lt;code class=&quot;language-text&quot;&gt;TheUser&lt;/code&gt;, and we are adding each of the &lt;code class=&quot;language-text&quot;&gt;user&lt;/code&gt;&lt;em&gt; to that column, and to make this a possibility we need to add it by concatenating it as a string which we do with &lt;code class=&quot;language-text&quot;&gt;strcat()&lt;/code&gt;. And then we remove the &lt;code class=&quot;language-text&quot;&gt;user&lt;/code&gt;&lt;/em&gt; columns with &lt;code class=&quot;language-text&quot;&gt;project-away&lt;/code&gt;.&lt;/p&gt;&lt;p&gt;The reason we want to parse this text is to make our life easier when working on a query that makes sense towards the end goal.&lt;/p&gt;&lt;p&gt;This is lot of code to parse something simple. There has to be a better way. And there is. Read a few of the lines in &lt;code class=&quot;language-text&quot;&gt;Message&lt;/code&gt; once more. Every value we are looking for are inside single quotes. We can use this to split the string and retrieve what we want.&lt;/p&gt;&lt;p&gt;We have the option to use, as far as my research has gone, either &lt;code class=&quot;language-text&quot;&gt;extract()&lt;/code&gt; to get our values based on regex, or we could use &lt;code class=&quot;language-text&quot;&gt;split()&lt;/code&gt;. Or maybe even both just to get them both under our nails to learn them.&lt;/p&gt;&lt;div class=&quot;gatsby-highlight&quot; data-language=&quot;sql&quot;&gt;&lt;pre class=&quot;language-sql&quot;&gt;&lt;code class=&quot;language-sql&quot;&gt;let logs &lt;span class=&quot;token operator&quot;&gt;=&lt;/span&gt; ChatLogs
&lt;span class=&quot;token operator&quot;&gt;|&lt;/span&gt; extend &lt;span class=&quot;token keyword&quot;&gt;user&lt;/span&gt; &lt;span class=&quot;token operator&quot;&gt;=&lt;/span&gt; tostring&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;split&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;Message&lt;span class=&quot;token punctuation&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;token string&quot;&gt;&amp;quot;&amp;#x27;&amp;quot;&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;[&lt;/span&gt;&lt;span class=&quot;token number&quot;&gt;1&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;]&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;,&lt;/span&gt; target &lt;span class=&quot;token operator&quot;&gt;=&lt;/span&gt; tostring&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;split&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;Message&lt;span class=&quot;token punctuation&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;token string&quot;&gt;&amp;quot;&amp;#x27;&amp;quot;&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;[&lt;/span&gt;&lt;span class=&quot;token number&quot;&gt;3&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;]&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt;
&lt;span class=&quot;token operator&quot;&gt;|&lt;/span&gt; extend activity &lt;span class=&quot;token operator&quot;&gt;=&lt;/span&gt; extract&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;token variable&quot;&gt;@&amp;quot;(joined|left|user|channel|logged in|logged out)&amp;quot;&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;token number&quot;&gt;1&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;,&lt;/span&gt; Message&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;;&lt;/span&gt;
let joiners &lt;span class=&quot;token operator&quot;&gt;=&lt;/span&gt; logs&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;p&gt;Wow! We reduced our first query from 9 lines to 3 and with a better and more readable query and output. If the regex on line 3 seems off it basically means that if any of these values exists in the current line then that will also be the value of the outputting column. &lt;/p&gt;&lt;p&gt;Now, user and channel are not descriptive as an &lt;code class=&quot;language-text&quot;&gt;activity&lt;/code&gt; but they had similar line structure and words, and &lt;code class=&quot;language-text&quot;&gt;user&lt;/code&gt; and &lt;code class=&quot;language-text&quot;&gt;channel&lt;/code&gt; was the only part in them made sense to use. Think of it as an action towards both &lt;code class=&quot;language-text&quot;&gt;user&lt;/code&gt; and &lt;code class=&quot;language-text&quot;&gt;channel&lt;/code&gt;. To make sense of the split function, we are inputing &lt;code class=&quot;language-text&quot;&gt;Message&lt;/code&gt; and splitting it based on single quotes before choosing which index we need for it. Try outputting this query if you struggle to understand it:&lt;/p&gt;&lt;div class=&quot;gatsby-highlight&quot; data-language=&quot;sql&quot;&gt;&lt;pre class=&quot;language-sql&quot;&gt;&lt;code class=&quot;language-sql&quot;&gt;ChatLogs
&lt;span class=&quot;token operator&quot;&gt;|&lt;/span&gt; extend &lt;span class=&quot;token keyword&quot;&gt;user&lt;/span&gt; &lt;span class=&quot;token operator&quot;&gt;=&lt;/span&gt; split&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;Message&lt;span class=&quot;token punctuation&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;token string&quot;&gt;&amp;quot;&amp;#x27;&amp;quot;&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt;
&lt;span class=&quot;token operator&quot;&gt;|&lt;/span&gt; take &lt;span class=&quot;token number&quot;&gt;10&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;p&gt;&lt;span class=&quot;gatsby-resp-image-wrapper&quot; style=&quot;position:relative;display:block;margin-left:auto;margin-right:auto;max-width:1120px&quot;&gt;
      &lt;span class=&quot;gatsby-resp-image-background-image&quot; style=&quot;padding-bottom:36.785714285714285%;position:relative;bottom:0;left:0;background-image:url(&amp;#x27;data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAAHCAIAAACHqfpvAAAACXBIWXMAAA7DAAAOwwHHb6hkAAABH0lEQVQY01VN2Y6DMAzk/z+q4hP6uKiUq0kIBZJC7stZpV1V2tFY9lgzdmW9V4cwx+mMVyIYqY04fN+ZEVkhrdFuobHvojiCDymlnOHLyvpAZ/6cmVTxPJwU1vmYc84Hz5Rk78rsPSw0P5ccQwlB+rDKkFIMMfjvCiBCisVkDRAM4nw/AlASZvInC1K1M66NNdaklOAfUjGFAM0P9D0oDc6V8EKhbeE4Us4Vf537zkSB5JyXJmUppYSUYmfmctF1rdpWUqrqWmqtr1fRNCbGinFOZjqM087YTOk4TQiTDzEmG3+xdUNdXySZUddhMhOEFkJCjNW6sQnh5nZb1nV8oHs/9MPYv29o46zzy7rdh/GBcDeMI8IPhF+nsD6GEH8BK06L/TWljQsAAAAASUVORK5CYII=&amp;#x27;);background-size:cover;display:block&quot;&gt;&lt;/span&gt;
  &lt;img class=&quot;gatsby-resp-image-image&quot; alt=&quot;20221123222802&quot; title=&quot;20221123222802&quot; src=&quot;/static/fd953bf639c80f03ae6c986c8b20b4e1/1b198/20221123222802.png&quot; srcSet=&quot;/static/fd953bf639c80f03ae6c986c8b20b4e1/1b198/20221123222802.png 1120w&quot; sizes=&quot;(max-width: 1120px) 100vw, 1120px&quot; style=&quot;width:100%;height:100%;margin:0;vertical-align:middle;position:absolute;top:0;left:0&quot; loading=&quot;lazy&quot; decoding=&quot;async&quot;/&gt;
    &lt;/span&gt;&lt;/p&gt;&lt;p&gt;As you can see, the single quotes has dissappeared in the extended column, that is because we used them to make a split in the line. The output gets converted to a list.&lt;/p&gt;&lt;p&gt;We have until now created a great representation of our data. In these kinds of tasks we need to make some kind of assumptions, like how does criminals work and act, to get moving on. These may take you in any direction, and to be honest, I’ve tried quite a few going through this task.&lt;/p&gt;&lt;h3 id=&quot;hint-1&quot; style=&quot;position:relative&quot;&gt;&lt;a href=&quot;#hint-1&quot; aria-label=&quot;hint 1 permalink&quot; class=&quot;heading-anchor before&quot;&gt;&lt;span&gt;#&lt;/span&gt;&lt;/a&gt;Hint 1&lt;/h3&gt;&lt;p&gt;&lt;span class=&quot;gatsby-resp-image-wrapper&quot; style=&quot;position:relative;display:block;margin-left:auto;margin-right:auto;max-width:1345px&quot;&gt;
      &lt;span class=&quot;gatsby-resp-image-background-image&quot; style=&quot;padding-bottom:8.178438661710038%;position:relative;bottom:0;left:0;background-image:url(&amp;#x27;data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAACCAIAAADXZGvcAAAACXBIWXMAAA7DAAAOwwHHb6hkAAAAMElEQVQI12PQtfPUs0dGHqhcrAiqhsHUxdfM1c/M1Q+NYeoK5ZqDSWRk6upr6gJCAO0fHdcf7RclAAAAAElFTkSuQmCC&amp;#x27;);background-size:cover;display:block&quot;&gt;&lt;/span&gt;
  &lt;img class=&quot;gatsby-resp-image-image&quot; alt=&quot;20221124124257&quot; title=&quot;20221124124257&quot; src=&quot;/static/7113d681b49fd5dfd4aab69db92f4d85/5d169/20221124124257.png&quot; srcSet=&quot;/static/7113d681b49fd5dfd4aab69db92f4d85/5d169/20221124124257.png 1345w&quot; sizes=&quot;(max-width: 1345px) 100vw, 1345px&quot; style=&quot;width:100%;height:100%;margin:0;vertical-align:middle;position:absolute;top:0;left:0&quot; loading=&quot;lazy&quot; decoding=&quot;async&quot;/&gt;
    &lt;/span&gt;  &lt;/p&gt;&lt;p&gt;So our first thing here is to align the wordings. Maybe “activity” should be renamed “action”? Let’s do that. &lt;/p&gt;&lt;p&gt;Let’s make our first assumption, like the hint tells us to. Based on the data we have been delivered we have people joining, leaving, logging in/out etc. What this tells me is that the gang-members might have a policy on how long they are allowed to stay online, or that they need to log in and out each time, join/leave… &lt;/p&gt;&lt;p&gt;This is what made me believe that by grouping actions into bins, and probably into a short time-limit will give me some kind of answer - or maybe just reduce my data to get me going further.&lt;/p&gt;&lt;div class=&quot;gatsby-highlight&quot; data-language=&quot;sql&quot;&gt;&lt;pre class=&quot;language-sql&quot;&gt;&lt;code class=&quot;language-sql&quot;&gt;let joiners &lt;span class=&quot;token operator&quot;&gt;=&lt;/span&gt; logs
&lt;span class=&quot;token operator&quot;&gt;|&lt;/span&gt; &lt;span class=&quot;token keyword&quot;&gt;where&lt;/span&gt; &lt;span class=&quot;token keyword&quot;&gt;action&lt;/span&gt; &lt;span class=&quot;token operator&quot;&gt;=&lt;/span&gt;&lt;span class=&quot;token operator&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;token string&quot;&gt;&amp;quot;joined&amp;quot;&lt;/span&gt;
&lt;span class=&quot;token operator&quot;&gt;|&lt;/span&gt; summarize ts &lt;span class=&quot;token operator&quot;&gt;=&lt;/span&gt; dcount&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;tostring&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;token keyword&quot;&gt;user&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt; &lt;span class=&quot;token keyword&quot;&gt;by&lt;/span&gt; bin&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;token keyword&quot;&gt;Timestamp&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;token number&quot;&gt;1&lt;/span&gt;m&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;,&lt;/span&gt; target
&lt;span class=&quot;token operator&quot;&gt;|&lt;/span&gt; &lt;span class=&quot;token keyword&quot;&gt;where&lt;/span&gt; ts &lt;span class=&quot;token operator&quot;&gt;=&lt;/span&gt;&lt;span class=&quot;token operator&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;token number&quot;&gt;4&lt;/span&gt;
&lt;span class=&quot;token operator&quot;&gt;|&lt;/span&gt; &lt;span class=&quot;token keyword&quot;&gt;distinct&lt;/span&gt; target
&lt;span class=&quot;token operator&quot;&gt;|&lt;/span&gt; summarize make_list&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;target&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;;&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;p&gt;What is this? Well, here we are looking for everyone that has &lt;code class=&quot;language-text&quot;&gt;joined&lt;/code&gt; a channel before we count every unique &lt;code class=&quot;language-text&quot;&gt;user&lt;/code&gt; based on a grouping of time (&lt;code class=&quot;language-text&quot;&gt;bin()&lt;/code&gt;). Now, this is kinda guesswork, and I ran this query until that stage to see which timeunit left me with the least amount of answer. I could have been wrong, but I kept going with this, as the logic still made sense to me. &lt;/p&gt;&lt;p&gt;This line is then counted by the &lt;code class=&quot;language-text&quot;&gt;bin()&lt;/code&gt;and &lt;code class=&quot;language-text&quot;&gt;target&lt;/code&gt;. We know the gang consists of 4 members - this count is stored in &lt;code class=&quot;language-text&quot;&gt;ts&lt;/code&gt; basically a var name short for &lt;code class=&quot;language-text&quot;&gt;timestamp&lt;/code&gt; - name it anything you want. Ending it up, we remove duplicates by the &lt;code class=&quot;language-text&quot;&gt;distinct&lt;/code&gt; function on target before we make it into a list, which is easier to work with in my opinion (bad habit?). This left me with two different channels. I struggled a bit to see how I could differentiate these two channels. &lt;/p&gt;&lt;p&gt;Worst-case-scenario would be to try out 8 different users, 4 for each channel. Or would it? Do I know that each of these two channels has 4 members? No, I dont. By looking into how many members these channels has I was able to see that one channel had multiple members, but (by design?) they are being added to match this criteria up until now. Which means, that we are actually not counting 4 members in this variable, we are counting 4 members that has joined this minute. They may leave, and new members may join the next minute etc. Therefore, we need to find distinct users and count them to four.&lt;/p&gt;&lt;div class=&quot;gatsby-highlight&quot; data-language=&quot;sql&quot;&gt;&lt;pre class=&quot;language-sql&quot;&gt;&lt;code class=&quot;language-sql&quot;&gt;let crimChannel &lt;span class=&quot;token operator&quot;&gt;=&lt;/span&gt; logs
&lt;span class=&quot;token operator&quot;&gt;|&lt;/span&gt; summarize c &lt;span class=&quot;token operator&quot;&gt;=&lt;/span&gt; dcount&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;token keyword&quot;&gt;user&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt; &lt;span class=&quot;token keyword&quot;&gt;by&lt;/span&gt; target
&lt;span class=&quot;token operator&quot;&gt;|&lt;/span&gt; &lt;span class=&quot;token keyword&quot;&gt;where&lt;/span&gt; c &lt;span class=&quot;token operator&quot;&gt;=&lt;/span&gt;&lt;span class=&quot;token operator&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;token number&quot;&gt;4&lt;/span&gt; &lt;span class=&quot;token operator&quot;&gt;and&lt;/span&gt; target &lt;span class=&quot;token operator&quot;&gt;in&lt;/span&gt; &lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;joiners&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt;
&lt;span class=&quot;token operator&quot;&gt;|&lt;/span&gt; summarize make_list&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;target&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;;&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;p&gt;Here we are counting distinct &lt;code class=&quot;language-text&quot;&gt;user&lt;/code&gt;s by &lt;code class=&quot;language-text&quot;&gt;target&lt;/code&gt;, filtering out channels with only 4 members and where they are part of the list in &lt;code class=&quot;language-text&quot;&gt;joiners&lt;/code&gt;, before making it into a list.&lt;/p&gt;&lt;div class=&quot;gatsby-highlight&quot; data-language=&quot;sql&quot;&gt;&lt;pre class=&quot;language-sql&quot;&gt;&lt;code class=&quot;language-sql&quot;&gt;let crimUsers &lt;span class=&quot;token operator&quot;&gt;=&lt;/span&gt; logs
&lt;span class=&quot;token operator&quot;&gt;|&lt;/span&gt; &lt;span class=&quot;token keyword&quot;&gt;where&lt;/span&gt; target &lt;span class=&quot;token operator&quot;&gt;in&lt;/span&gt; &lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;crimChannel&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt;
&lt;span class=&quot;token operator&quot;&gt;|&lt;/span&gt; &lt;span class=&quot;token keyword&quot;&gt;distinct&lt;/span&gt; &lt;span class=&quot;token keyword&quot;&gt;user&lt;/span&gt;
&lt;span class=&quot;token operator&quot;&gt;|&lt;/span&gt; summarize make_list&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;token keyword&quot;&gt;user&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;;&lt;/span&gt;
logs
&lt;span class=&quot;token operator&quot;&gt;|&lt;/span&gt; &lt;span class=&quot;token keyword&quot;&gt;where&lt;/span&gt; &lt;span class=&quot;token keyword&quot;&gt;action&lt;/span&gt; &lt;span class=&quot;token operator&quot;&gt;=&lt;/span&gt;&lt;span class=&quot;token operator&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;token string&quot;&gt;&amp;quot;logged in&amp;quot;&lt;/span&gt; &lt;span class=&quot;token operator&quot;&gt;and&lt;/span&gt; &lt;span class=&quot;token keyword&quot;&gt;user&lt;/span&gt; &lt;span class=&quot;token operator&quot;&gt;in&lt;/span&gt; &lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;crimUsers&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt;
&lt;span class=&quot;token operator&quot;&gt;|&lt;/span&gt; &lt;span class=&quot;token keyword&quot;&gt;distinct&lt;/span&gt; target
&lt;span class=&quot;token operator&quot;&gt;|&lt;/span&gt; project strcat&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;token string&quot;&gt;&amp;quot;https://sneakinto.z13.web.core.windows.net/&amp;quot;&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;,&lt;/span&gt; target&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;p&gt;In this last bit, we are using the output of the previous to find the users who belongs to a channel, and look at all entries where &lt;code class=&quot;language-text&quot;&gt;action&lt;/code&gt; equals &lt;code class=&quot;language-text&quot;&gt;&amp;quot;logged in&amp;quot;&lt;/code&gt;. &lt;/p&gt;&lt;h3 id=&quot;complete-query&quot; style=&quot;position:relative&quot;&gt;&lt;a href=&quot;#complete-query&quot; aria-label=&quot;complete query permalink&quot; class=&quot;heading-anchor before&quot;&gt;&lt;span&gt;#&lt;/span&gt;&lt;/a&gt;Complete Query&lt;/h3&gt;&lt;div class=&quot;gatsby-highlight&quot; data-language=&quot;sql&quot;&gt;&lt;pre class=&quot;language-sql&quot;&gt;&lt;code class=&quot;language-sql&quot;&gt;let logs &lt;span class=&quot;token operator&quot;&gt;=&lt;/span&gt; ChatLogs
&lt;span class=&quot;token operator&quot;&gt;|&lt;/span&gt; extend &lt;span class=&quot;token keyword&quot;&gt;user&lt;/span&gt; &lt;span class=&quot;token operator&quot;&gt;=&lt;/span&gt; tostring&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;split&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;Message&lt;span class=&quot;token punctuation&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;token string&quot;&gt;&amp;quot;&amp;#x27;&amp;quot;&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;[&lt;/span&gt;&lt;span class=&quot;token number&quot;&gt;1&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;]&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;,&lt;/span&gt; target &lt;span class=&quot;token operator&quot;&gt;=&lt;/span&gt; tostring&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;split&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;Message&lt;span class=&quot;token punctuation&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;token string&quot;&gt;&amp;quot;&amp;#x27;&amp;quot;&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;[&lt;/span&gt;&lt;span class=&quot;token number&quot;&gt;3&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;]&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt;
&lt;span class=&quot;token operator&quot;&gt;|&lt;/span&gt; extend activity &lt;span class=&quot;token operator&quot;&gt;=&lt;/span&gt; extract&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;token variable&quot;&gt;@&amp;quot;(joined|left|user|channel|logged in|logged out)&amp;quot;&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;token number&quot;&gt;1&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;,&lt;/span&gt; Message&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;;&lt;/span&gt;
let joiners &lt;span class=&quot;token operator&quot;&gt;=&lt;/span&gt; logs
&lt;span class=&quot;token operator&quot;&gt;|&lt;/span&gt; &lt;span class=&quot;token keyword&quot;&gt;where&lt;/span&gt; activity &lt;span class=&quot;token operator&quot;&gt;=&lt;/span&gt;&lt;span class=&quot;token operator&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;token string&quot;&gt;&amp;quot;joined&amp;quot;&lt;/span&gt;
&lt;span class=&quot;token operator&quot;&gt;|&lt;/span&gt; summarize ts &lt;span class=&quot;token operator&quot;&gt;=&lt;/span&gt; dcount&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;tostring&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;token keyword&quot;&gt;user&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt; &lt;span class=&quot;token keyword&quot;&gt;by&lt;/span&gt; bin&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;token keyword&quot;&gt;Timestamp&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;token number&quot;&gt;1&lt;/span&gt;m&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;,&lt;/span&gt; target
&lt;span class=&quot;token operator&quot;&gt;|&lt;/span&gt; &lt;span class=&quot;token keyword&quot;&gt;where&lt;/span&gt; ts &lt;span class=&quot;token operator&quot;&gt;=&lt;/span&gt;&lt;span class=&quot;token operator&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;token number&quot;&gt;4&lt;/span&gt;
&lt;span class=&quot;token operator&quot;&gt;|&lt;/span&gt; &lt;span class=&quot;token keyword&quot;&gt;distinct&lt;/span&gt; target
&lt;span class=&quot;token operator&quot;&gt;|&lt;/span&gt; summarize make_list&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;target&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;;&lt;/span&gt;
let crimChannel &lt;span class=&quot;token operator&quot;&gt;=&lt;/span&gt; logs
&lt;span class=&quot;token operator&quot;&gt;|&lt;/span&gt; summarize c &lt;span class=&quot;token operator&quot;&gt;=&lt;/span&gt; dcount&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;token keyword&quot;&gt;user&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt; &lt;span class=&quot;token keyword&quot;&gt;by&lt;/span&gt; target
&lt;span class=&quot;token operator&quot;&gt;|&lt;/span&gt; &lt;span class=&quot;token keyword&quot;&gt;where&lt;/span&gt; c &lt;span class=&quot;token operator&quot;&gt;=&lt;/span&gt;&lt;span class=&quot;token operator&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;token number&quot;&gt;4&lt;/span&gt; &lt;span class=&quot;token operator&quot;&gt;and&lt;/span&gt; target &lt;span class=&quot;token operator&quot;&gt;in&lt;/span&gt; &lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;joiners&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt;
&lt;span class=&quot;token operator&quot;&gt;|&lt;/span&gt; summarize make_list&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;target&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;;&lt;/span&gt;
let crimUsers &lt;span class=&quot;token operator&quot;&gt;=&lt;/span&gt; logs
&lt;span class=&quot;token operator&quot;&gt;|&lt;/span&gt; &lt;span class=&quot;token keyword&quot;&gt;where&lt;/span&gt; target &lt;span class=&quot;token operator&quot;&gt;in&lt;/span&gt; &lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;crimChannel&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt;
&lt;span class=&quot;token operator&quot;&gt;|&lt;/span&gt; &lt;span class=&quot;token keyword&quot;&gt;distinct&lt;/span&gt; &lt;span class=&quot;token keyword&quot;&gt;user&lt;/span&gt;
&lt;span class=&quot;token operator&quot;&gt;|&lt;/span&gt; summarize make_list&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;token keyword&quot;&gt;user&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;;&lt;/span&gt;
logs
&lt;span class=&quot;token operator&quot;&gt;|&lt;/span&gt; &lt;span class=&quot;token keyword&quot;&gt;where&lt;/span&gt; activity &lt;span class=&quot;token operator&quot;&gt;=&lt;/span&gt;&lt;span class=&quot;token operator&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;token string&quot;&gt;&amp;quot;logged in&amp;quot;&lt;/span&gt; &lt;span class=&quot;token operator&quot;&gt;and&lt;/span&gt; &lt;span class=&quot;token keyword&quot;&gt;user&lt;/span&gt; &lt;span class=&quot;token operator&quot;&gt;in&lt;/span&gt; &lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;crimUsers&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt;
&lt;span class=&quot;token operator&quot;&gt;|&lt;/span&gt; &lt;span class=&quot;token keyword&quot;&gt;distinct&lt;/span&gt; target
&lt;span class=&quot;token operator&quot;&gt;|&lt;/span&gt; project strcat&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;token string&quot;&gt;&amp;quot;https://sneakinto.z13.web.core.windows.net/&amp;quot;&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;,&lt;/span&gt; target&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;h3 id=&quot;hint-2&quot; style=&quot;position:relative&quot;&gt;&lt;a href=&quot;#hint-2&quot; aria-label=&quot;hint 2 permalink&quot; class=&quot;heading-anchor before&quot;&gt;&lt;span&gt;#&lt;/span&gt;&lt;/a&gt;Hint 2&lt;/h3&gt;&lt;p&gt;&lt;span class=&quot;gatsby-resp-image-wrapper&quot; style=&quot;position:relative;display:block;margin-left:auto;margin-right:auto;max-width:663px&quot;&gt;
      &lt;span class=&quot;gatsby-resp-image-background-image&quot; style=&quot;padding-bottom:16.440422322775262%;position:relative;bottom:0;left:0;background-image:url(&amp;#x27;data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAADCAIAAAAcOLh5AAAACXBIWXMAAA7DAAAOwwHHb6hkAAAAeUlEQVQI11WK6woCIRBGfZ/aqBy1YDPS8VI7o13oT9T7v0aUbRQcPg6HT4TL3Z9v6fpY70+TPnY2Tzeps1/yj//Fmc0CkAGp7dKR9KSQpaeRATzB26F1N0j3iovdQShkHYpuG4qJ1cSqkFfpqEP5CHK7qVFMrPNtfgIwKS2ex5PMFgAAAABJRU5ErkJggg==&amp;#x27;);background-size:cover;display:block&quot;&gt;&lt;/span&gt;
  &lt;img class=&quot;gatsby-resp-image-image&quot; alt=&quot;20221124135911&quot; title=&quot;20221124135911&quot; src=&quot;/static/8b1564e7b69a4d28125400905aa0468a/5c8e6/20221124135911.png&quot; srcSet=&quot;/static/8b1564e7b69a4d28125400905aa0468a/5c8e6/20221124135911.png 663w&quot; sizes=&quot;(max-width: 663px) 100vw, 663px&quot; style=&quot;width:100%;height:100%;margin:0;vertical-align:middle;position:absolute;top:0;left:0&quot; loading=&quot;lazy&quot; decoding=&quot;async&quot;/&gt;
    &lt;/span&gt;&lt;br/&gt;
Nope, not having any trouble, thanks anyways.&lt;/p&gt;&lt;p&gt;The query we have made printed the different links we needed to input into the URL from the Kusto Dashboard inbox:&lt;/p&gt;&lt;ul&gt;&lt;li&gt;&lt;a href=&quot;https://sneakinto.z13.web.core.windows.net/236.48.237.42&quot; target=&quot;_blank&quot; rel=&quot;noreferrer&quot;&gt;https://sneakinto.z13.web.core.windows.net/236.48.237.42&lt;/a&gt;&lt;/li&gt;&lt;li&gt;&lt;a href=&quot;https://sneakinto.z13.web.core.windows.net/119.10.30.154&quot; target=&quot;_blank&quot; rel=&quot;noreferrer&quot;&gt;https://sneakinto.z13.web.core.windows.net/119.10.30.154&lt;/a&gt;&lt;/li&gt;&lt;li&gt;&lt;a href=&quot;https://sneakinto.z13.web.core.windows.net/146.49.19.37&quot; target=&quot;_blank&quot; rel=&quot;noreferrer&quot;&gt;https://sneakinto.z13.web.core.windows.net/146.49.19.37&lt;/a&gt;&lt;/li&gt;&lt;li&gt;&lt;a href=&quot;https://sneakinto.z13.web.core.windows.net/194.243.69.176&quot; target=&quot;_blank&quot; rel=&quot;noreferrer&quot;&gt;https://sneakinto.z13.web.core.windows.net/194.243.69.176&lt;/a&gt;&lt;/li&gt;&lt;/ul&gt;&lt;p&gt;The rest of this challenge is not that KQL-filled. I’ll therefore focusing on the steps that leads us to a solution instead of all the investigational steps. I suggest however that you do some investigation yourself to see if you can continue from here.&lt;/p&gt;&lt;p&gt;At first, we can see that each one of the links contains some files. The &lt;code class=&quot;language-text&quot;&gt;utils.txt&lt;/code&gt; is interesting:&lt;/p&gt;&lt;div class=&quot;gatsby-highlight&quot; data-language=&quot;sql&quot;&gt;&lt;pre class=&quot;language-sql&quot;&gt;&lt;code class=&quot;language-sql&quot;&gt;    &lt;span class=&quot;token comment&quot;&gt;// Handy utils&lt;/span&gt;

    &lt;span class=&quot;token comment&quot;&gt;// 1) Utility to discover secondary messages.&lt;/span&gt;
    &lt;span class=&quot;token comment&quot;&gt;// Usage: ReadMessage(Message, Key)&lt;/span&gt;
    let ReadMessage &lt;span class=&quot;token operator&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;Message:string&lt;span class=&quot;token punctuation&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;token keyword&quot;&gt;Key&lt;/span&gt;:string&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt; 
    {
        let m &lt;span class=&quot;token operator&quot;&gt;=&lt;/span&gt; Message&lt;span class=&quot;token punctuation&quot;&gt;;&lt;/span&gt; let K &lt;span class=&quot;token operator&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;token keyword&quot;&gt;Key&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;;&lt;/span&gt; let l &lt;span class=&quot;token operator&quot;&gt;=&lt;/span&gt; toscalar&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;token keyword&quot;&gt;print&lt;/span&gt; s &lt;span class=&quot;token operator&quot;&gt;=&lt;/span&gt; split&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;split&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;K&lt;span class=&quot;token punctuation&quot;&gt;,&lt;/span&gt;&lt;span class=&quot;token string&quot;&gt;&amp;#x27;:&amp;#x27;&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;[&lt;/span&gt;&lt;span class=&quot;token number&quot;&gt;1&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;]&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;token string&quot;&gt;&amp;#x27;,&amp;#x27;&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt; &lt;span class=&quot;token operator&quot;&gt;|&lt;/span&gt; mv&lt;span class=&quot;token operator&quot;&gt;-&lt;/span&gt;expand s &lt;span class=&quot;token operator&quot;&gt;|&lt;/span&gt; summarize make_list&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;tolong&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;s&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;;&lt;/span&gt;
        let ma &lt;span class=&quot;token operator&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;i1:long&lt;span class=&quot;token punctuation&quot;&gt;,&lt;/span&gt; i2:long&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt; { make_string&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;token keyword&quot;&gt;repeat&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;tolong&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;l&lt;span class=&quot;token punctuation&quot;&gt;[&lt;/span&gt;i1&lt;span class=&quot;token punctuation&quot;&gt;]&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt;&lt;span class=&quot;token operator&quot;&gt;-&lt;/span&gt;tolong&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;l&lt;span class=&quot;token punctuation&quot;&gt;[&lt;/span&gt;i2&lt;span class=&quot;token punctuation&quot;&gt;]&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;token number&quot;&gt;1&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt;}&lt;span class=&quot;token punctuation&quot;&gt;;&lt;/span&gt; 
        let ms &lt;span class=&quot;token operator&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;d:dynamic&lt;span class=&quot;token punctuation&quot;&gt;,&lt;/span&gt; s:long&lt;span class=&quot;token punctuation&quot;&gt;,&lt;/span&gt; e:long&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt; { make_string&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;array_slice&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;d&lt;span class=&quot;token punctuation&quot;&gt;,&lt;/span&gt; s&lt;span class=&quot;token punctuation&quot;&gt;,&lt;/span&gt; e&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt; }&lt;span class=&quot;token punctuation&quot;&gt;;&lt;/span&gt;   
        let mc &lt;span class=&quot;token operator&quot;&gt;=&lt;/span&gt; m has &lt;span class=&quot;token string&quot;&gt;&amp;#x27;...&amp;#x27;&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;;&lt;/span&gt;
        &lt;span class=&quot;token keyword&quot;&gt;print&lt;/span&gt; s&lt;span class=&quot;token operator&quot;&gt;=&lt;/span&gt;split&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;split&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;replace_regex&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;m&lt;span class=&quot;token punctuation&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;token variable&quot;&gt;@&amp;#x27;[\s\?]+&amp;#x27;&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;token string&quot;&gt;&amp;#x27; &amp;#x27;&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;,&lt;/span&gt;substring&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;K&lt;span class=&quot;token punctuation&quot;&gt;,&lt;/span&gt;&lt;span class=&quot;token number&quot;&gt;9&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;,&lt;/span&gt;&lt;span class=&quot;token number&quot;&gt;3&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;[&lt;/span&gt;&lt;span class=&quot;token number&quot;&gt;1&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;]&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;token string&quot;&gt;&amp;#x27; &amp;#x27;&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt;
        &lt;span class=&quot;token operator&quot;&gt;|&lt;/span&gt; mv&lt;span class=&quot;token operator&quot;&gt;-&lt;/span&gt;expand with_itemindex&lt;span class=&quot;token operator&quot;&gt;=&lt;/span&gt;r s &lt;span class=&quot;token keyword&quot;&gt;to&lt;/span&gt; typeof&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;string&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt; &lt;span class=&quot;token operator&quot;&gt;|&lt;/span&gt; serialize 
        &lt;span class=&quot;token operator&quot;&gt;|&lt;/span&gt; &lt;span class=&quot;token keyword&quot;&gt;where&lt;/span&gt; r &lt;span class=&quot;token operator&quot;&gt;in&lt;/span&gt; &lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;l&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt;
        &lt;span class=&quot;token operator&quot;&gt;|&lt;/span&gt; extend s &lt;span class=&quot;token operator&quot;&gt;=&lt;/span&gt; iif&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;r&lt;span class=&quot;token operator&quot;&gt;-&lt;/span&gt;&lt;span class=&quot;token number&quot;&gt;1&lt;/span&gt; &lt;span class=&quot;token operator&quot;&gt;=&lt;/span&gt;&lt;span class=&quot;token operator&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;token keyword&quot;&gt;prev&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;r&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;,&lt;/span&gt; replace_string&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;strcat&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;token keyword&quot;&gt;prev&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;s&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;,&lt;/span&gt; s&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;,&lt;/span&gt;&lt;span class=&quot;token string&quot;&gt;&amp;#x27;o&amp;#x27;&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;,&lt;/span&gt;&lt;span class=&quot;token string&quot;&gt;&amp;#x27;ou&amp;#x27;&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;,&lt;/span&gt; s&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt;
        &lt;span class=&quot;token operator&quot;&gt;|&lt;/span&gt; &lt;span class=&quot;token keyword&quot;&gt;where&lt;/span&gt; &lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;r&lt;span class=&quot;token operator&quot;&gt;+&lt;/span&gt;&lt;span class=&quot;token number&quot;&gt;1&lt;/span&gt; &lt;span class=&quot;token operator&quot;&gt;!=&lt;/span&gt; &lt;span class=&quot;token keyword&quot;&gt;next&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;r&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt;
        &lt;span class=&quot;token operator&quot;&gt;|&lt;/span&gt; summarize s&lt;span class=&quot;token operator&quot;&gt;=&lt;/span&gt;strcat_array&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;make_list&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;s&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;,&lt;/span&gt; iff&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;mc&lt;span class=&quot;token punctuation&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;token string&quot;&gt;&amp;#x27;+%2B&amp;#x27;&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;token string&quot;&gt;&amp;#x27; &amp;#x27;&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt;
        &lt;span class=&quot;token operator&quot;&gt;|&lt;/span&gt; extend k &lt;span class=&quot;token operator&quot;&gt;=&lt;/span&gt; series_subtract&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;series_add&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;to_utf8&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;K&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;,&lt;/span&gt; l&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;token keyword&quot;&gt;repeat&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;token number&quot;&gt;23&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;token number&quot;&gt;10&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt;
        &lt;span class=&quot;token operator&quot;&gt;|&lt;/span&gt; project result&lt;span class=&quot;token operator&quot;&gt;=&lt;/span&gt;iif&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;mc&lt;span class=&quot;token punctuation&quot;&gt;,&lt;/span&gt; strcat&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;ms&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;k&lt;span class=&quot;token punctuation&quot;&gt;,&lt;/span&gt;&lt;span class=&quot;token number&quot;&gt;0&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;,&lt;/span&gt;&lt;span class=&quot;token number&quot;&gt;3&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;,&lt;/span&gt; ma&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;token number&quot;&gt;8&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;,&lt;/span&gt;&lt;span class=&quot;token number&quot;&gt;2&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;,&lt;/span&gt; ms&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;k&lt;span class=&quot;token punctuation&quot;&gt;,&lt;/span&gt;&lt;span class=&quot;token number&quot;&gt;4&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;,&lt;/span&gt;&lt;span class=&quot;token number&quot;&gt;6&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;,&lt;/span&gt; ms&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;l&lt;span class=&quot;token punctuation&quot;&gt;,&lt;/span&gt;&lt;span class=&quot;token number&quot;&gt;8&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;,&lt;/span&gt;&lt;span class=&quot;token number&quot;&gt;8&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;,&lt;/span&gt; ms&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;k&lt;span class=&quot;token punctuation&quot;&gt;,&lt;/span&gt;&lt;span class=&quot;token number&quot;&gt;7&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;,&lt;/span&gt;&lt;span class=&quot;token number&quot;&gt;7&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;,&lt;/span&gt; ma&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;token number&quot;&gt;8&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;,&lt;/span&gt;&lt;span class=&quot;token number&quot;&gt;0&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;,&lt;/span&gt; s&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;,&lt;/span&gt; s&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt;
    }&lt;span class=&quot;token punctuation&quot;&gt;;&lt;/span&gt;
    ReadMessage&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;
    &lt;span class=&quot;token string&quot;&gt;&amp;#x27;&amp;#x27;&amp;#x27;
    Hi there! How are you?

    PS: 
    This is a nice utility that reveals what hidden messages the text may have.
    We may read the message and think: is there anything beyond words?
    Can we find it without the utility, or it will become too much of a headache?
    &amp;#x27;&amp;#x27;&amp;#x27;&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;,&lt;/span&gt;
    h&lt;span class=&quot;token variable&quot;&gt;@&amp;#x27;dhkl4fva!that:2,9,15,22,31&amp;#x27;&lt;/span&gt;
    &lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt;

    &lt;span class=&quot;token comment&quot;&gt;// 2) Get GEO location from images:&lt;/span&gt;
    &lt;span class=&quot;token comment&quot;&gt;// Use https://tool.geoimgr.com/&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;p&gt;There is also a link to this site: &lt;a href=&quot;https://news.microsoft.com/innovation-stories/project-natick-underwater-datacenter/&quot; target=&quot;_blank&quot; rel=&quot;noreferrer&quot;&gt;https://news.microsoft.com/innovation-stories/project-natick-underwater-datacenter/&lt;/a&gt;&lt;/p&gt;&lt;p&gt;This image:
&lt;span class=&quot;gatsby-resp-image-wrapper&quot; style=&quot;position:relative;display:block;margin-left:auto;margin-right:auto;max-width:765px&quot;&gt;
      &lt;span class=&quot;gatsby-resp-image-background-image&quot; style=&quot;padding-bottom:100.52287581699346%;position:relative;bottom:0;left:0;background-image:url(&amp;#x27;data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAAUCAIAAAAC64paAAAACXBIWXMAAA7DAAAOwwHHb6hkAAACt0lEQVQ4y5WT+26dOBCHef/n2UfYizbabrI5zYEABw6Eq218NwbfWAFNm1bqH/00sjxmZvTzeIh+e0h/f3p9+C/+6yl+uKR//Hv58/HlJa/Son69VUXdlW99XrWPcfmU3P9+ij99zh6vt38u6adLFn2uYf42XNIyq/t6QHndZ1Vb9aDuhrLumh42A2wHMCAGsOgBgZgPiPWAdpBEI2aM8XpAcCJFWQ4jgGiCaJJqRpgIxvn9XgyUcFVjOTFddIJxgQjTeomYWp0xSkpKSJ5njDEphZDCO7csel+l5FIppRDlTKiJKoxxPwLvfdQhSigFEAmprPPWOeeDsZ5zAQCc9WKcF1JwIfGEGedSCowJRHt8hJhalmVdV70sqzGcc4yxtdZ7b6113u92sLsfWFcTEaEZpWbdMcZorRnnznvvgw/B+fAl/3C9P09CCGE1NiJShz3UL3oxxqzWzauVejVuM37bV7etLvxgZr+a25O3ba+0HMzzzDmblQrebyGcFkLYvhFOk1JFbz0si+J2u2VZdr1e4zh+fn7e/dstz/OyvCdJUte1XnZd1tqzjPc+eU33d6aEQAgRQuSAHkAIAQDwHYTQNE2MsVOFtfYaJxEgHKH9W38wjiMA4NyM4/i1RNM0AIDzsO/7aUJxkkQDInia5nmW+3AIpZTWWkrJD8Q7jDEhhHzHWhPHSQSpmJWaD84gCCFjzFq7/Rzv/SEbswkhAMAwDOM4DsPQtu0pkhCCEJrn2TlnjFmWxTn3XTKRWnCe53lRFNlBWZZVVRVFcb/f8zyvqqppmjzP0zRtmoZzTiklhOyymVq2LZzRJ2fDzwvvf9yxIYRorUMI55AaY65xHFG1OGvbtuv7vuu6swrG2BysH/jYBe/9yzWOAObq6PPXN/x+nn7asDh5jSaupgk1Tcs5334FjOn/wWFnJzebsnwAAAAASUVORK5CYII=&amp;#x27;);background-size:cover;display:block&quot;&gt;&lt;/span&gt;
  &lt;img class=&quot;gatsby-resp-image-image&quot; alt=&quot;20221124142310&quot; title=&quot;20221124142310&quot; src=&quot;/static/3aa01e57fd07e53d98d197c845eac764/e97d8/20221124142310.png&quot; srcSet=&quot;/static/3aa01e57fd07e53d98d197c845eac764/e97d8/20221124142310.png 765w&quot; sizes=&quot;(max-width: 765px) 100vw, 765px&quot; style=&quot;width:100%;height:100%;margin:0;vertical-align:middle;position:absolute;top:0;left:0&quot; loading=&quot;lazy&quot; decoding=&quot;async&quot;/&gt;
    &lt;/span&gt;  &lt;/p&gt;&lt;p&gt;Use the geoimgr.com link from the utils.txt message and import &lt;code class=&quot;language-text&quot;&gt;image3.jpg&lt;/code&gt; to get the correct latitude and longitude we need for the task.&lt;/p&gt;&lt;h3 id=&quot;hint-3&quot; style=&quot;position:relative&quot;&gt;&lt;a href=&quot;#hint-3&quot; aria-label=&quot;hint 3 permalink&quot; class=&quot;heading-anchor before&quot;&gt;&lt;span&gt;#&lt;/span&gt;&lt;/a&gt;Hint 3&lt;/h3&gt;&lt;p&gt;&lt;span class=&quot;gatsby-resp-image-wrapper&quot; style=&quot;position:relative;display:block;margin-left:auto;margin-right:auto;max-width:402px&quot;&gt;
      &lt;span class=&quot;gatsby-resp-image-background-image&quot; style=&quot;padding-bottom:27.114427860696516%;position:relative;bottom:0;left:0;background-image:url(&amp;#x27;data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAAFCAIAAADKYVtkAAAACXBIWXMAAA7DAAAOwwHHb6hkAAAAs0lEQVQY043OywqDMBAF0PyQ1cQiWk2MEcnkgTSJVqr08f9fUeKi7krhLC73zmKQcCss795vw/SA5SX8ljD4E6J2gtuT2ln4Vbh7rUNC5S/syCih8sRk1qqUQcog4yrv7bm3RJi8t5GwR/jaG1QMIx+XWodah8aEi/KNCRU4audSXkvpqJlqHZsK3EX5CFyjQzGMKG0h7wzmGnOFO5VxhXn8gggTQwtkn7IWMFek06TbL3cf9vlMrsMDQ3YAAAAASUVORK5CYII=&amp;#x27;);background-size:cover;display:block&quot;&gt;&lt;/span&gt;
  &lt;img class=&quot;gatsby-resp-image-image&quot; alt=&quot;20221124140022&quot; title=&quot;20221124140022&quot; src=&quot;/static/c30efa3eb6807f456c5294b33e9d8a9a/752e8/20221124140022.png&quot; srcSet=&quot;/static/c30efa3eb6807f456c5294b33e9d8a9a/752e8/20221124140022.png 402w&quot; sizes=&quot;(max-width: 402px) 100vw, 402px&quot; style=&quot;width:100%;height:100%;margin:0;vertical-align:middle;position:absolute;top:0;left:0&quot; loading=&quot;lazy&quot; decoding=&quot;async&quot;/&gt;
    &lt;/span&gt;  &lt;/p&gt;&lt;p&gt;Using the key from task 4 should probably be our go-to! Let’s move on!&lt;/p&gt;&lt;p&gt;Copy the whole &lt;code class=&quot;language-text&quot;&gt;utils.txt&lt;/code&gt; message into ADX and run it. This is utility to decrypt a hidden message. Now, finding the text to decrypt was a really painful task. Finally I found out that by decrypting the message in the dashboard of the last task starting with: “PS:…” - I got a link to bing.com(PS: remember to include the function as well.):&lt;/p&gt;&lt;div class=&quot;gatsby-highlight&quot; data-language=&quot;text&quot;&gt;&lt;pre class=&quot;language-text&quot;&gt;&lt;code class=&quot;language-text&quot;&gt;ReadMessage(
```
PS:
Feeling uncomfortable and wondering about an elephant in the room: why would I help you?
Nothing escapes you, ha?
Let’s put it this way: we live in a circus full of competition. I can use some of your help, and nothing breaks if you use mine... You see, everything is about symbiosis.
Anyway, what do you have to lose? Look on an illustrated past, fast forward N days and realize the future is here.
```,
h@&amp;#x27;wytaPUJM!PS:2,7,17,29,42,49,58,59,63&amp;#x27;
)&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;p&gt;Go to the link: bing.com?q=uncomfortable+%2Belephant+%2Bescapes+%2Bcircus+%2Bbreaks+%2Beverything+%2Btoulouse+%2Billustrated and enter into the first search result.&lt;/p&gt;&lt;p&gt;Now, two other hints that I used a lot of time to correlate between was the content of the link and how to use it. Reading through the email in the screenshot above gave me some clue. Read the &lt;code class=&quot;language-text&quot;&gt;message-project-x.png&lt;/code&gt; from one of the sneakinto websites. So, we need the date of the Project X image as well.&lt;/p&gt;&lt;p&gt;Now, get the dates of the projext X image, the year of elephant image and plot them into the algorithm:&lt;/p&gt;&lt;div class=&quot;gatsby-highlight&quot; data-language=&quot;sql&quot;&gt;&lt;pre class=&quot;language-sql&quot;&gt;&lt;code class=&quot;language-sql&quot;&gt;&lt;span class=&quot;token keyword&quot;&gt;print&lt;/span&gt; make_datetime&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;token number&quot;&gt;2020&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;token number&quot;&gt;07&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;token number&quot;&gt;15&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt; &lt;span class=&quot;token operator&quot;&gt;+&lt;/span&gt; &lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;token number&quot;&gt;1891&lt;/span&gt;d &lt;span class=&quot;token operator&quot;&gt;%&lt;/span&gt; &lt;span class=&quot;token number&quot;&gt;1000&lt;/span&gt;d&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;;&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;p&gt;We are using the algorithm inside KQL here. We set the date of the ProjectX in &lt;code class=&quot;language-text&quot;&gt;make_datetime()&lt;/code&gt; and then we add the modulation between the two numbers and set their data types to &lt;code class=&quot;language-text&quot;&gt;d&lt;/code&gt; (days) which makes it able to do calculations on dates/times.&lt;/p&gt;&lt;p&gt;When plotting each of the answers in - note the length of each answer. Do you need to round any number up or down?&lt;/p&gt;&lt;p&gt;NOTE! There was some issue with the lat and long input - it had been switched around. Try to switch if you fail on delivering the first time. Your answer is most likely correct.&lt;/p&gt;&lt;h1 id=&quot;badge-time&quot; style=&quot;position:relative&quot;&gt;&lt;a href=&quot;#badge-time&quot; aria-label=&quot;badge time permalink&quot; class=&quot;heading-anchor before&quot;&gt;&lt;span&gt;#&lt;/span&gt;&lt;/a&gt;Badge-time&lt;/h1&gt;&lt;p&gt;&lt;span class=&quot;gatsby-resp-image-wrapper&quot; style=&quot;position:relative;display:block;margin-left:auto;margin-right:auto;max-width:133px&quot;&gt;
      &lt;span class=&quot;gatsby-resp-image-background-image&quot; style=&quot;padding-bottom:113.53383458646617%;position:relative;bottom:0;left:0;background-image:url(&amp;#x27;data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAAXCAIAAACEf/j0AAAACXBIWXMAAA7DAAAOwwHHb6hkAAAEh0lEQVQ4y02R2XPaVhTG9d7H9qHtOGmcOLZZTPDW1A1IYkscDEhsAkkIAUI7kpBAYCGQAdtx6sRZnMzkJZnMtA+dJF2SxpO0f0H/rRZjt5n5Hu499/vN+e45gNobqb2RYo30wd5ULWe/5ewbzr4x2DOcfbU3avZ31d7ImNTvNO2xYg2b9pg1eoBiDac6ePzs6Ysffz3589XbkzfvP/7+4a+fXv/24Nnzlz+/+eWPj6/enrx+9+H1uw/Dw0eiOdDscV23gGZ/dypr73B8/3h8/7h/cDS6d7x79KR/cNQZ3XV+eDi693j36Mng4MH4/nFnfFe1x4azz7dtgBR0UmiSQhPntSKnFlkV5zScm5xxXiNO6zinTq6nRYKfmEuinmcaAJwmYJSA00ToXDCKg0gRQnEYxSEEh5AiiBRD6PnruR9MFYFItjRVNEtFsqVQGr+F0dmaRIh6WW6V5RbON1Gaj+aoUJqM5qhzPwWjBBDOkBNlyVCaCGdInNfE7o5i7TQsR7bGsjVSLKdhOWx7kK4KMIqf+TMkhOBncChNRHMUo29XGh2MZsuKTat2iWFLrFBWHEruYXSd0SxC0GB00iOSncJpMnz6mZpm0sqwJW882v6mIwSadNgqr+62Lna0NUtdvdOeZZnNuj4qsDKE4JEMCaWKQDhNQEgxz0g1zWk2QEeb8Xj9m7BHJtwxyIchbqVyGbrh8l3zd8WFWg2t64N4sRJC8TM4kiE5o0vw9k7Xz5YuffH16sXLy7ejS6lNbwz2wYFrs3PLX15Y4UsuiYtWNYcUNBgpQkgRgJFCgqwJ7Z7YccqcPG7PhgO+cNBfp+beP/A8cxYScZfOLhCouy0uk3yr0R0wmhnLlsAkBkCpQrYiiKYtmjYl6I4+v80uHnavHjoX/n7ufjFerJMumfYo1UWdX6ekjmj2eMO6XaCDiTwApbA8I4lmj9EdUc7Z6szslbVv1/xoYv5xZwmJ+W9FPFrVHdjw6XV3ha3y7YHQtuJ4JbCVA6Aklq0Ija5N8NadvicELfhXlhjyKpNe6UlzB90riy7/sv+ab8kfj7kNOUQ3bLE96TyBwSSWIKqS2afFpmPOxmDvoX1px7x4T/GfPHQ93ZvZN90G5yVQbwz2tsR1Strm9E40Qwa3cgCcwqJpnNO7JaE72r6aTy1srK9+9vlaYtMj4T61PlfOL6Fx/1bMl467DfEG3eiXRBVKYWAiP5k2mMxjNaGuD0UpPlC/gm+4gxteJO6KgL6bEe/KytLKsifwvafNztM1gms58QINJadwqgAlsRBSrCmtaqPPc8jQWO+J19vU9UZu2ZJndoz5nua3tO/oGs7qgwIjgYl8CCmcxYZPM0QzRE01udawJPbKkkkJBlPBGBYrCS1K7FCSLZg7BKdAyTyU/ASGkmd8GMVxVhbblmj2RbPP6P3J/sy+ZNqc3smUWTCJQcn8tF9wuqqp4FQBTOSDidzNHJWtCASnlqVmWWzirIKW6pE0HtzK/meGklggngWmMT4RBm7lgvEsmMjDSQyeDCYXmFxzpxn/d/4L/wP2A/Rsho0jfAAAAABJRU5ErkJggg==&amp;#x27;);background-size:cover;display:block&quot;&gt;&lt;/span&gt;
  &lt;img class=&quot;gatsby-resp-image-image&quot; alt=&quot;20221124152050&quot; title=&quot;20221124152050&quot; src=&quot;/static/0615d864bb5c3ce968a98f340a8b927b/68f3b/20221124152050.png&quot; srcSet=&quot;/static/0615d864bb5c3ce968a98f340a8b927b/68f3b/20221124152050.png 133w&quot; sizes=&quot;(max-width: 133px) 100vw, 133px&quot; style=&quot;width:100%;height:100%;margin:0;vertical-align:middle;position:absolute;top:0;left:0&quot; loading=&quot;lazy&quot; decoding=&quot;async&quot;/&gt;
    &lt;/span&gt;&lt;/p&gt;&lt;p&gt;Good job Senior Detective! Did you learn anything new? Please let me know, I’d love to hear about it.&lt;/p&gt;</content:encoded><tags>KQL,Azure Data Explorer,Data Science</tags><featuredImage>https://blog.amestofortytwo.com/static/d9e052cdd999968c22f9126d306f8d79/badge.png</featuredImage></item><item><title><![CDATA[Konfigurasjonskontroll for økt sikkerhet i skyløsninger]]></title><description><![CDATA[Vi lever i en usikker tid. Det er krig i Europa. Nasjonal Sikkerhetsmyndighet (NSM) ber norske virksomheter være ekstra årvåkne. Og Uber ble utsatt for datainnbrudd.]]></description><link>https://blog.amestofortytwo.com/konfigurasjonskontroll-for-okt-sikkerhet</link><guid isPermaLink="false">https://blog.amestofortytwo.com/konfigurasjonskontroll-for-okt-sikkerhet</guid><category><![CDATA[Cyber Security]]></category><category><![CDATA[Sentinel]]></category><pubDate>Wed, 12 Oct 2022 00:00:00 GMT</pubDate><content:encoded>&lt;h1 id=&quot;konfigurasjonskontroll-for-økt-sikkerhet-i-skyløsninger&quot; style=&quot;position:relative&quot;&gt;&lt;a href=&quot;#konfigurasjonskontroll-for-%C3%B8kt-sikkerhet-i-skyl%C3%B8sninger&quot; aria-label=&quot;konfigurasjonskontroll for økt sikkerhet i skyløsninger permalink&quot; class=&quot;heading-anchor before&quot;&gt;&lt;span&gt;#&lt;/span&gt;&lt;/a&gt;Konfigurasjonskontroll for økt sikkerhet i skyløsninger&lt;/h1&gt;&lt;p&gt;Vi lever i en usikker tid.
Det er krig i Europa.
Nasjonal Sikkerhetsmyndighet (NSM) ber norske virksomheter være ekstra årvåkne.
Og Uber ble utsatt for datainnbrudd.  &lt;/p&gt;&lt;p&gt;Den nasjonale sikkerhetsmåneden er et flott tiltak fra NSM, hvor fokuset i år er på løsepengevirus og ulike former for sosial manipulering, som eksempelvis phishing.&lt;/p&gt;&lt;p&gt;Datainnbruddet hos Uber er et godt eksempel på hvor lite som skal til for at en angriper med onde hensikter kan klare å komme seg på innsiden av en virksomhet, og derfra tilegne seg rettigheter og tilgang til sentrale systemer og sensitiv informasjon.&lt;/p&gt;&lt;p&gt;Hos Uber sviktet det på mange punkter, og det er dessverre ikke unikt. De færreste virksomheter har systemer og prosesser som er i stand til å fange opp alle svake punkter i systemene og på tvers av teknologi og menneskelige faktorer. Det er gjerne sistnevnte som er vanskeligst å ha kontroll på. Som med mye annet handler dette også om prioriteringer, fokus og kontinuitet over tid.&lt;/p&gt;&lt;p&gt;Den teknologiske siden er enklere å kontrollere, men det er mange som kjenner på usikkerhet knyttet til konfigurasjonskontroll og stadig flere innstillingsmuligheter. Særlig innstillinger som ikke er åpenbart tilgjengelig, og krever inngående kunnskap om produktene man benytter i dagens komplekse IT-landskap.&lt;/p&gt;&lt;p&gt;De fleste norske bedrifter baserer mye av sin virksomhet i større eller mindre grad på Microsoft 365. Noen har et veloverveid forhold til lisensene de har, og hvordan de kan utnytte funksjonaliteten de dekker til å sikre seg best mulig. Andre, derimot, har i mindre grad anledning til å sette seg inn i dette. Det er en krevende øvelse å holde kontroll på konfigurasjonene for alle modulene i denne tjenesten. Selv om Microsoft gjør en god jobb med å møte sikkerhetsutfordringene med tjenestene sine er det fortsatt mye som må justeres på fra tid til annen for å optimalisere sikkerheten i Microsoft 365 og de tilhørende løsningene.&lt;/p&gt;&lt;p&gt;Et mye diskutert og fortsatt viktig tema er multifaktorautentisering (MFA). Spesielt aktuelt er temaet i forbindelse med datainnbruddet hos Uber nylig, der en angriper hadde fått tilgang til et passord via de mørkere delene av internett. Dette passordet ble brukt til å spamme brukeren med MFA-forespørsler, samtidig som brukeren ble kontaktet via sosiale medier, forkledd som IT-avdelingen, med beskjed om å godkjenne forespørselen de sendte ham.&lt;/p&gt;&lt;p&gt;Dette er noe forenklet, men sannsynligvis kunne dette vært unngått om Uber hadde benyttet en eller flere av følgende funksjoner:&lt;/p&gt;&lt;ul&gt;&lt;li&gt;Azure AD Identity Protection for å avdekke unormale påloggingsmønstre&lt;/li&gt;&lt;li&gt;Den nye Require authentication strength-mekanismen i Conditional Access for å tvinge frem sikrere krav til type MFA, eksempelvis Number Matching.&lt;/li&gt;&lt;li&gt;Microsoft Sentinel for overvåking av antall MFA-forespørsler per bruker&lt;/li&gt;&lt;/ul&gt;&lt;p&gt;Det er vanskelig å sikre seg fullstendig mot dagens trusselbilde, men det finnes stadig bedre løsninger og metoder som kan sikre en virksomhet mot angrep og datainnbrudd. Nøkkelen ligger i god grunnleggende sikkerhetshygiene kombinert med bruk av ny funksjonalitet der dette kreves for å holde tritt med de ondsinnede aktørene.&lt;/p&gt;&lt;h2 id=&quot;relevante-sikringstiltak-oppsummert&quot; style=&quot;position:relative&quot;&gt;&lt;a href=&quot;#relevante-sikringstiltak-oppsummert&quot; aria-label=&quot;relevante sikringstiltak oppsummert permalink&quot; class=&quot;heading-anchor before&quot;&gt;&lt;span&gt;#&lt;/span&gt;&lt;/a&gt;Relevante sikringstiltak oppsummert&lt;/h2&gt;&lt;p&gt;Identity Protection er en funksjon fra Microsoft som gjennom ulike teknikker kan automatisere overvåking og iverksette tiltak mot angrep knyttet til brukerkontoer.&lt;/p&gt;&lt;p&gt;Require authentication strength-funksjonen i Conditional Access er en funksjon som foreløpig er i Public Preview. Den åpner for muligheten til å kontrollere hvilken type MFA som skal benyttes i ulike situasjoner.&lt;/p&gt;&lt;p&gt;Number Matching er en passordløs innloggingsfunksjon fra Microsoft som endrer prosessen ved multifaktorautentisering gjennom Authenticator-appen, der brukeren må skrive inn en tosifret kode for å bekrefte identiteten sin, fremfor å bare godkjenne en push-melding på telefonen. Som et enda sterkere tiltak kan man vurdere det som omtales som «phishing-resistant MFA», basert på sertifikater, fysiske sikkerhetsnøkler eller ansiktsgjenkjenning.&lt;/p&gt;&lt;p&gt;Som en forlengelse av dette kan man med fordel benytte Microsoft Sentinel for å lage spørringer som kjøres regelmessig eller i nær sanntid for å detektere endringer på brukerkontoer eller MFA-oppsett i tenanten, samt varsle dersom en bruker får unormalt mange MFA-forespørsler innenfor et kort tidsrom. Spesielt bør man være oppmerksom på endringer av privilegerte tilganger, være seg admin-kontoer så vel som tjenestekontoer og lignende.&lt;/p&gt;</content:encoded><tags>Cyber Security,Sentinel</tags><featuredImage>https://blog.amestofortytwo.com/static/ca386487c8a4c1eb2fcfb9ef20fd5707/splash.png</featuredImage></item><item><title><![CDATA[Don’t call security – install them!]]></title><description><![CDATA[If your business does not have a serious security system that constantly monitors the whole system, you are really only waiting for uninvited guests. This is not scaremongering but a statistical observation.]]></description><link>https://blog.amestofortytwo.com/install-security</link><guid isPermaLink="false">https://blog.amestofortytwo.com/install-security</guid><category><![CDATA[Cyber Security]]></category><category><![CDATA[Sentinel]]></category><category><![CDATA[MDR]]></category><pubDate>Mon, 30 May 2022 00:00:00 GMT</pubDate><content:encoded>&lt;h1 id=&quot;dont-call-security--install-them&quot; style=&quot;position:relative&quot;&gt;&lt;a href=&quot;#dont-call-security--install-them&quot; aria-label=&quot;dont call security  install them permalink&quot; class=&quot;heading-anchor before&quot;&gt;&lt;span&gt;#&lt;/span&gt;&lt;/a&gt;Don’t call security – install them!&lt;/h1&gt;&lt;p&gt;If your business does not have a serious security system that constantly monitors the whole system, you are really only waiting for uninvited guests.
This is not scaremongering but a statistical observation.&lt;/p&gt;&lt;p&gt;In Norway, according to NHO, 20% of all businesses have experienced a cyber-attack. If you look at businesses with more than 50 employees, the percentage is a whopping 33% – one third! So, what can you really do to prevent being hacked? &lt;strong&gt;What would you give to know when it is your turn?&lt;/strong&gt;&lt;/p&gt;&lt;p&gt;This is what I would like to address in the upcoming webinar TechTalk on June 3rd at 09:00 CET, together with Kent Husvik from our partner Microsoft. We will talk about cyber-attacks, hackers, and security threats in the Norwegian market.&lt;/p&gt;&lt;p&gt;Numbers from Microsoft indicate a 300% increase in registered ransomware attacks, causing untold damages, financial loss and frustration, even to small and medium sized businesses. 60% cannot do business after being cyber attacked, and the costs often surpass one million NOKs. However, early detection can reveal security breaches and prevent the whole business from going down.&lt;/p&gt;&lt;p&gt;The webinar will deal with general threats and security measures, and also delve into some more specific ways that security solutions work towards hackers and cyber-attacks. We will also talk about best practice when implementing a security system, what to consider and perhaps what not to do. How should you partner with a supplier, and divvy up responsibility?&lt;/p&gt;&lt;p&gt;Microsoft offer cutting edge security through their acclaimed Sentinel solution, which handles events, logs, and alarms in an IT environment.&lt;/p&gt;&lt;p&gt;&lt;strong&gt;Managed Detection and Response&lt;/strong&gt; is a service from Amesto Fortytwo that adds pre-configured rules that tap into the events and logs from Sentinel. This high-level security monitoring makes early breach detection possible. Preventing an attack thanks to early detection of suspicious activities suddenly becomes a viable option. If a security solution can keep your business productive, it is a critical investment.&lt;/p&gt;&lt;p&gt;The TechTalk webinar is free, of course, and you should really consider joining. Better safe than sorry, always! Hope to see you there on June 3rd!&lt;/p&gt;&lt;p&gt;&lt;div class=&quot;gatsby-resp-iframe-wrapper&quot; style=&quot;padding-bottom:56.49999999999999%;position:relative;height:0;overflow:hidden&quot;&gt; &lt;iframe loading=&quot;lazy&quot; src=&quot;https://www.youtube.com/embed/2Yr4wkHcBw4?feature=oembed&quot; frameBorder=&quot;0&quot; allow=&quot;accelerometer; autoplay; clipboard-write; encrypted-media; gyroscope; picture-in-picture&quot; allowfullscreen=&quot;&quot; title=&quot;Microsoft Sentinel based Managed Detection and Response&quot; style=&quot;position:absolute;top:0;left:0;width:100%;height:100%&quot;&gt;&lt;/iframe&gt; &lt;/div&gt;&lt;/p&gt;</content:encoded><tags>Cyber Security,Sentinel,MDR</tags><featuredImage>https://blog.amestofortytwo.com/static/17adb0aa84ee29f0f97eb3745a7cda85/splash.png</featuredImage></item></channel></rss>